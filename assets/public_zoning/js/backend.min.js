!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;"undefined"!=typeof window?e=window:"undefined"!=typeof global?e=global:"undefined"!=typeof self&&(e=self),e.selectivity=t()}}(function(){return function t(e,i,s){function n(o,l){if(!i[o]){if(!e[o]){var h="function"==typeof require&&require;if(!l&&h)return h(o,!0);if(r)return r(o,!0);var u=new Error("Cannot find module '"+o+"'");throw u.code="MODULE_NOT_FOUND",u}var a=i[o]={exports:{}};e[o][0].call(a.exports,function(t){var i=e[o][1][t];return n(i?i:t)},a,a.exports,t,e,i,s)}return i[o].exports}for(var r="function"==typeof require&&require,o=0;o<s.length;o++)n(s[o]);return n}({1:[function(t,e){t(4),t(5),t(6),t(8),t(9),t(10),t(11),t(12),t(13),t(14),t(15),t(16),t(17),t(18),e.exports=t(7)},{10:10,11:11,12:12,13:13,14:14,15:15,16:16,17:17,18:18,4:4,5:5,6:6,7:7,8:8,9:9}],2:[function(t,e){"use strict";function i(t,e){function i(){var n=e-(s()-l);if(0>=n||n>e){var c=u;h=u=void 0,c&&(a=s(),o=t.apply(null,r),h||(r=null))}else h=setTimeout(i,n)}function n(){return r=arguments,l=s(),u=!0,h||(h=setTimeout(i,e)),o}var r,o,l,h,u,a=0;return e=0>e?0:+e||0,n}var s=Date.now;e.exports=i},{}],3:[function(t,e){"use strict";function i(t){return n[t]}function s(t){return t?String(t).replace(r,i):""}var n={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},r=new RegExp("["+Object.keys(n).join("")+"]","g");e.exports=s},{}],4:[function(t){"use strict";var e=window.jQuery||window.Zepto,i=t(2),s=t(7);t(12),s.OptionListeners.unshift(function(t,n){var r=n.ajax;if(r&&r.url){var o=r.formatError||s.Locale.ajaxError,l=r.minimumInputLength||0,h=r.params,u=r.processItem||function(t){return t},a=r.quietMillis||0,c=r.results||function(t){return{results:t,more:!1}},d=r.transport||e.ajax;a&&(d=i(d,a)),n.query=function(i){var n=i.offset,a=i.term;if(a.length<l)i.error(s.Locale.needMoreCharacters(l-a.length));else{t.dropdown.showLoading();var p=r.url instanceof Function?r.url():r.url;h&&(p+=(p.indexOf("?")>-1?"&":"?")+e.param(h(a,n)));var f=r.success,v=r.error;d(e.extend({},r,{url:p,success:function(t,e,s){f&&f(t,e,s);var r=c(t,n);r.results=r.results.map(u),i.callback(r)},error:function(t,e,s){v&&v(t,e,s),i.error(o(a,t,e,s),{escape:!1})}}))}}}})},{12:12,2:2,7:7,jquery:"jquery"}],5:[function(t){"use strict";var e=t(7),i=0;e.OptionListeners.push(function(t,e){var s=e.query;s&&(e.query=function(t){i++;var e=i,n=t.callback,r=t.error;t.callback=function(){e===i&&n.apply(null,arguments)},t.error=function(){e===i&&r.apply(null,arguments)},s(t)})})},{7:7}],6:[function(t){"use strict";var e=window.jQuery||window.Zepto,i=t(9);e.extend(i.prototype,{addToDom:function(){this.$el.appendTo(this.selectivity.$el[0].ownerDocument.body)},removeCloseHandler:function(){this._$backdrop&&!this.parentMenu&&(this._$backdrop.remove(),this._$backdrop=null)},setupCloseHandler:function(){var t;this.parentMenu?t=this.parentMenu._$backdrop:(t=e("<div>").addClass("selectivity-backdrop"),e("body").append(t)),t.on("click",this.close.bind(this)),this._$backdrop=t}})},{9:9,jquery:"jquery"}],7:[function(t,e){"use strict";function i(t,e){var i;return this.each(function(){var r=this.selectivity;if(r){if("string"!==n.type(t)&&(e=t,t="setOptions"),"function"!==n.type(r[t]))throw new Error("Unknown method: "+t);void 0===i&&(i=r[t].call(r,e))}else if("string"===n.type(t)){if("destroy"!==t)throw new Error("Cannot call method on element without Selectivity instance")}else{e=n.extend({},t,{element:this});var o=n(this);o.is("select")&&o.prop("multiple")&&(e.multiple=!0);var l=s.InputTypes,h=e.inputType||(e.multiple?"Multiple":"Single");if("function"!==n.type(h)){if(!l[h])throw new Error("Unknown Selectivity input type: "+h);h=l[h]}this.selectivity=new h(e)}}),void 0===i?this:i}function s(t){return this instanceof s?(this.$el=n(t.element),this.$searchInput=null,this.dropdown=null,this.enabled=!0,this.hasTouch="undefined"!=typeof window&&"ontouchstart"in window,this.hasKeyboard=!this.hasTouch,this.items=null,this.matcher=s.matcher,this.options={},this.results=[],this.searchInputListeners=s.SearchInputListeners,this.templates=n.extend({},s.Templates),this.term="",this.setOptions(t),t.value?this.value(t.value,{triggerChange:!1}):this.data(t.data||null,{triggerChange:!1}),this._events=[],this.$el.on("selectivity-close",this._closed.bind(this)),void this.delegateEvents()):i.apply(this,arguments)}var n=window.jQuery||window.Zepto;n.extend(s.prototype,{$:function(t){return this.$el.find(t)},close:function(){this.dropdown&&this.dropdown.close()},data:function(t,e){return e=e||{},void 0===t?this._data:(t=this.validateData(t),this._data=t,this._value=this.getValueForData(t),e.triggerChange!==!1&&this.triggerChange(),void 0)},delegateEvents:function(){this.undelegateEvents(),n.each(this.events,function(t,e){var i,s=t.indexOf(" ");s>-1&&(i=t.slice(s+1),t=t.slice(0,s)),"string"===n.type(e)&&(e=this[e]),e=e.bind(this),i?this.$el.on(t,i,e):this.$el.on(t,e),this._events.push({event:t,selector:i,listener:e})}.bind(this))},destroy:function(){this.undelegateEvents();var t=this.$el;t.children().remove(),t[0].selectivity=null,t=null},filterResults:function(t){return t},focus:function(){this.$searchInput&&this.$searchInput.focus()},getItemForId:function(t){var e=this.items;return e?s.findNestedById(e,t):{id:t,text:""+t}},initSearchInput:function(t){this.$searchInput=t,this.searchInputListeners.forEach(function(e){e(this,t)}.bind(this)),t.on("keyup",function(t){t.isDefaultPrevented()||this.search()}.bind(this))},loadMore:function(){this.options.query({callback:function(t){if(!t||!t.results)throw new Error("callback must be passed a response object");this._addResults(s.processItems(t.results),{hasMore:!!t.more})}.bind(this),error:this._addResults.bind(this,[]),offset:this.results.length,selectivity:this,term:this.term})},open:function(t){if(t=t||{},!this.dropdown&&this.triggerEvent("selectivity-opening")){var e=this.options.dropdown||s.Dropdown;e&&(this.dropdown=new e({position:this.options.positionDropdown,selectivity:this,showSearchInput:t.showSearchInput})),this.search("")}},positionDropdown:function(){this.dropdown&&this.dropdown.position()},search:function(t){function e(e,s){i._setResults(e,n.extend({term:t},s))}var i=this;if(void 0===t){if(!i.$searchInput)return;t=i.$searchInput.val()}if(i.items){t=s.transformText(t);var r=i.matcher;e(i.items.map(function(e){return r(e,t)}).filter(function(t){return!!t}))}else i.options.query&&i.options.query({callback:function(t){if(!t||!t.results)throw new Error("callback must be passed a response object");e(s.processItems(t.results),{hasMore:!!t.more})},error:i._showError.bind(i),offset:0,selectivity:i,term:t});i.term=t},setOptions:function(t){t=t||{},s.OptionListeners.forEach(function(e){e(this,t)}.bind(this)),n.extend(this.options,t);var e=n.extend({closeOnSelect:"boolean",dropdown:"function|null",initSelection:"function|null",matcher:"function|null",placeholder:"string",positionDropdown:"function|null",query:"function|null",readOnly:"boolean",removeOnly:"boolean",searchInputListeners:"array"},t.allowedTypes);n.each(t,function(t,i){var r=e[t];if(r&&!r.split("|").some(function(t){return n.type(i)===t}))throw new Error(t+" must be of type "+r);switch(t){case"items":this.items=null===i?i:s.processItems(i);break;case"matcher":this.matcher=i;break;case"searchInputListeners":this.searchInputListeners=i;break;case"templates":n.extend(this.templates,i)}}.bind(this)),this.enabled=!this.options.readOnly&&!this.options.removeOnly},template:function(t,e){var i=this.templates[t];if(i)return"function"===n.type(i)?i(e):i.render?i.render(e):i.toString();throw new Error("Unknown template: "+t)},triggerChange:function(t){this.triggerEvent("change",n.extend({value:this._value},t))},triggerEvent:function(t,e){var i=n.Event(t,e||{});return this.$el.trigger(i),!i.isDefaultPrevented()},undelegateEvents:function(){this._events.forEach(function(t){t.selector?this.$el.off(t.event,t.selector,t.listener):this.$el.off(t.event,t.listener)},this),this._events=[]},val:function(t){return this.value(t)},validateItem:function(t){if(t&&s.isValidId(t.id)&&"string"===n.type(t.text))return t;throw new Error("Item should have id (number or string) and text (string) properties")},value:function(t,e){return e=e||{},void 0===t?this._value:(t=this.validateValue(t),this._value=t,this.options.initSelection?this.options.initSelection(t,function(i){this._value===t&&(this._data=this.validateData(i),e.triggerChange!==!1&&this.triggerChange())}.bind(this)):(this._data=this.getDataForValue(t),e.triggerChange!==!1&&this.triggerChange()),void 0)},_addResults:function(t,e){this.results=this.results.concat(t),this.dropdown&&this.dropdown.showResults(this.filterResults(t),n.extend({add:!0},e))},_closed:function(){this.dropdown=null},_getItemId:function(t){var e;e=t.target?n(t.target).closest("[data-item-id]"):t.length?t:n(t);var i=e.data("item-id");return"string"===n.type(i)?i:s.findById(this._data||[],i)||s.findNestedById(this.results,i)?i:""+i},_setResults:function(t,e){this.results=t,this.dropdown&&this.dropdown.showResults(this.filterResults(t),e||{})},_showError:function(t,e){this.results=[],this.dropdown&&this.dropdown.showError(t,e)}}),s.Dropdown=null,s.InputTypes={},s.OptionListeners=[],s.SearchInputListeners=[],s.Templates={},s.findById=function(t,e){var i=s.findIndexById(t,e);return i>-1?t[i]:null},s.findIndexById=function(t,e){for(var i=0,s=t.length;s>i;i++)if(t[i].id===e)return i;return-1},s.findNestedById=function(t,e){for(var i=0,n=t.length;n>i;i++){var r=t[i];if(r.id===e)return r;if(r.children){var o=s.findNestedById(r.children,e);if(o)return o}}return null},s.inherits=function(t,e,i){return 2===arguments.length&&(i=e,e=s),t.prototype=n.extend(Object.create(e.prototype),{constructor:t},i),function(t,i){e.prototype[i].apply(t,Array.prototype.slice.call(arguments,2))}},s.isValidId=function(t){var e=n.type(t);return"number"===e||"string"===e},s.matcher=function(t,e){var i=null;if(s.transformText(t.text).indexOf(e)>-1)i=t;else if(t.children){var n=t.children.map(function(t){return s.matcher(t,e)}).filter(function(t){return!!t});n.length&&(i={id:t.id,text:t.text,children:n})}return i},s.processItem=function(t){if(s.isValidId(t))return{id:t,text:""+t};if(t&&(s.isValidId(t.id)||t.children)&&"string"===n.type(t.text))return t.children&&(t.children=s.processItems(t.children)),t;throw new Error("invalid item")},s.processItems=function(t){if("array"===n.type(t))return t.map(s.processItem);throw new Error("invalid items")},s.quoteCssAttr=function(t){return'"'+(""+t).replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'},s.transformText=function(t){return t.toLowerCase()},e.exports=n.fn.selectivity=s},{jquery:"jquery"}],8:[function(t){"use strict";var e={"Ⓐ":"A","Ａ":"A","À":"A","Á":"A","Â":"A","Ầ":"A","Ấ":"A","Ẫ":"A","Ẩ":"A","Ã":"A","Ā":"A","Ă":"A","Ằ":"A","Ắ":"A","Ẵ":"A","Ẳ":"A","Ȧ":"A","Ǡ":"A","Ä":"A","Ǟ":"A","Ả":"A","Å":"A","Ǻ":"A","Ǎ":"A","Ȁ":"A","Ȃ":"A","Ạ":"A","Ậ":"A","Ặ":"A","Ḁ":"A","Ą":"A","Ⱥ":"A","Ɐ":"A","Ꜳ":"AA","Æ":"AE","Ǽ":"AE","Ǣ":"AE","Ꜵ":"AO","Ꜷ":"AU","Ꜹ":"AV","Ꜻ":"AV","Ꜽ":"AY","Ⓑ":"B","Ｂ":"B","Ḃ":"B","Ḅ":"B","Ḇ":"B","Ƀ":"B","Ƃ":"B","Ɓ":"B","Ⓒ":"C","Ｃ":"C","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","Ç":"C","Ḉ":"C","Ƈ":"C","Ȼ":"C","Ꜿ":"C","Ⓓ":"D","Ｄ":"D","Ḋ":"D","Ď":"D","Ḍ":"D","Ḑ":"D","Ḓ":"D","Ḏ":"D","Đ":"D","Ƌ":"D","Ɗ":"D","Ɖ":"D","Ꝺ":"D","Ǳ":"DZ","Ǆ":"DZ","ǲ":"Dz","ǅ":"Dz","Ⓔ":"E","Ｅ":"E","È":"E","É":"E","Ê":"E","Ề":"E","Ế":"E","Ễ":"E","Ể":"E","Ẽ":"E","Ē":"E","Ḕ":"E","Ḗ":"E","Ĕ":"E","Ė":"E","Ë":"E","Ẻ":"E","Ě":"E","Ȅ":"E","Ȇ":"E","Ẹ":"E","Ệ":"E","Ȩ":"E","Ḝ":"E","Ę":"E","Ḙ":"E","Ḛ":"E","Ɛ":"E","Ǝ":"E","Ⓕ":"F","Ｆ":"F","Ḟ":"F","Ƒ":"F","Ꝼ":"F","Ⓖ":"G","Ｇ":"G","Ǵ":"G","Ĝ":"G","Ḡ":"G","Ğ":"G","Ġ":"G","Ǧ":"G","Ģ":"G","Ǥ":"G","Ɠ":"G","Ꞡ":"G","Ᵹ":"G","Ꝿ":"G","Ⓗ":"H","Ｈ":"H","Ĥ":"H","Ḣ":"H","Ḧ":"H","Ȟ":"H","Ḥ":"H","Ḩ":"H","Ḫ":"H","Ħ":"H","Ⱨ":"H","Ⱶ":"H","Ɥ":"H","Ⓘ":"I","Ｉ":"I","Ì":"I","Í":"I","Î":"I","Ĩ":"I","Ī":"I","Ĭ":"I","İ":"I","Ï":"I","Ḯ":"I","Ỉ":"I","Ǐ":"I","Ȉ":"I","Ȋ":"I","Ị":"I","Į":"I","Ḭ":"I","Ɨ":"I","Ⓙ":"J","Ｊ":"J","Ĵ":"J","Ɉ":"J","Ⓚ":"K","Ｋ":"K","Ḱ":"K","Ǩ":"K","Ḳ":"K","Ķ":"K","Ḵ":"K","Ƙ":"K","Ⱪ":"K","Ꝁ":"K","Ꝃ":"K","Ꝅ":"K","Ꞣ":"K","Ⓛ":"L","Ｌ":"L","Ŀ":"L","Ĺ":"L","Ľ":"L","Ḷ":"L","Ḹ":"L","Ļ":"L","Ḽ":"L","Ḻ":"L","Ł":"L","Ƚ":"L","Ɫ":"L","Ⱡ":"L","Ꝉ":"L","Ꝇ":"L","Ꞁ":"L","Ǉ":"LJ","ǈ":"Lj","Ⓜ":"M","Ｍ":"M","Ḿ":"M","Ṁ":"M","Ṃ":"M","Ɱ":"M","Ɯ":"M","Ⓝ":"N","Ｎ":"N","Ǹ":"N","Ń":"N","Ñ":"N","Ṅ":"N","Ň":"N","Ṇ":"N","Ņ":"N","Ṋ":"N","Ṉ":"N","Ƞ":"N","Ɲ":"N","Ꞑ":"N","Ꞥ":"N","Ǌ":"NJ","ǋ":"Nj","Ⓞ":"O","Ｏ":"O","Ò":"O","Ó":"O","Ô":"O","Ồ":"O","Ố":"O","Ỗ":"O","Ổ":"O","Õ":"O","Ṍ":"O","Ȭ":"O","Ṏ":"O","Ō":"O","Ṑ":"O","Ṓ":"O","Ŏ":"O","Ȯ":"O","Ȱ":"O","Ö":"O","Ȫ":"O","Ỏ":"O","Ő":"O","Ǒ":"O","Ȍ":"O","Ȏ":"O","Ơ":"O","Ờ":"O","Ớ":"O","Ỡ":"O","Ở":"O","Ợ":"O","Ọ":"O","Ộ":"O","Ǫ":"O","Ǭ":"O","Ø":"O","Ǿ":"O","Ɔ":"O","Ɵ":"O","Ꝋ":"O","Ꝍ":"O","Ƣ":"OI","Ꝏ":"OO","Ȣ":"OU","Ⓟ":"P","Ｐ":"P","Ṕ":"P","Ṗ":"P","Ƥ":"P","Ᵽ":"P","Ꝑ":"P","Ꝓ":"P","Ꝕ":"P","Ⓠ":"Q","Ｑ":"Q","Ꝗ":"Q","Ꝙ":"Q","Ɋ":"Q","Ⓡ":"R","Ｒ":"R","Ŕ":"R","Ṙ":"R","Ř":"R","Ȑ":"R","Ȓ":"R","Ṛ":"R","Ṝ":"R","Ŗ":"R","Ṟ":"R","Ɍ":"R","Ɽ":"R","Ꝛ":"R","Ꞧ":"R","Ꞃ":"R","Ⓢ":"S","Ｓ":"S","ẞ":"S","Ś":"S","Ṥ":"S","Ŝ":"S","Ṡ":"S","Š":"S","Ṧ":"S","Ṣ":"S","Ṩ":"S","Ș":"S","Ş":"S","Ȿ":"S","Ꞩ":"S","Ꞅ":"S","Ⓣ":"T","Ｔ":"T","Ṫ":"T","Ť":"T","Ṭ":"T","Ț":"T","Ţ":"T","Ṱ":"T","Ṯ":"T","Ŧ":"T","Ƭ":"T","Ʈ":"T","Ⱦ":"T","Ꞇ":"T","Ꜩ":"TZ","Ⓤ":"U","Ｕ":"U","Ù":"U","Ú":"U","Û":"U","Ũ":"U","Ṹ":"U","Ū":"U","Ṻ":"U","Ŭ":"U","Ü":"U","Ǜ":"U","Ǘ":"U","Ǖ":"U","Ǚ":"U","Ủ":"U","Ů":"U","Ű":"U","Ǔ":"U","Ȕ":"U","Ȗ":"U","Ư":"U","Ừ":"U","Ứ":"U","Ữ":"U","Ử":"U","Ự":"U","Ụ":"U","Ṳ":"U","Ų":"U","Ṷ":"U","Ṵ":"U","Ʉ":"U","Ⓥ":"V","Ｖ":"V","Ṽ":"V","Ṿ":"V","Ʋ":"V","Ꝟ":"V","Ʌ":"V","Ꝡ":"VY","Ⓦ":"W","Ｗ":"W","Ẁ":"W","Ẃ":"W","Ŵ":"W","Ẇ":"W","Ẅ":"W","Ẉ":"W","Ⱳ":"W","Ⓧ":"X","Ｘ":"X","Ẋ":"X","Ẍ":"X","Ⓨ":"Y","Ｙ":"Y","Ỳ":"Y","Ý":"Y","Ŷ":"Y","Ỹ":"Y","Ȳ":"Y","Ẏ":"Y","Ÿ":"Y","Ỷ":"Y","Ỵ":"Y","Ƴ":"Y","Ɏ":"Y","Ỿ":"Y","Ⓩ":"Z","Ｚ":"Z","Ź":"Z","Ẑ":"Z","Ż":"Z","Ž":"Z","Ẓ":"Z","Ẕ":"Z","Ƶ":"Z","Ȥ":"Z","Ɀ":"Z","Ⱬ":"Z","Ꝣ":"Z","ⓐ":"a","ａ":"a","ẚ":"a","à":"a","á":"a","â":"a","ầ":"a","ấ":"a","ẫ":"a","ẩ":"a","ã":"a","ā":"a","ă":"a","ằ":"a","ắ":"a","ẵ":"a","ẳ":"a","ȧ":"a","ǡ":"a","ä":"a","ǟ":"a","ả":"a","å":"a","ǻ":"a","ǎ":"a","ȁ":"a","ȃ":"a","ạ":"a","ậ":"a","ặ":"a","ḁ":"a","ą":"a","ⱥ":"a","ɐ":"a","ꜳ":"aa","æ":"ae","ǽ":"ae","ǣ":"ae","ꜵ":"ao","ꜷ":"au","ꜹ":"av","ꜻ":"av","ꜽ":"ay","ⓑ":"b","ｂ":"b","ḃ":"b","ḅ":"b","ḇ":"b","ƀ":"b","ƃ":"b","ɓ":"b","ⓒ":"c","ｃ":"c","ć":"c","ĉ":"c","ċ":"c","č":"c","ç":"c","ḉ":"c","ƈ":"c","ȼ":"c","ꜿ":"c","ↄ":"c","ⓓ":"d","ｄ":"d","ḋ":"d","ď":"d","ḍ":"d","ḑ":"d","ḓ":"d","ḏ":"d","đ":"d","ƌ":"d","ɖ":"d","ɗ":"d","ꝺ":"d","ǳ":"dz","ǆ":"dz","ⓔ":"e","ｅ":"e","è":"e","é":"e","ê":"e","ề":"e","ế":"e","ễ":"e","ể":"e","ẽ":"e","ē":"e","ḕ":"e","ḗ":"e","ĕ":"e","ė":"e","ë":"e","ẻ":"e","ě":"e","ȅ":"e","ȇ":"e","ẹ":"e","ệ":"e","ȩ":"e","ḝ":"e","ę":"e","ḙ":"e","ḛ":"e","ɇ":"e","ɛ":"e","ǝ":"e","ⓕ":"f","ｆ":"f","ḟ":"f","ƒ":"f","ꝼ":"f","ⓖ":"g","ｇ":"g","ǵ":"g","ĝ":"g","ḡ":"g","ğ":"g","ġ":"g","ǧ":"g","ģ":"g","ǥ":"g","ɠ":"g","ꞡ":"g","ᵹ":"g","ꝿ":"g","ⓗ":"h","ｈ":"h","ĥ":"h","ḣ":"h","ḧ":"h","ȟ":"h","ḥ":"h","ḩ":"h","ḫ":"h","ẖ":"h","ħ":"h","ⱨ":"h","ⱶ":"h","ɥ":"h","ƕ":"hv","ⓘ":"i","ｉ":"i","ì":"i","í":"i","î":"i","ĩ":"i","ī":"i","ĭ":"i","ï":"i","ḯ":"i","ỉ":"i","ǐ":"i","ȉ":"i","ȋ":"i","ị":"i","į":"i","ḭ":"i","ɨ":"i","ı":"i","ⓙ":"j","ｊ":"j","ĵ":"j","ǰ":"j","ɉ":"j","ⓚ":"k","ｋ":"k","ḱ":"k","ǩ":"k","ḳ":"k","ķ":"k","ḵ":"k","ƙ":"k","ⱪ":"k","ꝁ":"k","ꝃ":"k","ꝅ":"k","ꞣ":"k","ⓛ":"l","ｌ":"l","ŀ":"l","ĺ":"l","ľ":"l","ḷ":"l","ḹ":"l","ļ":"l","ḽ":"l","ḻ":"l","ſ":"l","ł":"l","ƚ":"l","ɫ":"l","ⱡ":"l","ꝉ":"l","ꞁ":"l","ꝇ":"l","ǉ":"lj","ⓜ":"m","ｍ":"m","ḿ":"m","ṁ":"m","ṃ":"m","ɱ":"m","ɯ":"m","ⓝ":"n","ｎ":"n","ǹ":"n","ń":"n","ñ":"n","ṅ":"n","ň":"n","ṇ":"n","ņ":"n","ṋ":"n","ṉ":"n","ƞ":"n","ɲ":"n","ŉ":"n","ꞑ":"n","ꞥ":"n","ǌ":"nj","ⓞ":"o","ｏ":"o","ò":"o","ó":"o","ô":"o","ồ":"o","ố":"o","ỗ":"o","ổ":"o","õ":"o","ṍ":"o","ȭ":"o","ṏ":"o","ō":"o","ṑ":"o","ṓ":"o","ŏ":"o","ȯ":"o","ȱ":"o","ö":"o","ȫ":"o","ỏ":"o","ő":"o","ǒ":"o","ȍ":"o","ȏ":"o","ơ":"o","ờ":"o","ớ":"o","ỡ":"o","ở":"o","ợ":"o","ọ":"o","ộ":"o","ǫ":"o","ǭ":"o","ø":"o","ǿ":"o","ɔ":"o","ꝋ":"o","ꝍ":"o","ɵ":"o","ƣ":"oi","ȣ":"ou","ꝏ":"oo","ⓟ":"p","ｐ":"p","ṕ":"p","ṗ":"p","ƥ":"p","ᵽ":"p","ꝑ":"p","ꝓ":"p","ꝕ":"p","ⓠ":"q","ｑ":"q","ɋ":"q","ꝗ":"q","ꝙ":"q","ⓡ":"r","ｒ":"r","ŕ":"r","ṙ":"r","ř":"r","ȑ":"r","ȓ":"r","ṛ":"r","ṝ":"r","ŗ":"r","ṟ":"r","ɍ":"r","ɽ":"r","ꝛ":"r","ꞧ":"r","ꞃ":"r","ⓢ":"s","ｓ":"s","ß":"s","ś":"s","ṥ":"s","ŝ":"s","ṡ":"s","š":"s","ṧ":"s","ṣ":"s","ṩ":"s","ș":"s","ş":"s","ȿ":"s","ꞩ":"s","ꞅ":"s","ẛ":"s","ⓣ":"t","ｔ":"t","ṫ":"t","ẗ":"t","ť":"t","ṭ":"t","ț":"t","ţ":"t","ṱ":"t","ṯ":"t","ŧ":"t","ƭ":"t","ʈ":"t","ⱦ":"t","ꞇ":"t","ꜩ":"tz","ⓤ":"u","ｕ":"u","ù":"u","ú":"u","û":"u","ũ":"u","ṹ":"u","ū":"u","ṻ":"u","ŭ":"u","ü":"u","ǜ":"u","ǘ":"u","ǖ":"u","ǚ":"u","ủ":"u","ů":"u","ű":"u","ǔ":"u","ȕ":"u","ȗ":"u","ư":"u","ừ":"u","ứ":"u","ữ":"u","ử":"u","ự":"u","ụ":"u","ṳ":"u","ų":"u","ṷ":"u","ṵ":"u","ʉ":"u","ⓥ":"v","ｖ":"v","ṽ":"v","ṿ":"v","ʋ":"v","ꝟ":"v","ʌ":"v","ꝡ":"vy","ⓦ":"w","ｗ":"w","ẁ":"w","ẃ":"w","ŵ":"w","ẇ":"w","ẅ":"w","ẘ":"w","ẉ":"w","ⱳ":"w","ⓧ":"x","ｘ":"x","ẋ":"x","ẍ":"x","ⓨ":"y","ｙ":"y","ỳ":"y","ý":"y","ŷ":"y","ỹ":"y","ȳ":"y","ẏ":"y","ÿ":"y","ỷ":"y","ẙ":"y","ỵ":"y","ƴ":"y","ɏ":"y","ỿ":"y","ⓩ":"z","ｚ":"z","ź":"z","ẑ":"z","ż":"z","ž":"z","ẓ":"z","ẕ":"z","ƶ":"z","ȥ":"z","ɀ":"z","ⱬ":"z","ꝣ":"z","Ά":"Α","Έ":"Ε","Ή":"Η","Ί":"Ι","Ϊ":"Ι","Ό":"Ο","Ύ":"Υ","Ϋ":"Υ","Ώ":"Ω","ά":"α","έ":"ε","ή":"η","ί":"ι","ϊ":"ι","ΐ":"ι","ό":"ο","ύ":"υ","ϋ":"υ","ΰ":"υ","ω":"ω","ς":"σ"},i=t(7),s=i.transformText;i.transformText=function(t){for(var i="",n=0,r=t.length;r>n;n++){var o=t[n];i+=e[o]||o}return s(i)}},{7:7}],9:[function(t,e){"use strict";function i(t){var e=t.selectivity;this.$el=s(e.template("dropdown",{dropdownCssClass:e.options.dropdownCssClass,searchInputPlaceholder:e.options.searchInputPlaceholder,showSearchInput:t.showSearchInput})),this.$results=this.$(".selectivity-results-container"),this.hasMore=!1,this.highlightedResult=null,this.loadMoreHighlighted=!1,this.options=t,this.results=[],this.selectivity=e,this._closeProxy=this.close.bind(this),e.options.closeOnSelect!==!1&&e.$el.on("selectivity-selecting",this._closeProxy),this.addToDom(),this.position(),this.setupCloseHandler(),this._scrolledProxy=n(this._scrolled.bind(this),50),this._suppressMouseWheel(),t.showSearchInput&&(e.initSearchInput(this.$(".selectivity-search-input")),e.focus()),this._delegateEvents(),this.showLoading(),this.triggerOpen()}var s=window.jQuery||window.Zepto,n=t(2),r=t(7);s.extend(i.prototype,{$:function(t){return this.$el.find(t)},addToDom:function(){this.$el.appendTo(this.selectivity.$el[0].ownerDocument.body)},close:function(){this.$el.remove(),this.removeCloseHandler(),this.selectivity.$el.off("selectivity-selecting",this._closeProxy),this.triggerClose()},events:{"click .selectivity-load-more":"_loadMoreClicked","click .selectivity-result-item":"_resultClicked","mouseenter .selectivity-load-more":"highlightLoadMore","mouseenter .selectivity-result-item":"_resultHovered"},highlight:function(t){this.loadMoreHighlighted&&this.$(".selectivity-load-more").removeClass("highlight"),this.$(".selectivity-result-item").removeClass("highlight").filter("[data-item-id="+r.quoteCssAttr(t.id)+"]").addClass("highlight"),this.highlightedResult=t,this.loadMoreHighlighted=!1,this.selectivity.triggerEvent("selectivity-highlight",{item:t,id:t.id})},highlightLoadMore:function(){this.$(".selectivity-result-item").removeClass("highlight"),this.$(".selectivity-load-more").addClass("highlight"),this.highlightedResult=null,this.loadMoreHighlighted=!0},position:function(){var t=this.options.position;t&&t(this.$el,this.selectivity.$el),this._scrolled()},removeCloseHandler:function(){s("body").off("click",this._closeProxy)},renderItems:function(t){var e=this.selectivity;return t.map(function(t){var i=e.template(t.id?"resultItem":"resultLabel",t);return t.children&&(i+=e.template("resultChildren",{childrenHtml:this.renderItems(t.children)})),i},this).join("")},selectHighlight:function(){this.highlightedResult?this.selectItem(this.highlightedResult.id):this.loadMoreHighlighted&&this._loadMoreClicked()},selectItem:function(t){var e=this.selectivity,i=r.findNestedById(e.results,t);if(i){var s={id:t,item:i};e.triggerEvent("selectivity-selecting",s)&&e.triggerEvent("selectivity-selected",s)}},setupCloseHandler:function(){s("body").on("click",this._closeProxy)},showError:function(t,e){e=e||{},this.$results.html(this.selectivity.template("error",{escape:e.escape!==!1,message:t})),this.hasMore=!1,this.results=[],this.highlightedResult=null,this.loadMoreHighlighted=!1,this.position()},showLoading:function(){this.$results.html(this.selectivity.template("loading")),this.hasMore=!1,this.results=[],this.highlightedResult=null,this.loadMoreHighlighted=!1,this.position()},showResults:function(t,e){var i=this.renderItems(t);e.hasMore?i+=this.selectivity.template("loadMore"):i||e.add||(i=this.selectivity.template("noResults",{term:e.term})),e.add?(this.$(".selectivity-loading").replaceWith(i),this.results=this.results.concat(t)):(this.$results.html(i),this.results=t),this.hasMore=e.hasMore,(!e.add||this.loadMoreHighlighted)&&this._highlightFirstItem(t),this.position()},triggerClose:function(){this.selectivity.$el.trigger("selectivity-close")},triggerOpen:function(){this.selectivity.$el.trigger("selectivity-open")},_delegateEvents:function(){s.each(this.events,function(t,e){var i=t.indexOf(" "),n=t.slice(i+1);t=t.slice(0,i),"string"===s.type(e)&&(e=this[e]),e=e.bind(this),this.$el.on(t,n,e)}.bind(this)),this.$results.on("scroll touchmove touchend",this._scrolledProxy)},_highlightFirstItem:function(t){function e(t){for(var i=0,s=t.length;s>i;i++){var n=t[i];if(n.id)return n;if(n.children){var r=e(n.children);if(r)return r}}}var i=e(t);i?this.highlight(i):(this.highlightedResult=null,this.loadMoreHighlighted=!1)},_loadMoreClicked:function(){return this.$(".selectivity-load-more").replaceWith(this.selectivity.template("loading")),this.selectivity.loadMore(),this.selectivity.focus(),!1},_resultClicked:function(t){return this.selectItem(this.selectivity._getItemId(t)),!1},_resultHovered:function(t){var e=this.selectivity._getItemId(t),i=r.findNestedById(this.results,e);i&&this.highlight(i)},_scrolled:function(){var t=this.$(".selectivity-load-more");t.length&&t[0].offsetTop-this.$results[0].scrollTop<this.$el.height()&&this._loadMoreClicked()},_scrollToHighlight:function(t){var e;if(this.highlightedResult){var i=r.quoteCssAttr(this.highlightedResult.id);e=this.$(".selectivity-result-item[data-item-id="+i+"]")[0]}else{if(!this.loadMoreHighlighted)return;e=this.$(".selectivity-load-more")[0]}var s=e.getBoundingClientRect(),n=this.$results[0].getBoundingClientRect();(s.top<n.top||s.bottom>n.bottom)&&e.scrollIntoView(t.alignToTop)},_suppressMouseWheel:function(){var t=this.selectivity.options.suppressMouseWheelSelector;if(null!==t){var e=t||".selectivity-results-container";this.$el.on("DOMMouseScroll mousewheel",e,function(t){function e(){return t.stopPropagation(),t.preventDefault(),t.returnValue=!1,!1}var i=s(this),n=this.scrollTop,r=this.scrollHeight,o=i.height(),l=t.originalEvent,h="DOMMouseScroll"===t.type?-40*l.detail:l.wheelDelta,u=h>0;if(r>o){if(!u&&-h>r-o-n)return i.scrollTop(r),e();if(u&&h>n)return i.scrollTop(0),e()}})}}}),e.exports=r.Dropdown=i},{2:2,7:7,jquery:"jquery"}],10:[function(t,e){"use strict";function i(t){var e=t.indexOf("@"),i=t.lastIndexOf("."),s=t.indexOf(" ");return e>0&&i>e+1&&i<t.length-2&&-1===s}function s(t,e){e=void 0===e?t.length:e;for(var i=e-1;i>=0;i--)if(/\s/.test(t[i]))return t.slice(i+1,e);return t.slice(0,e)}function n(t,e){return t.slice(0,1)===e[0]&&t.slice(-1)===e[1]?t.slice(1,-1).trim():t.trim()}function r(t){var e=s(t),r=t.slice(0,-e.length).trim();return i(e)?(e=n(n(e,"()"),"<>"),r=n(r,'""').trim()||e,{id:e,text:r}):t.trim()?{id:t,text:t}:null}function o(t,e,n){function o(t){if(t)for(var e=0,n=t.length;n>e;e++)switch(t[e]){case";":case",":case"\n":return!0;case" ":case"	":if(i(s(t,e)))return!0;break;case'"':do e++;while(n>e&&'"'!==t[e]);break;default:continue}return!1}function l(t){for(var e=0,n=t.length;n>e;e++)switch(t[e]){case";":case",":case"\n":return{term:t.slice(0,e),input:t.slice(e+1)};case" ":case"	":if(i(s(t,e)))return{term:t.slice(0,e),input:t.slice(e+1)};break;case'"':do e++;while(n>e&&'"'!==t[e]);break;default:continue}return{}}for(;o(t);){var h=l(t);if(h.term){var a=r(h.term);!a||a.id&&u.findById(e,a.id)||n(a)}t=h.input}return t}function l(t){a.call(this,t)}var h=window.jQuery||window.Zepto,u=t(7),a=t(13),c=u.inherits(l,a,{initSearchInput:function(t){c(this,"initSearchInput",t),t.on("blur",function(){var e=t.val();i(s(e))&&this.add(r(e))}.bind(this))},setOptions:function(t){t=h.extend({createTokenItem:r,showDropdown:!1,tokenizer:o},t),c(this,"setOptions",t)}});e.exports=u.InputTypes.Email=l},{13:13,7:7,jquery:"jquery"}],11:[function(t){"use strict";function e(t,e){function l(t,e){function s(t,e){for(var i=0,s=t.length;s>i;i++)if(t.eq(i).is(e))return i;return-1}function n(){var s;if(t.highlightedResult){var n=i.quoteCssAttr(t.highlightedResult.id);s=t.$(".selectivity-result-item[data-item-id="+n+"]")[0]}else{if(!t.loadMoreHighlighted)return;s=t.$(".selectivity-load-more")[0]}var r=s.getBoundingClientRect(),o=t.$results[0].getBoundingClientRect();(r.top<o.top||r.bottom>o.bottom)&&s.scrollIntoView(0>e)}var r=t.results;if(r.length){var o=t.$(".selectivity-result-item"),l=e>0?0:o.length-1,h=l,u=t.highlightedResult;if(u){var a=i.quoteCssAttr(u.id);if(h=s(o,"[data-item-id="+a+"]")+e,e>0?h>=o.length:0>h){if(t.hasMore)return t.highlightLoadMore(),void n();h=l}}var c=i.findNestedById(r,t.selectivity._getItemId(o[h]));c&&(t.highlight(c),n())}}function h(e){var i=t.dropdown;i&&(e.keyCode===s?l(i,1):e.keyCode===o&&l(i,-1))}function u(e){function i(){t.options.showDropdown!==!1&&t.open()}var l=t.dropdown;e.keyCode!==n||e.ctrlKey?e.keyCode===r?(t.close(),e.preventDefault()):e.keyCode===s||e.keyCode===o?(i(),e.preventDefault()):i():(l?l.selectHighlight():t.options.showDropdown!==!1&&i(),e.preventDefault())}e.on("keydown",h).on("keyup",u)}var i=t(7),s=40,n=13,r=27,o=38;i.SearchInputListeners.push(e)},{7:7}],12:[function(t){"use strict";var e=t(3),i=t(7);i.Locale={ajaxError:function(t){return"Failed to fetch results for <b>"+e(t)+"</b>"},loading:"Loading...",loadMore:"Load more...",needMoreCharacters:function(t){return"Enter "+t+" more characters to search"},noResults:"No results found",noResultsForTerm:function(t){return"No results for <b>"+e(t)+"</b>"}}},{3:3,7:7}],13:[function(t,e){"use strict";function i(t){n.call(this,t),this.$el.html(this.template("multipleSelectInput",{enabled:this.enabled})),this._highlightedItemId=null,this.initSearchInput(this.$(".selectivity-multiple-input:not(.selectivity-width-detector)")),this._rerenderSelection(),t.positionDropdown||(this.options.positionDropdown=function(t,e){var i=e.offset(),n=t.height(),r=e.height(),o=e[0].getBoundingClientRect().top+r+n;t.css({left:i.left+"px",top:i.top+("undefined"!=typeof window&&o>s(window).height()?-n:r)+"px"}).width(e.width())})}var s=window.jQuery||window.Zepto,n=t(7),r=8,o=46,l=13,h=n.inherits(i,{add:function(t){var e=n.isValidId(t),i=e?t:this.validateItem(t)&&t.id;-1===this._value.indexOf(i)&&(this._value.push(i),e&&this.options.initSelection?this.options.initSelection([i],function(e){this._value.indexOf(i)>-1&&(t=this.validateItem(e[0]),this._data.push(t),this.triggerChange({added:t}))}.bind(this)):(e&&(t=this.getItemForId(i)),this._data.push(t),this.triggerChange({added:t}))),this.$searchInput.val("")},clear:function(){this.data([])},events:{change:"_rerenderSelection","change .selectivity-multiple-input":function(){return!1},click:"_clicked","click .selectivity-multiple-selected-item":"_itemClicked","keydown .selectivity-multiple-input":"_keyHeld","keyup .selectivity-multiple-input":"_keyReleased","paste .selectivity-multiple-input":"_onPaste","selectivity-selected":"_resultSelected"},filterResults:function(t){return t.filter(function(t){return!n.findById(this._data,t.id)},this)},getDataForValue:function(t){return t.map(this.getItemForId.bind(this)).filter(function(t){return!!t})},getValueForData:function(t){return t.map(function(t){return t.id})},remove:function(t){var e,i="object"===s.type(t)?t.id:t,r=n.findIndexById(this._data,i);r>-1&&(e=this._data[r],this._data.splice(r,1)),this._value[r]!==i&&(r=this._value.indexOf(i)),r>-1&&this._value.splice(r,1),e&&this.triggerChange({removed:e}),i===this._highlightedItemId&&(this._highlightedItemId=null)},search:function(){var t=this.$searchInput.val();this.options.tokenizer&&(t=this.options.tokenizer(t,this._data,this.add.bind(this),this.options),"string"===s.type(t)?this.$searchInput.val(t):t=""),this.dropdown&&h(this,"search")},setOptions:function(t){t=t||{};var e="backspaceHighlightsBeforeDelete";void 0===t[e]&&(t[e]=this.hasTouch),t.allowedTypes=t.allowedTypes||{},t.allowedTypes[e]="boolean",h(this,"setOptions",t)},validateData:function(t){if(null===t)return[];if("array"===s.type(t))return t.map(this.validateItem.bind(this));throw new Error("Data for MultiSelectivity instance should be array")},validateValue:function(t){if(null===t)return[];if("array"===s.type(t)){if(t.every(n.isValidId))return t;throw new Error("Value contains invalid IDs")}throw new Error("Value for MultiSelectivity instance should be an array")},_backspacePressed:function(){this.options.backspaceHighlightsBeforeDelete?this._highlightedItemId?this._deletePressed():this._value.length&&this._highlightItem(this._value.slice(-1)[0]):this._value.length&&this.remove(this._value.slice(-1)[0])},_clicked:function(){return this.enabled?(this.focus(),this._open(),!1):void 0},_createToken:function(){var t=this.$searchInput.val(),e=this.options.createTokenItem;if(t&&e){var i=e(t);i&&this.add(i)}},_deletePressed:function(){this._highlightedItemId&&this.remove(this._highlightedItemId)},_highlightItem:function(t){this._highlightedItemId=t,this.$(".selectivity-multiple-selected-item").removeClass("highlighted").filter("[data-item-id="+n.quoteCssAttr(t)+"]").addClass("highlighted"),this.hasKeyboard&&this.focus()},_itemClicked:function(t){this.enabled&&this._highlightItem(this._getItemId(t))},_itemRemoveClicked:function(t){return this.remove(this._getItemId(t)),this._updateInputWidth(),!1},_keyHeld:function(){this._originalValue=this.$searchInput.val()},_keyReleased:function(t){var e=!!this._originalValue;t.keyCode!==l||t.ctrlKey?t.keyCode!==r||e?t.keyCode!==o||e||this._deletePressed():this._backspacePressed():this.options.createTokenItem&&this._createToken(),this._updateInputWidth()},_onPaste:function(){setTimeout(function(){this.search(),this.options.createTokenItem&&this._createToken()}.bind(this),10)},_open:function(){this.options.showDropdown!==!1&&this.open()},_renderSelectedItem:function(t){this.$searchInput.before(this.template("multipleSelectedItem",s.extend({highlighted:t.id===this._highlightedItemId,removable:!this.options.readOnly},t)));var e=n.quoteCssAttr(t.id);this.$(".selectivity-multiple-selected-item[data-item-id="+e+"]").find(".selectivity-multiple-selected-item-remove").on("click",this._itemRemoveClicked.bind(this))},_rerenderSelection:function(t){if(t=t||{},t.added)this._renderSelectedItem(t.added),this._scrollToBottom();else if(t.removed){var e=n.quoteCssAttr(t.removed.id);this.$(".selectivity-multiple-selected-item[data-item-id="+e+"]").remove()}else this.$(".selectivity-multiple-selected-item").remove(),this._data.forEach(this._renderSelectedItem,this),this._updateInputWidth();(t.added||t.removed)&&(this.dropdown&&this.dropdown.showResults(this.filterResults(this.results),{hasMore:this.dropdown.hasMore}),this.hasKeyboard&&this.focus()),this.positionDropdown(),this._updatePlaceholder()},_resultSelected:function(t){-1===this._value.indexOf(t.id)?this.add(t.item):this.remove(t.item)},_scrollToBottom:function(){var t=this.$(".selectivity-multiple-input-container");t.scrollTop(t.height())
},_updateInputWidth:function(){if(this.enabled){var t=this.$searchInput,e=this.$(".selectivity-width-detector");e.text(t.val()||!this._data.length&&this.options.placeholder||""),t.width(e.width()+20),this.positionDropdown()}},_updatePlaceholder:function(){var t=this._data.length?"":this.options.placeholder;this.enabled?this.$searchInput.attr("placeholder",t):this.$(".selectivity-placeholder").text(t)}});e.exports=n.InputTypes.Multiple=i},{7:7,jquery:"jquery"}],14:[function(t,e){"use strict";function i(t){n.call(this,t),this.$el.html(this.template("singleSelectInput",this.options)),this._rerenderSelection(),t.positionDropdown||(this.options.positionDropdown=function(t,e){var i=e.offset(),n=i.top+e.height();if("undefined"!=typeof window){var r=e[0].getBoundingClientRect(),o=t.height(),l=s(window).height();r.top+o>l&&(n=Math.max(l-o+i.top-r.top,0))}t.css({left:i.left+"px",top:n+"px"}).width(e.width())})}var s=window.jQuery||window.Zepto,n=t(7),r=n.inherits(i,{events:{change:"_rerenderSelection",click:"_clicked","selectivity-selected":"_resultSelected"},clear:function(){this.data(null)},getDataForValue:function(t){return this.getItemForId(t)},getValueForData:function(t){return t?t.id:null},setOptions:function(t){t=t||{},t.allowedTypes=s.extend(t.allowedTypes||{},{allowClear:"boolean",showSearchInputInDropdown:"boolean"}),r(this,"setOptions",t)},validateData:function(t){return null===t?t:this.validateItem(t)},validateValue:function(t){if(null===t||n.isValidId(t))return t;throw new Error("Value for SingleSelectivity instance should be a valid ID or null")},_clicked:function(){return this.enabled?(this.dropdown?this.close():this.options.showDropdown!==!1&&this.open({showSearchInput:this.options.showSearchInputInDropdown!==!1}),!1):void 0},_itemRemoveClicked:function(){return this.data(null),!1},_rerenderSelection:function(){var t=this.$(".selectivity-single-result-container");this._data?(t.html(this.template("singleSelectedItem",s.extend({removable:this.options.allowClear&&!this.options.readOnly},this._data))),t.find(".selectivity-single-selected-item-remove").on("click",this._itemRemoveClicked.bind(this))):t.html(this.template("singleSelectPlaceholder",{placeholder:this.options.placeholder}))},_resultSelected:function(t){this.data(t.item),this.close()}});e.exports=n.InputTypes.Single=i},{7:7,jquery:"jquery"}],15:[function(t,e){"use strict";function i(t){this.parentMenu=t.parentMenu,n.call(this,t),this._closeSubmenuTimeout=0}var s=t(7),n=t(9),r=s.inherits(i,n,{close:function(){this.options.restoreOptions&&this.selectivity.setOptions(this.options.restoreOptions),this.options.restoreResults&&(this.selectivity.results=this.options.restoreResults),this.submenu&&this.submenu.close(),r(this,"close"),this.parentMenu&&(this.parentMenu.submenu=null,this.parentMenu=null)},highlight:function(t){if(this.submenu){if(!this.highlightedResult||this.highlightedResult.id!==t.id)return this._closeSubmenuTimeout&&clearTimeout(this._closeSubmenuTimeout),void(this._closeSubmenuTimeout=setTimeout(this._closeSubmenuAndHighlight.bind(this,t),100))}else this.parentMenu&&this.parentMenu._closeSubmenuTimeout&&(clearTimeout(this.parentMenu._closeSubmenuTimeout),this.parentMenu._closeSubmenuTimeout=0);this._doHighlight(t)},selectHighlight:function(){this.submenu?this.submenu.selectHighlight():r(this,"selectHighlight")},selectItem:function(t){var e=this.selectivity,i=s.findNestedById(e.results,t);if(i&&!i.submenu){var n={id:t,item:i};e.triggerEvent("selectivity-selecting",n)&&e.triggerEvent("selectivity-selected",n)}},showResults:function(t,e){this.submenu?this.submenu.showResults(t,e):r(this,"showResults",t,e)},triggerClose:function(){this.parentMenu?this.selectivity.$el.trigger("selectivity-close-submenu"):r(this,"triggerClose")},triggerOpen:function(){this.parentMenu?this.selectivity.$el.trigger("selectivity-open-submenu"):r(this,"triggerOpen")},_closeSubmenuAndHighlight:function(t){this.submenu&&this.submenu.close(),this._doHighlight(t)},_doHighlight:function(t){if(r(this,"highlight",t),t.submenu&&!this.submenu){var e=this.selectivity,i=e.options.dropdown||s.Dropdown;if(i){var n=s.quoteCssAttr(t.id),o=this.$(".selectivity-result-item[data-item-id="+n+"]"),l=this.$el;this.submenu=new i({parentMenu:this,position:t.submenu.positionDropdown||function(t){var e=o.offset(),i=l.width();t.css({left:e.left+i+"px",top:e.top+"px"}).width(i)},restoreOptions:{items:e.items,query:e.options.query||null},restoreResults:e.results,selectivity:e,showSearchInput:t.submenu.showSearchInput}),e.setOptions({items:t.submenu.items||null,query:t.submenu.query||null}),e.search("")}}}});s.Dropdown=i,s.findNestedById=function(t,e){for(var i=0,n=t.length;n>i;i++){var r,o=t[i];if(o.id===e?r=o:o.children?r=s.findNestedById(o.children,e):o.submenu&&o.submenu.items&&(r=s.findNestedById(o.submenu.items,e)),r)return r}return null},e.exports=i},{7:7,9:9}],16:[function(t){"use strict";var e=t(3),i=t(7);t(12),i.Templates={dropdown:function(t){var i=t.dropdownCssClass?" "+t.dropdownCssClass:"",s="";if(t.showSearchInput){i+=" has-search-input";var n=t.searchInputPlaceholder;s='<div class="selectivity-search-input-container"><input class="selectivity-search-input"'+(n?' placeholder="'+e(n)+'"':"")+"></div>"}return'<div class="selectivity-dropdown'+i+'">'+s+'<div class="selectivity-results-container"></div></div>'},error:function(t){return'<div class="selectivity-error">'+(t.escape?e(t.message):t.message)+"</div>"},loading:function(){return'<div class="selectivity-loading">'+i.Locale.loading+"</div>"},loadMore:function(){return'<div class="selectivity-load-more">'+i.Locale.loadMore+"</div>"},multipleSelectInput:function(t){return'<div class="selectivity-multiple-input-container">'+(t.enabled?'<input type="text" autocomplete="off" autocorrect="off" autocapitalize="off" class="selectivity-multiple-input"><span class="selectivity-multiple-input selectivity-width-detector"></span>':'<div class="selectivity-multiple-input selectivity-placeholder"></div>')+'<div class="selectivity-clearfix"></div></div>'},multipleSelectedItem:function(t){var i=t.highlighted?" highlighted":"";return'<span class="selectivity-multiple-selected-item'+i+'" data-item-id="'+e(t.id)+'">'+e(t.text)+(t.removable?'<a class="selectivity-multiple-selected-item-remove"><i class="fa fa-remove"></i></a>':"")+"</span>"},noResults:function(t){var e=i.Locale;return'<div class="selectivity-error">'+(t.term?e.noResultsForTerm(t.term):e.noResults)+"</div>"},resultChildren:function(t){return'<div class="selectivity-result-children">'+t.childrenHtml+"</div>"},resultItem:function(t){return'<div class="selectivity-result-item" data-item-id="'+e(t.id)+'">'+e(t.text)+(t.submenu?'<i class="selectivity-submenu-icon fa fa-chevron-right"></i>':"")+"</div>"},resultLabel:function(t){return'<div class="selectivity-result-label">'+e(t.text)+"</div>"},singleSelectInput:'<div class="selectivity-single-select"><div class="selectivity-single-result-container"></div><i class="fa fa-sort-desc selectivity-caret"></i></div>',singleSelectPlaceholder:function(t){return'<div class="selectivity-placeholder">'+e(t.placeholder)+"</div>"},singleSelectedItem:function(t){return'<span class="selectivity-single-selected-item" data-item-id="'+e(t.id)+'">'+(t.removable?'<a class="selectivity-single-selected-item-remove"><i class="fa fa-remove"></i></a>':"")+e(t.text)+"</span>"}}},{12:12,3:3,7:7}],17:[function(t){"use strict";function e(t,e,i,n){function r(t){return t?h.some(function(e){return t.indexOf(e)>-1}):!1}function o(t){for(var e=0,i=t.length;i>e;e++)if(h.indexOf(t[e])>-1)return{term:t.slice(0,e),input:t.slice(e+1)};return{}}for(var l=n.createTokenItem||function(t){return t?{id:t,text:t}:null},h=n.tokenSeparators;r(t);){var u=o(t);if(u.term){var a=l(u.term);a&&!s.findById(e,a.id)&&i(a)}t=u.input}return t}var i=window.jQuery||window.Zepto,s=t(7);s.OptionListeners.push(function(t,s){s.tokenSeparators&&(s.allowedTypes=i.extend({tokenSeparators:"array"},s.allowedTypes),s.tokenizer=s.tokenizer||e)})},{7:7,jquery:"jquery"}],18:[function(t){"use strict";function e(t,e){var s=e.multiple?[]:null,n=function(){var t=i(this);if(t.is("option")){var r=t.attr("value")||t.text();return t.prop("selected")&&(e.multiple?s.push(r):s=r),{id:r,text:t.attr("label")||t.text()}}return{text:t.attr("label"),children:t.children("option,optgroup").map(n).get()}};e.allowClear="allowClear"in e?e.allowClear:!t.prop("required"),e.items=t.children("option,optgroup").map(n).get(),e.placeholder=e.placeholder||t.data("placeholder")||"",e.value=s;var r=i("<div>").attr({"class":t.attr("class"),id:t.attr("id"),name:t.attr("name"),style:t.attr("style")});return t.replaceWith(r),r}var i=window.jQuery||window.Zepto,s=t(7);s.OptionListeners.push(function(t,i){var s=t.$el;s.is("select")&&(s.attr("autofocus")&&setTimeout(function(){t.focus()},1),t.$el=e(s,i),t.$el[0].selectivity=t)})},{7:7,jquery:"jquery"}]},{},[1])(1)});
/*! Quill Editor v0.19.10
 *  https://quilljs.com/
 *  Copyright (c) 2014, Jason Chen
 *  Copyright (c) 2013, salesforce.com
 */
!function(a){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=a();else if("function"==typeof define&&define.amd)define([],a);else{var b;b="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,b.Quill=a()}}(function(){var a;return function b(a,c,d){function e(g,h){if(!c[g]){if(!a[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};a[g][0].call(k.exports,function(b){var c=a[g][1][b];return e(c?c:b)},k,k.exports,b,a,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(b,c,d){(function(b){(function(){function e(a,b,c){if(b!==b)return h(a,c);for(var d=c-1,e=a.length;++d<e;)if(a[d]===b)return d;return-1}function f(a){return"function"==typeof a||!1}function g(a){return"string"==typeof a?a:null==a?"":a+""}function h(a,b,c){for(var d=a.length,e=b+(c?0:-1);c?e--:++e<d;){var f=a[e];if(f!==f)return e}return-1}function i(a){return a&&"object"==typeof a||!1}function j(a,b){for(var c=-1,d=a.length,e=-1,f=[];++c<d;)a[c]===b&&(a[c]=nb,f[++e]=c);return f}function k(){}function l(a){var b=a?a.length:0;for(this.data={hash:pc(null),set:new kc};b--;)this.push(a[b])}function m(a,b){var c=a.data,d="string"==typeof b||La(b)?c.set.has(b):c.hash[b];return d?0:-1}function n(a){var b=this.data;"string"==typeof a||La(a)?b.set.add(a):b.hash[a]=!0}function o(a,b){var c=-1,d=a.length;for(b||(b=Array(d));++c<d;)b[c]=a[c];return b}function p(a,b){for(var c=-1,d=a.length;++c<d&&b(a[c],c,a)!==!1;);return a}function q(a,b){for(var c=-1,d=a.length;++c<d;)if(!b(a[c],c,a))return!1;return!0}function r(a,b){for(var c=-1,d=a.length,e=Array(d);++c<d;)e[c]=b(a[c],c,a);return e}function s(a,b,c,d){var e=-1,f=a.length;for(d&&f&&(c=a[++e]);++e<f;)c=b(c,a[e],e,a);return c}function t(a,b){return"undefined"==typeof a?b:a}function u(a,b,c){var d=Lc(b);if(!c)return v(b,a,d);for(var e=-1,f=d.length;++e<f;){var g=d[e],h=a[g],i=c(h,b[g],g,a,b);(i===i?i===h:h!==h)&&("undefined"!=typeof h||g in a)||(a[g]=i)}return a}function v(a,b,c){c||(c=b,b={});for(var d=-1,e=c.length;++d<e;){var f=c[d];b[f]=a[f]}return b}function w(a,b,c){var d=typeof a;return"function"==d?"undefined"!=typeof b&&ja(a)?T(a,b,c):a:null==a?Xa:"object"==d?L(a):"undefined"==typeof b?N(a+""):M(a+"",b)}function x(a,b,c,d,e,f,g){var h;if(c&&(h=e?c(a,d,e):c(a)),"undefined"!=typeof h)return h;if(!La(a))return a;var i=Hc(a);if(i){if(h=ga(a),!b)return o(a,h)}else{var j=dc.call(a),k=j==tb;if(j!=wb&&j!=ob&&(!k||e))return Sb[j]?ia(a,j,b):e?a:{};if(h=ha(k?{}:a),!b)return v(a,h,Lc(a))}f||(f=[]),g||(g=[]);for(var l=f.length;l--;)if(f[l]==a)return g[l];return f.push(a),g.push(h),(i?p:F)(a,function(d,e){h[e]=x(d,b,c,e,a,f,g)}),h}function y(a,b,c,d){if("function"!=typeof a)throw new TypeError(mb);return setTimeout(function(){a.apply(_a,P(c,d))},b)}function z(a,b){var c=a?a.length:0,d=[];if(!c)return d;var f=-1,g=fa(),h=g==e,i=h&&b.length>=200?Dc(b):null,j=b.length;i&&(g=m,h=!1,b=i);a:for(;++f<c;){var k=a[f];if(h&&k===k){for(var l=j;l--;)if(b[l]===k)continue a;d.push(k)}else g(b,k,0)<0&&d.push(k)}return d}function A(a,b){var c=a?a.length:0;if(!ma(c))return F(a,b);for(var d=-1,e=ua(a);++d<c&&b(e[d],d,e)!==!1;);return a}function B(a,b){var c=!0;return A(a,function(a,d,e){return c=!!b(a,d,e)}),c}function C(a,b,c,d){for(var e=d-1,f=a.length,g=-1,h=[];++e<f;){var j=a[e];if(i(j)&&ma(j.length)&&(Hc(j)||Ia(j))){b&&(j=C(j,b,c,0));var k=-1,l=j.length;for(h.length+=l;++k<l;)h[++g]=j[k]}else c||(h[++g]=j)}return h}function D(a,b,c){for(var d=-1,e=ua(a),f=c(a),g=f.length;++d<g;){var h=f[d];if(b(e[h],h,e)===!1)break}return a}function E(a,b){return D(a,b,Ra)}function F(a,b){return D(a,b,Lc)}function G(a,b,c){var d=-1,e="function"==typeof b,f=a?a.length:0,g=ma(f)?Array(f):[];return A(a,function(a){var f=e?b:null!=a&&a[b];g[++d]=f?f.apply(a,c):_a}),g}function H(a,b,c,d,e,f){if(a===b)return 0!==a||1/a==1/b;var g=typeof a,h=typeof b;return"function"!=g&&"object"!=g&&"function"!=h&&"object"!=h||null==a||null==b?a!==a&&b!==b:I(a,b,H,c,d,e,f)}function I(a,b,c,d,e,f,g){var h=Hc(a),i=Hc(b),j=pb,k=pb;h||(j=dc.call(a),j==ob?j=wb:j!=wb&&(h=Pa(a))),i||(k=dc.call(b),k==ob?k=wb:k!=wb&&(i=Pa(b)));var l=j==wb,m=k==wb,n=j==k;if(n&&!h&&!l)return ca(a,b,j);var o=l&&bc.call(a,"__wrapped__"),p=m&&bc.call(b,"__wrapped__");if(o||p)return c(o?a.value():a,p?b.value():b,d,e,f,g);if(!n)return!1;f||(f=[]),g||(g=[]);for(var q=f.length;q--;)if(f[q]==a)return g[q]==b;f.push(a),g.push(b);var r=(h?ba:da)(a,b,c,d,e,f,g);return f.pop(),g.pop(),r}function J(a,b,c,d,e){var f=b.length;if(null==a)return!f;for(var g=-1,h=!e;++g<f;)if(h&&d[g]?c[g]!==a[b[g]]:!bc.call(a,b[g]))return!1;for(g=-1;++g<f;){var i=b[g];if(h&&d[g])var j=bc.call(a,i);else{var k=a[i],l=c[g];j=e?e(k,l,i):_a,"undefined"==typeof j&&(j=H(l,k,e,!0))}if(!j)return!1}return!0}function K(a,b){var c=[];return A(a,function(a,d,e){c.push(b(a,d,e))}),c}function L(a){var b=Lc(a),c=b.length;if(1==c){var d=b[0],e=a[d];if(na(e))return function(a){return null!=a&&a[d]===e&&bc.call(a,d)}}for(var f=Array(c),g=Array(c);c--;)e=a[b[c]],f[c]=e,g[c]=na(e);return function(a){return J(a,b,f,g)}}function M(a,b){return na(b)?function(c){return null!=c&&c[a]===b}:function(c){return null!=c&&H(b,c[a],null,!0)}}function N(a){return function(b){return null==b?_a:b[a]}}function O(a,b,c,d,e){return e(a,function(a,e,f){c=d?(d=!1,a):b(c,a,e,f)}),c}function P(a,b,c){var d=-1,e=a.length;b=null==b?0:+b||0,0>b&&(b=-b>e?0:e+b),c="undefined"==typeof c||c>e?e:+c||0,0>c&&(c+=e),e=b>c?0:c-b>>>0,b>>>=0;for(var f=Array(e);++d<e;)f[d]=a[d+b];return f}function Q(a,b){for(var c=-1,d=b.length,e=Array(d);++c<d;)e[c]=a[b[c]];return e}function R(a,b,c){var d=0,e=a?a.length:d;if("number"==typeof b&&b===b&&wc>=e){for(;e>d;){var f=d+e>>>1,g=a[f];(c?b>=g:b>g)?d=f+1:e=f}return e}return S(a,b,Xa,c)}function S(a,b,c,d){b=c(b);for(var e=0,f=a?a.length:0,g=b!==b,h="undefined"==typeof b;f>e;){var i=hc((e+f)/2),j=c(a[i]),k=j===j;if(g)var l=k||d;else l=h?k&&(d||"undefined"!=typeof j):d?b>=j:b>j;l?e=i+1:f=i}return sc(f,vc)}function T(a,b,c){if("function"!=typeof a)return Xa;if("undefined"==typeof b)return a;switch(c){case 1:return function(c){return a.call(b,c)};case 3:return function(c,d,e){return a.call(b,c,d,e)};case 4:return function(c,d,e,f){return a.call(b,c,d,e,f)};case 5:return function(c,d,e,f,g){return a.call(b,c,d,e,f,g)}}return function(){return a.apply(b,arguments)}}function U(a){return gc.call(a,0)}function V(a,b,c){for(var d=c.length,e=-1,f=rc(a.length-d,0),g=-1,h=b.length,i=Array(f+h);++g<h;)i[g]=b[g];for(;++e<d;)i[c[e]]=a[e];for(;f--;)i[g++]=a[e++];return i}function W(a,b,c){for(var d=-1,e=c.length,f=-1,g=rc(a.length-e,0),h=-1,i=b.length,j=Array(g+i);++f<g;)j[f]=a[f];for(var k=f;++h<i;)j[k+h]=b[h];for(;++d<e;)j[k+c[d]]=a[f++];return j}function X(a){return function(){var b=arguments,c=b.length,d=b[0];if(2>c||null==d)return d;var e=b[c-2],f=b[c-1],g=b[3];c>3&&"function"==typeof e?(e=T(e,f,5),c-=2):(e=c>2&&"function"==typeof f?f:null,c-=e?1:0),g&&la(b[1],b[2],g)&&(e=3==c?null:e,c=2);for(var h=0;++h<c;){var i=b[h];i&&a(d,i,e)}return d}}function Y(a,b){function c(){var e=this&&this!==Zb&&this instanceof c?d:a;return e.apply(b,arguments)}var d=Z(a);return c}function Z(a){return function(){var b=Bc(a.prototype),c=a.apply(b,arguments);return La(c)?c:b}}function $(a,b,c,d,e,f,g,h,i,k){function l(){for(var v=arguments.length,w=v,x=Array(v);w--;)x[w]=arguments[w];if(d&&(x=V(x,d,e)),f&&(x=W(x,f,g)),q||s){var y=l.placeholder,z=j(x,y);if(v-=z.length,k>v){var A=h?o(h):null,B=rc(k-v,0),C=q?z:null,D=q?null:z,E=q?x:null,F=q?null:x;b|=q?gb:hb,b&=~(q?hb:gb),r||(b&=~(bb|cb));var G=$(a,b,c,E,C,F,D,A,i,B);return G.placeholder=y,G}}var H=n?c:this;p&&(a=H[u]),h&&(x=ra(x,h)),m&&i<x.length&&(x.length=i);var I=this&&this!==Zb&&this instanceof l?t||Z(a):a;return I.apply(H,x)}var m=b&jb,n=b&bb,p=b&cb,q=b&eb,r=b&db,s=b&fb,t=!p&&Z(a),u=a;return l}function _(a,b,c,d){function e(){for(var b=-1,h=arguments.length,i=-1,j=d.length,k=Array(h+j);++i<j;)k[i]=d[i];for(;h--;)k[i++]=arguments[++b];var l=this&&this!==Zb&&this instanceof e?g:a;return l.apply(f?c:this,k)}var f=b&bb,g=Z(a);return e}function aa(a,b,c,d,e,f,g,h){var i=b&cb;if(!i&&"function"!=typeof a)throw new TypeError(mb);var j=d?d.length:0;if(j||(b&=~(gb|hb),d=e=null),j-=e?e.length:0,b&hb){var k=d,l=e;d=e=null}var m=!i&&Ec(a),n=[a,b,c,d,e,k,l,f,g,h];if(m&&m!==!0&&(oa(n,m),b=n[1],h=n[9]),n[9]=null==h?i?0:a.length:rc(h-j,0)||0,b==bb)var o=Y(n[0],n[2]);else o=b!=gb&&b!=(bb|gb)||n[4].length?$.apply(_a,n):_.apply(_a,n);var p=m?Cc:Fc;return p(o,n)}function ba(a,b,c,d,e,f,g){var h=-1,i=a.length,j=b.length,k=!0;if(i!=j&&!(e&&j>i))return!1;for(;k&&++h<i;){var l=a[h],m=b[h];if(k=_a,d&&(k=e?d(m,l,h):d(l,m,h)),"undefined"==typeof k)if(e)for(var n=j;n--&&(m=b[n],!(k=l&&l===m||c(l,m,d,e,f,g))););else k=l&&l===m||c(l,m,d,e,f,g)}return!!k}function ca(a,b,c){switch(c){case qb:case rb:return+a==+b;case sb:return a.name==b.name&&a.message==b.message;case vb:return a!=+a?b!=+b:0==a?1/a==1/b:a==+b;case xb:case zb:return a==b+""}return!1}function da(a,b,c,d,e,f,g){var h=Lc(a),i=h.length,j=Lc(b),k=j.length;if(i!=k&&!e)return!1;for(var l,m=-1;++m<i;){var n=h[m],o=bc.call(b,n);if(o){var p=a[n],q=b[n];o=_a,d&&(o=e?d(q,p,n):d(p,q,n)),"undefined"==typeof o&&(o=p&&p===q||c(p,q,d,e,f,g))}if(!o)return!1;l||(l="constructor"==n)}if(!l){var r=a.constructor,s=b.constructor;if(r!=s&&"constructor"in a&&"constructor"in b&&!("function"==typeof r&&r instanceof r&&"function"==typeof s&&s instanceof s))return!1}return!0}function ea(a,b,c){var d=k.callback||Va;return d=d===Va?w:d,c?d(a,b,c):d}function fa(a,b,c){var d=k.indexOf||wa;return d=d===wa?e:d,a?d(a,b,c):d}function ga(a){var b=a.length,c=new a.constructor(b);return b&&"string"==typeof a[0]&&bc.call(a,"index")&&(c.index=a.index,c.input=a.input),c}function ha(a){var b=a.constructor;return"function"==typeof b&&b instanceof b||(b=Object),new b}function ia(a,b,c){var d=a.constructor;switch(b){case Bb:return U(a);case qb:case rb:return new d(+a);case Cb:case Db:case Eb:case Fb:case Gb:case Hb:case Ib:case Jb:case Kb:var e=a.buffer;return new d(c?U(e):e,a.byteOffset,a.length);case vb:case zb:return new d(a);case xb:var f=new d(a.source,Lb.exec(a));f.lastIndex=a.lastIndex}return f}function ja(a){var b=k.support,c=!(b.funcNames?a.name:b.funcDecomp);if(!c){var d=ac.call(a);b.funcNames||(c=!Mb.test(d)),c||(c=Qb.test(d)||Ma(a),Cc(a,c))}return c}function ka(a,b){return a=+a,b=null==b?yc:b,a>-1&&a%1==0&&b>a}function la(a,b,c){if(!La(c))return!1;var d=typeof b;if("number"==d)var e=c.length,f=ma(e)&&ka(b,e);else f="string"==d&&b in c;if(f){var g=c[b];return a===a?a===g:g!==g}return!1}function ma(a){return"number"==typeof a&&a>-1&&a%1==0&&yc>=a}function na(a){return a===a&&(0===a?1/a>0:!La(a))}function oa(a,b){var c=a[1],d=b[1],e=c|d,f=jb|ib,g=bb|cb,h=f|g|db|fb,i=c&jb&&!(d&jb),k=c&ib&&!(d&ib),l=(k?a:b)[7],m=(i?a:b)[8],n=!(c>=ib&&d>g||c>g&&d>=ib),p=e>=f&&h>=e&&(ib>c||(k||i)&&l.length<=m);if(!n&&!p)return a;d&bb&&(a[2]=b[2],e|=c&bb?0:db);var q=b[3];if(q){var r=a[3];a[3]=r?V(r,q,b[4]):o(q),a[4]=r?j(a[3],nb):o(b[4])}return q=b[5],q&&(r=a[5],a[5]=r?W(r,q,b[6]):o(q),a[6]=r?j(a[5],nb):o(b[6])),q=b[7],q&&(a[7]=o(q)),d&jb&&(a[8]=null==a[8]?b[8]:sc(a[8],b[8])),null==a[9]&&(a[9]=b[9]),a[0]=b[0],a[1]=e,a}function pa(a,b){a=ua(a);for(var c=-1,d=b.length,e={};++c<d;){var f=b[c];f in a&&(e[f]=a[f])}return e}function qa(a,b){var c={};return E(a,function(a,d,e){b(a,d,e)&&(c[d]=a)}),c}function ra(a,b){for(var c=a.length,d=sc(b.length,c),e=o(a);d--;){var f=b[d];a[d]=ka(f,c)?e[f]:_a}return a}function sa(a){{var b;k.support}if(!i(a)||dc.call(a)!=wb||!bc.call(a,"constructor")&&(b=a.constructor,"function"==typeof b&&!(b instanceof b)))return!1;var c;return E(a,function(a,b){c=b}),"undefined"==typeof c||bc.call(a,c)}function ta(a){for(var b=Ra(a),c=b.length,d=c&&a.length,e=k.support,f=d&&ma(d)&&(Hc(a)||e.nonEnumArgs&&Ia(a)),g=-1,h=[];++g<c;){var i=b[g];(f&&ka(i,d)||bc.call(a,i))&&h.push(i)}return h}function ua(a){return La(a)?a:Object(a)}function va(){for(var a=arguments,b=-1,c=a.length;++b<c;){var d=a[b];if(Hc(d)||Ia(d))break}return z(d,C(a,!1,!0,++b))}function wa(a,b,c){var d=a?a.length:0;if(!d)return-1;if("number"==typeof c)c=0>c?rc(d+c,0):c;else if(c){var f=R(a,b),g=a[f];return(b===b?b===g:g!==g)?f:-1}return e(a,b,c||0)}function xa(){for(var a=[],b=-1,c=arguments.length,d=[],f=fa(),g=f==e;++b<c;){var h=arguments[b];(Hc(h)||Ia(h))&&(a.push(h),d.push(g&&h.length>=120?Dc(b&&h):null))}c=a.length;var i=a[0],j=-1,k=i?i.length:0,l=[],n=d[0];a:for(;++j<k;)if(h=i[j],(n?m(n,h):f(l,h,0))<0){for(b=c;--b;){var o=d[b];if((o?m(o,h):f(a[b],h,0))<0)continue a}n&&n.push(h),l.push(h)}return l}function ya(a){var b=a?a.length:0;return b?a[b-1]:_a}function za(a,b,c){var d=Hc(a)?q:B;return("function"!=typeof b||"undefined"!=typeof c)&&(b=ea(b,c,3)),d(a,b)}function Aa(a,b,c){return"function"==typeof b&&"undefined"==typeof c&&Hc(a)?p(a,b):A(a,T(b,c,3))}function Ba(a,b){return G(a,b,P(arguments,2))}function Ca(a,b,c){var d=Hc(a)?r:K;return b=ea(b,c,3),d(a,b)}function Da(a,b,c,d){var e=Hc(a)?s:O;return e(a,ea(b,d,4),c,arguments.length<3,A)}function Ea(a,b){var c=bb;if(arguments.length>2){var d=P(arguments,2),e=j(d,Ea.placeholder);c|=gb}return aa(a,c,b,d,e)}function Fa(a){return y(a,1,arguments,1)}function Ga(a){var b=P(arguments,1),c=j(b,Ga.placeholder);return aa(a,gb,null,b,c)}function Ha(a,b,c,d){return b&&"boolean"!=typeof b&&la(a,b,c)?b=!1:"function"==typeof b&&(d=c,c=b,b=!1),c="function"==typeof c&&T(c,d,1),x(a,b,c)}function Ia(a){var b=i(a)?a.length:_a;return ma(b)&&dc.call(a)==ob||!1}function Ja(a){return a&&1===a.nodeType&&i(a)&&dc.call(a).indexOf("Element")>-1||!1}function Ka(a,b,c,d){if(c="function"==typeof c&&T(c,d,3),!c&&na(a)&&na(b))return a===b;var e=c?c(a,b):_a;return"undefined"==typeof e?H(a,b,c):!!e}function La(a){var b=typeof a;return"function"==b||a&&"object"==b||!1}function Ma(a){return null==a?!1:dc.call(a)==tb?ec.test(ac.call(a)):i(a)&&Nb.test(a)||!1}function Na(a){return"number"==typeof a||i(a)&&dc.call(a)==vb||!1}function Oa(a){return"string"==typeof a||i(a)&&dc.call(a)==zb||!1}function Pa(a){return i(a)&&ma(a.length)&&Rb[dc.call(a)]||!1}function Qa(a){if(null==a)return a;var b=o(arguments);return b.push(t),Kc.apply(_a,b)}function Ra(a){if(null==a)return[];La(a)||(a=Object(a));var b=a.length;b=b&&ma(b)&&(Hc(a)||Ac.nonEnumArgs&&Ia(a))&&b||0;for(var c=a.constructor,d=-1,e="function"==typeof c&&c.prototype===a,f=Array(b),g=b>0;++d<b;)f[d]=d+"";for(var h in a)g&&ka(h,b)||"constructor"==h&&(e||!bc.call(a,h))||f.push(h);return f}function Sa(a,b,c){if(null==a)return{};if("function"!=typeof b){var d=r(C(arguments,!1,!1,1),String);return pa(a,z(Ra(a),d))}return b=T(b,c,3),qa(a,function(a,c,d){return!b(a,c,d)})}function Ta(a){return Q(a,Lc(a))}function Ua(a){return a=g(a),a&&Pb.test(a)?a.replace(Ob,"\\$&"):a}function Va(a,b,c){return c&&la(a,b,c)&&(b=null),i(a)?Ya(a):w(a,b)}function Wa(a){return function(){return a}}function Xa(a){return a}function Ya(a){return L(x(a,!0))}function Za(){}function $a(a){var b=++cc;return g(a)+b}var _a,ab="3.5.0",bb=1,cb=2,db=4,eb=8,fb=16,gb=32,hb=64,ib=128,jb=256,kb=150,lb=16,mb="Expected a function",nb="__lodash_placeholder__",ob="[object Arguments]",pb="[object Array]",qb="[object Boolean]",rb="[object Date]",sb="[object Error]",tb="[object Function]",ub="[object Map]",vb="[object Number]",wb="[object Object]",xb="[object RegExp]",yb="[object Set]",zb="[object String]",Ab="[object WeakMap]",Bb="[object ArrayBuffer]",Cb="[object Float32Array]",Db="[object Float64Array]",Eb="[object Int8Array]",Fb="[object Int16Array]",Gb="[object Int32Array]",Hb="[object Uint8Array]",Ib="[object Uint8ClampedArray]",Jb="[object Uint16Array]",Kb="[object Uint32Array]",Lb=/\w*$/,Mb=/^\s*function[ \n\r\t]+\w/,Nb=/^\[object .+?Constructor\]$/,Ob=/[.*+?^${}()|[\]\/\\]/g,Pb=RegExp(Ob.source),Qb=/\bthis\b/,Rb={};Rb[Cb]=Rb[Db]=Rb[Eb]=Rb[Fb]=Rb[Gb]=Rb[Hb]=Rb[Ib]=Rb[Jb]=Rb[Kb]=!0,Rb[ob]=Rb[pb]=Rb[Bb]=Rb[qb]=Rb[rb]=Rb[sb]=Rb[tb]=Rb[ub]=Rb[vb]=Rb[wb]=Rb[xb]=Rb[yb]=Rb[zb]=Rb[Ab]=!1;var Sb={};Sb[ob]=Sb[pb]=Sb[Bb]=Sb[qb]=Sb[rb]=Sb[Cb]=Sb[Db]=Sb[Eb]=Sb[Fb]=Sb[Gb]=Sb[vb]=Sb[wb]=Sb[xb]=Sb[zb]=Sb[Hb]=Sb[Ib]=Sb[Jb]=Sb[Kb]=!0,Sb[sb]=Sb[tb]=Sb[ub]=Sb[yb]=Sb[Ab]=!1;var Tb={"function":!0,object:!0},Ub=Tb[typeof d]&&d&&!d.nodeType&&d,Vb=Tb[typeof c]&&c&&!c.nodeType&&c,Wb=Ub&&Vb&&"object"==typeof b&&b,Xb=Tb[typeof window]&&window,Yb=Vb&&Vb.exports===Ub&&Ub,Zb=Wb||Xb!==(this&&this.window)&&Xb||this,$b=Object.prototype,_b=(_b=Zb.window)&&_b.document,ac=Function.prototype.toString,bc=$b.hasOwnProperty,cc=0,dc=$b.toString,ec=RegExp("^"+Ua(dc).replace(/toString|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),fc=Ma(fc=Zb.ArrayBuffer)&&fc,gc=Ma(gc=fc&&new fc(0).slice)&&gc,hc=Math.floor,ic=Ma(ic=Object.getPrototypeOf)&&ic,jc=$b.propertyIsEnumerable,kc=Ma(kc=Zb.Set)&&kc,lc=Ma(lc=Zb.Uint8Array)&&lc,mc=Ma(mc=Zb.WeakMap)&&mc,nc=function(){try{var a=Ma(a=Zb.Float64Array)&&a,b=new a(new fc(10),0,1)&&a}catch(c){}return b}(),oc=Ma(oc=Array.isArray)&&oc,pc=Ma(pc=Object.create)&&pc,qc=Ma(qc=Object.keys)&&qc,rc=Math.max,sc=Math.min,tc=Ma(tc=Date.now)&&tc,uc=Math.pow(2,32)-1,vc=uc-1,wc=uc>>>1,xc=nc?nc.BYTES_PER_ELEMENT:0,yc=Math.pow(2,53)-1,zc=mc&&new mc,Ac=k.support={};!function(){Ac.funcDecomp=!Ma(Zb.WinRTError)&&Qb.test(function(){return this}),Ac.funcNames="string"==typeof Function.name;try{Ac.dom=11===_b.createDocumentFragment().nodeType}catch(a){Ac.dom=!1}try{Ac.nonEnumArgs=!jc.call(arguments,1)}catch(a){Ac.nonEnumArgs=!0}}(0,0);var Bc=function(){function a(){}return function(b){if(La(b)){a.prototype=b;var c=new a;a.prototype=null}return c||Zb.Object()}}(),Cc=zc?function(a,b){return zc.set(a,b),a}:Xa;gc||(U=fc&&lc?function(a){var b=a.byteLength,c=nc?hc(b/xc):0,d=c*xc,e=new fc(b);if(c){var f=new nc(e,0,c);f.set(new nc(a,0,c))}return b!=d&&(f=new lc(e,d),f.set(new lc(a,d))),e}:Wa(null));var Dc=pc&&kc?function(a){return new l(a)}:Wa(null),Ec=zc?function(a){return zc.get(a)}:Za,Fc=function(){var a=0,b=0;return function(c,d){var e=Gc(),f=lb-(e-b);if(b=e,f>0){if(++a>=kb)return c}else a=0;return Cc(c,d)}}(),Gc=tc||function(){return(new Date).getTime()},Hc=oc||function(a){return i(a)&&ma(a.length)&&dc.call(a)==pb||!1};Ac.dom||(Ja=function(a){return a&&1===a.nodeType&&i(a)&&!Jc(a)||!1});var Ic=f(/x/)||lc&&!f(lc)?function(a){return dc.call(a)==tb}:f,Jc=ic?function(a){if(!a||dc.call(a)!=wb)return!1;var b=a.valueOf,c=Ma(b)&&(c=ic(b))&&ic(c);return c?a==c||ic(a)==c:sa(a)}:sa,Kc=X(u),Lc=qc?function(a){if(a)var b=a.constructor,c=a.length;return"function"==typeof b&&b.prototype===a||"function"!=typeof a&&c&&ma(c)?ta(a):La(a)?qc(a):[]}:ta;l.prototype.push=n,k.assign=Kc,k.bind=Ea,k.callback=Va,k.constant=Wa,k.defaults=Qa,k.defer=Fa,k.difference=va,k.forEach=Aa,k.intersection=xa,k.invoke=Ba,k.keys=Lc,k.keysIn=Ra,k.map=Ca,k.matches=Ya,k.omit=Sa,k.partial=Ga,k.values=Ta,k.collect=Ca,k.each=Aa,k.extend=Kc,k.iteratee=Va,k.clone=Ha,k.escapeRegExp=Ua,k.every=za,k.identity=Xa,k.indexOf=wa,k.isArguments=Ia,k.isArray=Hc,k.isElement=Ja,k.isEqual=Ka,k.isFunction=Ic,k.isNative=Ma,k.isNumber=Na,k.isObject=La,k.isPlainObject=Jc,k.isString=Oa,k.isTypedArray=Pa,k.last=ya,k.noop=Za,k.now=Gc,k.reduce=Da,k.uniqueId=$a,k.all=za,k.foldl=Da,k.inject=Da,k.VERSION=ab,p(["bind","partial"],function(a){k[a].placeholder=k}),"function"==typeof a&&"object"==typeof a.amd&&a.amd?(Zb._=k,a(function(){return k})):Ub&&Vb?Yb?(Vb.exports=k)._=k:Ub._=k:Zb._=k}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(b,c,d){!function(){function b(){this._events={},this._conf&&c.call(this,this._conf)}function c(a){a&&(this._conf=a,a.delimiter&&(this.delimiter=a.delimiter),a.maxListeners&&(this._events.maxListeners=a.maxListeners),a.wildcard&&(this.wildcard=a.wildcard),a.newListener&&(this.newListener=a.newListener),this.wildcard&&(this.listenerTree={}))}function e(a){this._events={},this.newListener=!1,c.call(this,a)}function f(a,b,c,d){if(!c)return[];var e,g,h,i,j,k,l,m=[],n=b.length,o=b[d],p=b[d+1];if(d===n&&c._listeners){if("function"==typeof c._listeners)return a&&a.push(c._listeners),[c];for(e=0,g=c._listeners.length;g>e;e++)a&&a.push(c._listeners[e]);return[c]}if("*"===o||"**"===o||c[o]){if("*"===o){for(h in c)"_listeners"!==h&&c.hasOwnProperty(h)&&(m=m.concat(f(a,b,c[h],d+1)));return m}if("**"===o){l=d+1===n||d+2===n&&"*"===p,l&&c._listeners&&(m=m.concat(f(a,b,c,n)));for(h in c)"_listeners"!==h&&c.hasOwnProperty(h)&&("*"===h||"**"===h?(c[h]._listeners&&!l&&(m=m.concat(f(a,b,c[h],n))),m=m.concat(f(a,b,c[h],d))):m=m.concat(h===p?f(a,b,c[h],d+2):f(a,b,c[h],d)));return m}m=m.concat(f(a,b,c[o],d+1))}if(i=c["*"],i&&f(a,b,i,d+1),j=c["**"])if(n>d){j._listeners&&f(a,b,j,n);for(h in j)"_listeners"!==h&&j.hasOwnProperty(h)&&(h===p?f(a,b,j[h],d+2):h===o?f(a,b,j[h],d+1):(k={},k[h]=j[h],f(a,b,{"**":k},d+1)))}else j._listeners?f(a,b,j,n):j["*"]&&j["*"]._listeners&&f(a,b,j["*"],n);return m}function g(a,b){a="string"==typeof a?a.split(this.delimiter):a.slice();for(var c=0,d=a.length;d>c+1;c++)if("**"===a[c]&&"**"===a[c+1])return;for(var e=this.listenerTree,f=a.shift();f;){if(e[f]||(e[f]={}),e=e[f],0===a.length){if(e._listeners){if("function"==typeof e._listeners)e._listeners=[e._listeners,b];else if(h(e._listeners)&&(e._listeners.push(b),!e._listeners.warned)){var g=i;"undefined"!=typeof this._events.maxListeners&&(g=this._events.maxListeners),g>0&&e._listeners.length>g&&(e._listeners.warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",e._listeners.length),console.trace())}}else e._listeners=b;return!0}f=a.shift()}return!0}var h=Array.isArray?Array.isArray:function(a){return"[object Array]"===Object.prototype.toString.call(a)},i=10;e.prototype.delimiter=".",e.prototype.setMaxListeners=function(a){this._events||b.call(this),this._events.maxListeners=a,this._conf||(this._conf={}),this._conf.maxListeners=a},e.prototype.event="",e.prototype.once=function(a,b){return this.many(a,1,b),this},e.prototype.many=function(a,b,c){function d(){0===--b&&e.off(a,d),c.apply(this,arguments)}var e=this;if("function"!=typeof c)throw new Error("many only accepts instances of Function");return d._origin=c,this.on(a,d),e},e.prototype.emit=function(){this._events||b.call(this);var a=arguments[0];if("newListener"===a&&!this.newListener&&!this._events.newListener)return!1;if(this._all){for(var c=arguments.length,d=new Array(c-1),e=1;c>e;e++)d[e-1]=arguments[e];for(e=0,c=this._all.length;c>e;e++)this.event=a,this._all[e].apply(this,d)}if("error"===a&&!(this._all||this._events.error||this.wildcard&&this.listenerTree.error))throw arguments[1]instanceof Error?arguments[1]:new Error("Uncaught, unspecified 'error' event.");var g;if(this.wildcard){g=[];var h="string"==typeof a?a.split(this.delimiter):a.slice();f.call(this,g,h,this.listenerTree,0)}else g=this._events[a];if("function"==typeof g){if(this.event=a,1===arguments.length)g.call(this);else if(arguments.length>1)switch(arguments.length){case 2:g.call(this,arguments[1]);break;case 3:g.call(this,arguments[1],arguments[2]);break;default:for(var c=arguments.length,d=new Array(c-1),e=1;c>e;e++)d[e-1]=arguments[e];g.apply(this,d)}return!0}if(g){for(var c=arguments.length,d=new Array(c-1),e=1;c>e;e++)d[e-1]=arguments[e];for(var i=g.slice(),e=0,c=i.length;c>e;e++)this.event=a,i[e].apply(this,d);return i.length>0||!!this._all}return!!this._all},e.prototype.on=function(a,c){if("function"==typeof a)return this.onAny(a),this;if("function"!=typeof c)throw new Error("on only accepts instances of Function");if(this._events||b.call(this),this.emit("newListener",a,c),this.wildcard)return g.call(this,a,c),this;if(this._events[a]){if("function"==typeof this._events[a])this._events[a]=[this._events[a],c];else if(h(this._events[a])&&(this._events[a].push(c),!this._events[a].warned)){var d=i;"undefined"!=typeof this._events.maxListeners&&(d=this._events.maxListeners),d>0&&this._events[a].length>d&&(this._events[a].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[a].length),console.trace())}}else this._events[a]=c;return this},e.prototype.onAny=function(a){if("function"!=typeof a)throw new Error("onAny only accepts instances of Function");return this._all||(this._all=[]),this._all.push(a),this},e.prototype.addListener=e.prototype.on,e.prototype.off=function(a,b){if("function"!=typeof b)throw new Error("removeListener only takes instances of Function");var c,d=[];if(this.wildcard){var e="string"==typeof a?a.split(this.delimiter):a.slice();d=f.call(this,null,e,this.listenerTree,0)}else{if(!this._events[a])return this;c=this._events[a],d.push({_listeners:c})}for(var g=0;g<d.length;g++){var i=d[g];if(c=i._listeners,h(c)){for(var j=-1,k=0,l=c.length;l>k;k++)if(c[k]===b||c[k].listener&&c[k].listener===b||c[k]._origin&&c[k]._origin===b){j=k;break}if(0>j)continue;return this.wildcard?i._listeners.splice(j,1):this._events[a].splice(j,1),0===c.length&&(this.wildcard?delete i._listeners:delete this._events[a]),this}(c===b||c.listener&&c.listener===b||c._origin&&c._origin===b)&&(this.wildcard?delete i._listeners:delete this._events[a])}return this},e.prototype.offAny=function(a){var b,c=0,d=0;if(a&&this._all&&this._all.length>0){for(b=this._all,c=0,d=b.length;d>c;c++)if(a===b[c])return b.splice(c,1),this}else this._all=[];return this},e.prototype.removeListener=e.prototype.off,e.prototype.removeAllListeners=function(a){if(0===arguments.length)return!this._events||b.call(this),this;if(this.wildcard)for(var c="string"==typeof a?a.split(this.delimiter):a.slice(),d=f.call(this,null,c,this.listenerTree,0),e=0;e<d.length;e++){var g=d[e];g._listeners=null}else{if(!this._events[a])return this;this._events[a]=null}return this},e.prototype.listeners=function(a){if(this.wildcard){var c=[],d="string"==typeof a?a.split(this.delimiter):a.slice();return f.call(this,c,d,this.listenerTree,0),c}return this._events||b.call(this),this._events[a]||(this._events[a]=[]),h(this._events[a])||(this._events[a]=[this._events[a]]),this._events[a]},e.prototype.listenersAny=function(){return this._all?this._all:[]},"function"==typeof a&&a.amd?a(function(){return e}):"object"==typeof d?d.EventEmitter2=e:window.EventEmitter2=e}()},{}],3:[function(a,b){var c=a("fast-diff"),d=a("./is"),e=a("./op"),f=String.fromCharCode(0),g=function(a){this.ops=d.array(a)?a:d.object(a)&&d.array(a.ops)?a.ops:[]};g.prototype.insert=function(a,b){var c={};if(d.string(a)){if(0===a.length)return this;c.insert=a}else d.number(a)&&(c.insert=a);return d.object(b)&&Object.keys(b).length>0&&(c.attributes=b),this.push(c)},g.prototype["delete"]=function(a){return 0>=a?this:this.push({"delete":a})},g.prototype.retain=function(a,b){if(0>=a)return this;var c={retain:a};return d.object(b)&&Object.keys(b).length>0&&(c.attributes=b),this.push(c)},g.prototype.push=function(a){var b=this.ops.length,c=this.ops[b-1];if(a=e.clone(a),d.object(c)){if(d.number(a["delete"])&&d.number(c["delete"]))return this.ops[b-1]={"delete":c["delete"]+a["delete"]},this;if(d.number(c["delete"])&&(d.string(a.insert)||d.number(a.insert))&&(b-=1,c=this.ops[b-1],!d.object(c)))return this.ops.unshift(a),this;if(d.equal(a.attributes,c.attributes)){if(d.string(a.insert)&&d.string(c.insert))return this.ops[b-1]={insert:c.insert+a.insert},d.object(a.attributes)&&(this.ops[b-1].attributes=a.attributes),this;if(d.number(a.retain)&&d.number(c.retain))return this.ops[b-1]={retain:c.retain+a.retain},d.object(a.attributes)&&(this.ops[b-1].attributes=a.attributes),this}}return this.ops.splice(b,0,a),this},g.prototype.chop=function(){var a=this.ops[this.ops.length-1];return a&&a.retain&&!a.attributes&&this.ops.pop(),this},g.prototype.length=function(){return this.ops.reduce(function(a,b){return a+e.length(b)},0)},g.prototype.slice=function(a,b){a=a||0,d.number(b)||(b=1/0);for(var c=new g,f=e.iterator(this.ops),h=0;b>h&&f.hasNext();){var i;a>h?i=f.next(a-h):(i=f.next(b-h),c.push(i)),h+=e.length(i)}return c},g.prototype.compose=function(a){var b=e.iterator(this.ops),c=e.iterator(a.ops);for(this.ops=[];b.hasNext()||c.hasNext();)if("insert"===c.peekType())this.push(c.next());else if("delete"===b.peekType())this.push(b.next());else{var f=Math.min(b.peekLength(),c.peekLength()),g=b.next(f),h=c.next(f);if(d.number(h.retain)){var i={};d.number(g.retain)?i.retain=f:i.insert=g.insert;var j=e.attributes.compose(g.attributes,h.attributes,d.number(g.retain));j&&(i.attributes=j),this.push(i)}else d.number(h["delete"])&&d.number(g.retain)&&this.push(h)}return this.chop()},g.prototype.diff=function(a){var b=[this.ops,a.ops].map(function(b){return b.map(function(c){if(d.string(c.insert))return c.insert;if(d.number(c.insert))return f;var e=b===a.ops?"on":"with";throw new Error("diff() called "+e+" non-document")}).join("")}),h=c(b[0],b[1]),i=e.iterator(this.ops),j=e.iterator(a.ops),k=new g;return h.forEach(function(a){for(var b=a[1].length;b>0;){var d=0;switch(a[0]){case c.INSERT:d=Math.min(j.peekLength(),b),k.push(j.next(d));break;case c.DELETE:d=Math.min(b,i.peekLength()),i.next(d),k["delete"](d);break;case c.EQUAL:d=Math.min(i.peekLength(),j.peekLength(),b);var f=i.next(d),g=j.next(d);f.insert===g.insert?k.retain(d,e.attributes.diff(f.attributes,g.attributes)):k.push(g)["delete"](d)}b-=d}}),k.chop()},g.prototype.transform=function(a,b){if(b=!!b,d.number(a))return this.transformPosition(a,b);for(var c=e.iterator(this.ops),f=e.iterator(a.ops),h=new g;c.hasNext()||f.hasNext();)if("insert"!==c.peekType()||!b&&"insert"===f.peekType())if("insert"===f.peekType())h.push(f.next());else{var i=Math.min(c.peekLength(),f.peekLength()),j=c.next(i),k=f.next(i);if(j["delete"])continue;k["delete"]?h.push(k):h.retain(i,e.attributes.transform(j.attributes,k.attributes,b))}else h.retain(e.length(c.next()));return h.chop()},g.prototype.transformPosition=function(a,b){b=!!b;for(var c=e.iterator(this.ops),d=0;c.hasNext()&&a>=d;){var f=c.peekLength(),g=c.peekType();c.next(),"delete"!==g?("insert"===g&&(a>d||!b)&&(a+=f),d+=f):a-=Math.min(f,a-d)}return a},b.exports=g},{"./is":4,"./op":5,"fast-diff":6}],4:[function(a,b){b.exports={equal:function(a,b){if(a===b)return!0;if(null==a&&null==b)return!0;if(null==a||null==b)return!1;if(Object.keys(a).length!=Object.keys(b).length)return!1;for(var c in a)if(a[c]!==b[c])return!1;return!0},array:function(a){return Array.isArray(a)},number:function(a){return"number"==typeof a?!0:"object"==typeof a&&"[object Number]"===Object.prototype.toString.call(a)?!0:!1},object:function(a){return a?"function"==typeof a||"object"==typeof a:!1},string:function(a){return"string"==typeof a?!0:"object"==typeof a&&"[object String]"===Object.prototype.toString.call(a)?!0:!1}}},{}],5:[function(a,b){function c(a){this.ops=a,this.index=0,this.offset=0}var d=a("./is"),e={attributes:{clone:function(a,b){return d.object(a)?Object.keys(a).reduce(function(c,d){return void 0===a[d]||null===a[d]&&!b||(c[d]=a[d]),c},{}):{}},compose:function(a,b,c){d.object(a)||(a={}),d.object(b)||(b={});var e=this.clone(b,c);for(var f in a)void 0!==a[f]&&void 0===b[f]&&(e[f]=a[f]);return Object.keys(e).length>0?e:void 0},diff:function(a,b){d.object(a)||(a={}),d.object(b)||(b={});var c=Object.keys(a).concat(Object.keys(b)).reduce(function(c,d){return a[d]!==b[d]&&(c[d]=void 0===b[d]?null:b[d]),c},{});return Object.keys(c).length>0?c:void 0},transform:function(a,b,c){if(!d.object(a))return b;if(!d.object(b))return void 0;if(!c)return b;var e=Object.keys(b).reduce(function(c,d){return void 0===a[d]&&(c[d]=b[d]),c},{});return Object.keys(e).length>0?e:void 0}},clone:function(a){var b=this.attributes.clone(a);return d.object(b.attributes)&&(b.attributes=this.attributes.clone(b.attributes,!0)),b},iterator:function(a){return new c(a)},length:function(a){return d.number(a["delete"])?a["delete"]:d.number(a.retain)?a.retain:d.string(a.insert)?a.insert.length:1;

}};c.prototype.hasNext=function(){return this.peekLength()<1/0},c.prototype.next=function(a){a||(a=1/0);var b=this.ops[this.index];if(b){var c=this.offset,f=e.length(b);if(a>=f-c?(a=f-c,this.index+=1,this.offset=0):this.offset+=a,d.number(b["delete"]))return{"delete":a};var g={};return b.attributes&&(g.attributes=b.attributes),d.number(b.retain)?g.retain=a:g.insert=d.string(b.insert)?b.insert.substr(c,a):b.insert,g}return{retain:1/0}},c.prototype.peekLength=function(){return this.ops[this.index]?e.length(this.ops[this.index])-this.offset:1/0},c.prototype.peekType=function(){return this.ops[this.index]?d.number(this.ops[this.index]["delete"])?"delete":d.number(this.ops[this.index].retain)?"retain":"insert":"retain"},b.exports=e},{"./is":4}],6:[function(a,b){function c(a,b){if(a==b)return a?[[m,a]]:[];var c=g(a,b),e=a.substring(0,c);a=a.substring(c),b=b.substring(c),c=h(a,b);var f=a.substring(a.length-c);a=a.substring(0,a.length-c),b=b.substring(0,b.length-c);var i=d(a,b);return e&&i.unshift([m,e]),f&&i.push([m,f]),j(i),i}function d(a,b){var d;if(!a)return[[l,b]];if(!b)return[[k,a]];var f=a.length>b.length?a:b,g=a.length>b.length?b:a,h=f.indexOf(g);if(-1!=h)return d=[[l,f.substring(0,h)],[m,g],[l,f.substring(h+g.length)]],a.length>b.length&&(d[0][0]=d[2][0]=k),d;if(1==g.length)return[[k,a],[l,b]];var j=i(a,b);if(j){var n=j[0],o=j[1],p=j[2],q=j[3],r=j[4],s=c(n,p),t=c(o,q);return s.concat([[m,r]],t)}return e(a,b)}function e(a,b){for(var c=a.length,d=b.length,e=Math.ceil((c+d)/2),g=e,h=2*e,i=new Array(h),j=new Array(h),m=0;h>m;m++)i[m]=-1,j[m]=-1;i[g+1]=0,j[g+1]=0;for(var n=c-d,o=n%2!=0,p=0,q=0,r=0,s=0,t=0;e>t;t++){for(var u=-t+p;t-q>=u;u+=2){var v,w=g+u;v=u==-t||u!=t&&i[w-1]<i[w+1]?i[w+1]:i[w-1]+1;for(var x=v-u;c>v&&d>x&&a.charAt(v)==b.charAt(x);)v++,x++;if(i[w]=v,v>c)q+=2;else if(x>d)p+=2;else if(o){var y=g+n-u;if(y>=0&&h>y&&-1!=j[y]){var z=c-j[y];if(v>=z)return f(a,b,v,x)}}}for(var A=-t+r;t-s>=A;A+=2){var z,y=g+A;z=A==-t||A!=t&&j[y-1]<j[y+1]?j[y+1]:j[y-1]+1;for(var B=z-A;c>z&&d>B&&a.charAt(c-z-1)==b.charAt(d-B-1);)z++,B++;if(j[y]=z,z>c)s+=2;else if(B>d)r+=2;else if(!o){var w=g+n-A;if(w>=0&&h>w&&-1!=i[w]){var v=i[w],x=g+v-w;if(z=c-z,v>=z)return f(a,b,v,x)}}}}return[[k,a],[l,b]]}function f(a,b,d,e){var f=a.substring(0,d),g=b.substring(0,e),h=a.substring(d),i=b.substring(e),j=c(f,g),k=c(h,i);return j.concat(k)}function g(a,b){if(!a||!b||a.charAt(0)!=b.charAt(0))return 0;for(var c=0,d=Math.min(a.length,b.length),e=d,f=0;e>c;)a.substring(f,e)==b.substring(f,e)?(c=e,f=c):d=e,e=Math.floor((d-c)/2+c);return e}function h(a,b){if(!a||!b||a.charAt(a.length-1)!=b.charAt(b.length-1))return 0;for(var c=0,d=Math.min(a.length,b.length),e=d,f=0;e>c;)a.substring(a.length-e,a.length-f)==b.substring(b.length-e,b.length-f)?(c=e,f=c):d=e,e=Math.floor((d-c)/2+c);return e}function i(a,b){function c(a,b,c){for(var d,e,f,i,j=a.substring(c,c+Math.floor(a.length/4)),k=-1,l="";-1!=(k=b.indexOf(j,k+1));){var m=g(a.substring(c),b.substring(k)),n=h(a.substring(0,c),b.substring(0,k));l.length<n+m&&(l=b.substring(k-n,k)+b.substring(k,k+m),d=a.substring(0,c-n),e=a.substring(c+m),f=b.substring(0,k-n),i=b.substring(k+m))}return 2*l.length>=a.length?[d,e,f,i,l]:null}var d=a.length>b.length?a:b,e=a.length>b.length?b:a;if(d.length<4||2*e.length<d.length)return null;var f,i=c(d,e,Math.ceil(d.length/4)),j=c(d,e,Math.ceil(d.length/2));if(!i&&!j)return null;f=j?i&&i[4].length>j[4].length?i:j:i;var k,l,m,n;a.length>b.length?(k=f[0],l=f[1],m=f[2],n=f[3]):(m=f[0],n=f[1],k=f[2],l=f[3]);var o=f[4];return[k,l,m,n,o]}function j(a){a.push([m,""]);for(var b,c=0,d=0,e=0,f="",i="";c<a.length;)switch(a[c][0]){case l:e++,i+=a[c][1],c++;break;case k:d++,f+=a[c][1],c++;break;case m:d+e>1?(0!==d&&0!==e&&(b=g(i,f),0!==b&&(c-d-e>0&&a[c-d-e-1][0]==m?a[c-d-e-1][1]+=i.substring(0,b):(a.splice(0,0,[m,i.substring(0,b)]),c++),i=i.substring(b),f=f.substring(b)),b=h(i,f),0!==b&&(a[c][1]=i.substring(i.length-b)+a[c][1],i=i.substring(0,i.length-b),f=f.substring(0,f.length-b))),0===d?a.splice(c-e,d+e,[l,i]):0===e?a.splice(c-d,d+e,[k,f]):a.splice(c-d-e,d+e,[k,f],[l,i]),c=c-d-e+(d?1:0)+(e?1:0)+1):0!==c&&a[c-1][0]==m?(a[c-1][1]+=a[c][1],a.splice(c,1)):c++,e=0,d=0,f="",i=""}""===a[a.length-1][1]&&a.pop();var n=!1;for(c=1;c<a.length-1;)a[c-1][0]==m&&a[c+1][0]==m&&(a[c][1].substring(a[c][1].length-a[c-1][1].length)==a[c-1][1]?(a[c][1]=a[c-1][1]+a[c][1].substring(0,a[c][1].length-a[c-1][1].length),a[c+1][1]=a[c-1][1]+a[c+1][1],a.splice(c-1,1),n=!0):a[c][1].substring(0,a[c+1][1].length)==a[c+1][1]&&(a[c-1][1]+=a[c+1][1],a[c][1]=a[c][1].substring(a[c+1][1].length)+a[c+1][1],a.splice(c+1,1),n=!0)),c++;n&&j(a)}var k=-1,l=1,m=0,n=c;n.INSERT=l,n.DELETE=k,n.EQUAL=m,b.exports=n},{}],7:[function(a,b){b.exports={version:"0.19.10"}},{}],8:[function(a,b){var c,d,e,f,g,h,i,j;i=a("lodash"),c=a("rich-text/lib/delta"),j=a("../lib/dom"),e=a("./format"),f=a("./line"),g=a("../lib/linked-list"),h=a("./normalizer"),d=function(){function a(a,b){this.root=a,null==b&&(b={}),this.normalizer=new h,this.formats={},i.each(b.formats,i.bind(this.addFormat,this)),this.setHTML(this.root.innerHTML)}return a.prototype.addFormat=function(a,b){return i.isObject(b)||(b=e.FORMATS[a]),null!=this.formats[a]&&console.warn("Overwriting format",a,this.formats[a]),this.formats[a]=new e(b),this.normalizer.addFormat(b)},a.prototype.appendLine=function(a){return this.insertLineBefore(a,null)},a.prototype.findLeafAt=function(a,b){var c,d,e;return e=this.findLineAt(a),c=e[0],d=e[1],null!=c?c.findLeafAt(d,b):[null,d]},a.prototype.findLine=function(a){for(var b;null!=a&&null==j.BLOCK_TAGS[a.tagName];)a=a.parentNode;return b=null!=a?this.lineMap[a.id]:null,(null!=b?b.node:void 0)===a?b:null},a.prototype.findLineAt=function(a){var b,c;if(!(this.lines.length>0))return[null,a];if(c=this.toDelta().length(),a===c)return[this.lines.last,this.lines.last.length];if(a>c)return[null,a-c];for(b=this.lines.first;null!=b;){if(a<b.length)return[b,a];a-=b.length,b=b.next}return[null,a]},a.prototype.getHTML=function(){var a,b;return b=this.root.innerHTML,b=b.replace(/\>\s+\</g,">&nbsp;<"),a=document.createElement("div"),a.innerHTML=b,i.each(a.querySelectorAll("."+f.CLASS_NAME),function(a){return j(a).removeClass(f.CLASS_NAME),a.removeAttribute("id")}),a.innerHTML},a.prototype.insertLineBefore=function(a,b){var c;return c=new f(this,a),null!=b?(j(a.parentNode).isElement()||this.root.insertBefore(a,b.node),this.lines.insertAfter(b.prev,c)):(j(a.parentNode).isElement()||this.root.appendChild(a),this.lines.append(c)),this.lineMap[c.id]=c,c},a.prototype.mergeLines=function(a,b){return b.length>1&&(1===a.length&&j(a.leaves.last.node).remove(),i.each(j(b.node).childNodes(),function(b){return b.tagName!==j.DEFAULT_BREAK_TAG?a.node.appendChild(b):void 0})),this.removeLine(b),a.rebuild()},a.prototype.optimizeLines=function(){return i.each(this.lines.toArray(),function(a){return a.optimize(),!0})},a.prototype.rebuild=function(){var a,b,c;for(b=this.lines.toArray(),a=this.root.firstChild,null!=a&&null!=j.LIST_TAGS[a.tagName]&&(a=a.firstChild),i.each(b,function(b){return function(c){for(var d,e;c.node!==a;){if(c.node.parentNode!==b.root&&(null!=(e=c.node.parentNode)?e.parentNode:void 0)!==b.root)return b.removeLine(c);a=b.normalizer.normalizeLine(a),d=b.insertLineBefore(a,c),a=j(a).nextLineNode(b.root)}return c.outerHTML!==a.outerHTML&&(c.node=b.normalizer.normalizeLine(c.node),c.rebuild()),a=j(a).nextLineNode(b.root)}}(this)),c=[];null!=a;)a=this.normalizer.normalizeLine(a),this.appendLine(a),c.push(a=j(a).nextLineNode(this.root));return c},a.prototype.removeLine=function(a){return null!=a.node.parentNode&&(j.LIST_TAGS[a.node.parentNode.tagName]&&1===a.node.parentNode.childNodes.length?j(a.node.parentNode).remove():j(a.node).remove()),delete this.lineMap[a.id],this.lines.remove(a)},a.prototype.setHTML=function(a){return a=h.stripComments(a),a=h.stripWhitespace(a),this.root.innerHTML=a,this.lines=new g,this.lineMap={},this.rebuild()},a.prototype.splitLine=function(a,b){var c,d,e,f;return b=Math.min(b,a.length-1),f=j(a.node).split(b,!0),c=f[0],d=f[1],a.node=c,a.rebuild(),e=this.insertLineBefore(d,a.next),e.formats=i.clone(a.formats),e.resetContent(),e},a.prototype.toDelta=function(){var a,b;return b=this.lines.toArray(),a=new c,i.each(b,function(b){return i.each(b.delta.ops,function(b){return a.push(b)})}),a},a}(),b.exports=d},{"../lib/dom":17,"../lib/linked-list":18,"./format":10,"./line":12,"./normalizer":13,lodash:1,"rich-text/lib/delta":3}],9:[function(a,b){var c,d,e,f,g,h;g=a("lodash"),h=a("../lib/dom"),c=a("./document"),e=a("./line"),f=a("./selection"),d=function(){function a(a,b,d){this.root=a,this.quill=b,this.options=null!=d?d:{},this.root.setAttribute("id",this.options.id),this.doc=new c(this.root,this.options),this.delta=this.doc.toDelta(),this.length=this.delta.length(),this.selection=new f(this.doc,this.quill),this.timer=setInterval(g.bind(this.checkUpdate,this),this.options.pollInterval),this.options.readOnly||this.enable()}return a.sources={API:"api",SILENT:"silent",USER:"user"},a.prototype.destroy=function(){return clearInterval(this.timer)},a.prototype.disable=function(){return this.enable(!1)},a.prototype.enable=function(a){return null==a&&(a=!0),this.root.setAttribute("contenteditable",a)},a.prototype.applyDelta=function(b,c){var d;return d=this._update(),d&&(b=d.transform(b,!0),d=b.transform(d,!1)),b.ops.length>0&&(b=this._trackDelta(function(a){return function(){var c;return c=0,g.each(b.ops,function(b){return g.isString(b.insert)?(a._insertAt(c,b.insert,b.attributes),c+=b.insert.length):g.isNumber(b.insert)?(a._insertAt(c,h.EMBED_TEXT,b.attributes),c+=1):g.isNumber(b["delete"])?a._deleteAt(c,b["delete"]):g.isNumber(b.retain)?(g.each(b.attributes,function(d,e){return a._formatAt(c,b.retain,e,d)}),c+=b.retain):void 0}),a.selection.shiftAfter(0,0,g.bind(a.doc.optimizeLines,a.doc))}}(this)),this.delta=this.doc.toDelta(),this.length=this.delta.length(),this.innerHTML=this.root.innerHTML,b&&c!==a.sources.SILENT&&this.quill.emit(this.quill.constructor.events.TEXT_CHANGE,b,c)),d&&d.ops.length>0&&c!==a.sources.SILENT?this.quill.emit(this.quill.constructor.events.TEXT_CHANGE,d,a.sources.USER):void 0},a.prototype.checkUpdate=function(b){var c;return null==b&&(b="user"),null==this.root.parentNode?clearInterval(this.timer):(c=this._update(),c&&(this.delta.compose(c),this.length=this.delta.length(),this.quill.emit(this.quill.constructor.events.TEXT_CHANGE,c,b)),c&&(b=a.sources.SILENT),this.selection.update(b))},a.prototype.focus=function(){return null!=this.selection.range?this.selection.setRange(this.selection.range):this.root.focus()},a.prototype.getBounds=function(a){var b,c,d,e,f,g,i;if(this.checkUpdate(),g=this.doc.findLeafAt(a,!0),d=g[0],e=g[1],null==d)throw new Error("Invalid index");return c=this.root.parentNode.getBoundingClientRect(),i="left",0===d.length?b=d.node.parentNode.getBoundingClientRect():h.VOID_TAGS[d.node.tagName]?(b=d.node.getBoundingClientRect(),1===e&&(i="right")):(f=document.createRange(),e<d.length?(f.setStart(d.node,e),f.setEnd(d.node,e+1)):(f.setStart(d.node,e-1),f.setEnd(d.node,e),i="right"),b=f.getBoundingClientRect()),{height:b.height,left:b[i]-c.left,top:b.top-c.top}},a.prototype._deleteAt=function(a,b){return 0>=b?void 0:this.selection.shiftAfter(a,-1*b,function(c){return function(){var d,e,f,g,h,i,j;for(j=c.doc.findLineAt(a),f=j[0],i=j[1],d=f,g=f.length-i<=b&&i>0;null!=d&&b>0;)h=d.next,e=Math.min(d.length-i,b),0===i&&b>=d.length?c.doc.removeLine(d):d.deleteText(i,e),b-=e,d=h,i=0;return g&&f.next?c.doc.mergeLines(f,f.next):void 0}}(this))},a.prototype._formatAt=function(a,b,c,d){return this.selection.shiftAfter(a,0,function(e){return function(){var f,g,h,i,j;for(i=e.doc.findLineAt(a),g=i[0],h=i[1],j=[];null!=g&&b>0;)f=Math.min(b,g.length-h-1),g.formatText(h,f,c,d),b-=f,b>0&&g.format(c,d),b-=1,h=0,j.push(g=g.next);return j}}(this))},a.prototype._insertAt=function(a,b,c){return null==c&&(c={}),this.selection.shiftAfter(a,b.length,function(d){return function(){var e,f,i,j;return b=b.replace(/\r\n?/g,"\n"),f=b.split("\n"),j=d.doc.findLineAt(a),e=j[0],i=j[1],g.each(f,function(a,b){var j;return null==e||e.length<=i?(b<f.length-1||a.length>0)&&(e=d.doc.appendLine(document.createElement(h.DEFAULT_BLOCK_TAG)),i=0,e.insertText(i,a,c),e.format(c),j=null):(e.insertText(i,a,c),b<f.length-1&&(j=d.doc.splitLine(e,i+a.length),g.each(g.defaults({},c,e.formats),function(a,b){return e.format(b,c[b])}),i=0)),e=j})}}(this))},a.prototype._trackDelta=function(a){var b,c;return a(),c=this.doc.toDelta(),b=this.delta.diff(c)},a.prototype._update=function(){var a;return this.innerHTML===this.root.innerHTML?!1:(a=this._trackDelta(function(a){return function(){return a.selection.preserve(g.bind(a.doc.rebuild,a.doc)),a.selection.shiftAfter(0,0,g.bind(a.doc.optimizeLines,a.doc))}}(this)),this.innerHTML=this.root.innerHTML,a.ops.length>0?a:!1)},a}(),b.exports=d},{"../lib/dom":17,"./document":8,"./line":12,"./selection":14,lodash:1}],10:[function(a,b){var c,d,e;d=a("lodash"),e=a("../lib/dom"),c=function(){function a(a){this.config=a}return a.types={LINE:"line"},a.FORMATS={bold:{tag:"B",prepare:"bold"},italic:{tag:"I",prepare:"italic"},underline:{tag:"U",prepare:"underline"},strike:{tag:"S",prepare:"strikeThrough"},color:{style:"color","default":"rgb(0, 0, 0)",prepare:"foreColor"},background:{style:"backgroundColor","default":"rgb(255, 255, 255)",prepare:"backColor"},font:{style:"fontFamily","default":"'Helvetica', 'Arial', sans-serif",prepare:"fontName"},size:{style:"fontSize","default":"13px",prepare:function(a){return document.execCommand("fontSize",!1,e.convertFontSize(a))}},link:{tag:"A",attribute:"href"},image:{tag:"IMG",attribute:"src"},align:{type:a.types.LINE,style:"textAlign","default":"left"},bullet:{type:a.types.LINE,exclude:"list",parentTag:"UL",tag:"LI"},list:{type:a.types.LINE,exclude:"bullet",parentTag:"OL",tag:"LI"}},a.prototype.add=function(b,c){var f,g,h,i,j;return c?this.value(b)===c?b:(d.isString(this.config.parentTag)&&(h=document.createElement(this.config.parentTag),e(b).wrap(h),b.parentNode.tagName===(null!=(i=b.parentNode.previousSibling)?i.tagName:void 0)&&e(b.parentNode.previousSibling).merge(b.parentNode),b.parentNode.tagName===(null!=(j=b.parentNode.nextSibling)?j.tagName:void 0)&&e(b.parentNode).merge(b.parentNode.nextSibling)),d.isString(this.config.tag)&&(f=document.createElement(this.config.tag),null!=e.VOID_TAGS[f.tagName]?(null!=b.parentNode&&e(b).replace(f),b=f):this.isType(a.types.LINE)?b=e(b).switchTag(this.config.tag):(e(b).wrap(f),b=f)),(d.isString(this.config.style)||d.isString(this.config.attribute)||d.isString(this.config["class"]))&&(d.isString(this.config["class"])&&(b=this.remove(b)),e(b).isTextNode()&&(g=document.createElement(e.DEFAULT_INLINE_TAG),e(b).wrap(g),b=g),d.isString(this.config.style)&&c!==this.config["default"]&&(b.style[this.config.style]=c),d.isString(this.config.attribute)&&b.setAttribute(this.config.attribute,c),d.isString(this.config["class"])&&e(b).addClass(this.config["class"]+c)),b):this.remove(b)},a.prototype.isType=function(a){return a===this.config.type},a.prototype.match=function(a){var b,c,f,g,h;if(!e(a).isElement())return!1;if(d.isString(this.config.parentTag)&&(null!=(g=a.parentNode)?g.tagName:void 0)!==this.config.parentTag)return!1;if(d.isString(this.config.tag)&&a.tagName!==this.config.tag)return!1;if(d.isString(this.config.style)&&(!a.style[this.config.style]||a.style[this.config.style]===this.config["default"]))return!1;if(d.isString(this.config.attribute)&&!a.hasAttribute(this.config.attribute))return!1;if(d.isString(this.config["class"])){for(h=e(a).classes(),c=0,f=h.length;f>c;c++)if(b=h[c],0===b.indexOf(this.config["class"]))return!0;return!1}return!0},a.prototype.prepare=function(a){return d.isString(this.config.prepare)?document.execCommand(this.config.prepare,!1,a):d.isFunction(this.config.prepare)?this.config.prepare(a):void 0},a.prototype.remove=function(b){var c,f,g,h;if(!this.match(b))return b;if(d.isString(this.config.style)&&(b.style[this.config.style]="",b.getAttribute("style")||b.removeAttribute("style")),d.isString(this.config.attribute)&&b.removeAttribute(this.config.attribute),d.isString(this.config["class"]))for(h=e(b).classes(),f=0,g=h.length;g>f;f++)c=h[f],0===c.indexOf(this.config["class"])&&e(b).removeClass(c);return d.isString(this.config.tag)&&(this.isType(a.types.LINE)?(d.isString(this.config.parentTag)&&(null!=b.previousSibling&&e(b).splitBefore(b.parentNode.parentNode),null!=b.nextSibling&&e(b.nextSibling).splitBefore(b.parentNode.parentNode)),b=e(b).switchTag(e.DEFAULT_BLOCK_TAG)):(b=e(b).switchTag(e.DEFAULT_INLINE_TAG),null!=e.EMBED_TAGS[this.config.tag]&&e(b).text(e.EMBED_TEXT))),d.isString(this.config.parentTag)&&e(b.parentNode).unwrap(),b.tagName!==e.DEFAULT_INLINE_TAG||b.hasAttributes()||(b=e(b).unwrap()),b},a.prototype.value=function(a){var b,c,f,g;if(!this.match(a))return void 0;if(d.isString(this.config.attribute))return a.getAttribute(this.config.attribute)||void 0;if(d.isString(this.config.style))return a.style[this.config.style]||void 0;if(d.isString(this.config["class"])){for(g=e(a).classes(),c=0,f=g.length;f>c;c++)if(b=g[c],0===b.indexOf(this.config["class"]))return b.slice(this.config["class"].length)}else if(d.isString(this.config.tag))return!0;return void 0},a}(),b.exports=c},{"../lib/dom":17,lodash:1}],11:[function(a,b){var c,d,e,f,g,h=function(a,b){function c(){this.constructor=a}for(var d in b)i.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a},i={}.hasOwnProperty;f=a("lodash"),g=a("../lib/dom"),c=a("./format"),e=a("../lib/linked-list"),d=function(a){function b(a,c){this.node=a,this.formats=f.clone(c),this.id=f.uniqueId(b.ID_PREFIX),this.text=g(this.node).text(),this.length=this.text.length}return h(b,a),b.ID_PREFIX="ql-leaf-",b.isLeafNode=function(a){return g(a).isTextNode()||null==a.firstChild},b.prototype.deleteText=function(a,b){var c;if(b>0)return this.text=this.text.slice(0,a)+this.text.slice(a+b),this.length=this.text.length,null!=g.EMBED_TAGS[this.node.tagName]?(c=document.createTextNode(this.text),this.node=g(this.node).replace(c)):g(this.node).text(this.text)},b.prototype.insertText=function(a,b){var c;return this.text=this.text.slice(0,a)+b+this.text.slice(a),g(this.node).isTextNode()?g(this.node).text(this.text):(c=document.createTextNode(b),this.node.tagName===g.DEFAULT_BREAK_TAG?this.node=g(this.node).replace(c):(this.node.appendChild(c),this.node=c)),this.length=this.text.length},b}(e.Node),b.exports=d},{"../lib/dom":17,"../lib/linked-list":18,"./format":10,lodash:1}],12:[function(a,b){var c,d,e,f,g,h,i,j,k=function(a,b){function c(){this.constructor=a}for(var d in b)l.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a},l={}.hasOwnProperty;i=a("lodash"),c=a("rich-text/lib/delta"),j=a("../lib/dom"),d=a("./format"),e=a("./leaf"),f=a("./line"),g=a("../lib/linked-list"),h=a("./normalizer"),f=function(a){function b(a,c){this.doc=a,this.node=c,this.id=i.uniqueId(b.ID_PREFIX),this.formats={},j(this.node).addClass(b.CLASS_NAME),this.rebuild(),b.__super__.constructor.call(this,this.node)}return k(b,a),b.CLASS_NAME="ql-line",b.ID_PREFIX="ql-line-",b.prototype.buildLeaves=function(a,b){return i.each(j(a).childNodes(),function(a){return function(c){var f;return c=a.doc.normalizer.normalizeNode(c),f=i.clone(b),i.each(a.doc.formats,function(a,b){return!a.isType(d.types.LINE)&&a.match(c)?f[b]=a.value(c):void 0}),e.isLeafNode(c)?a.leaves.append(new e(c,f)):a.buildLeaves(c,f)}}(this))},b.prototype.deleteText=function(a,b){var c,d,e;if(b>0){for(e=this.findLeafAt(a),d=e[0],a=e[1];null!=d&&b>0;)c=Math.min(b,d.length-a),d.deleteText(a,c),b-=c,d=d.next,a=0;return this.rebuild()}},b.prototype.findLeaf=function(a){var b;for(b=this.leaves.first;null!=b;){if(b.node===a)return b;b=b.next}return null},b.prototype.findLeafAt=function(a,b){var c;if(null==b&&(b=!1),a>=this.length-1)return[this.leaves.last,this.leaves.last.length];for(c=this.leaves.first;null!=c;){if(a<c.length||a===c.length&&b)return[c,a];a-=c.length,c=c.next}return[this.leaves.last,a-this.leaves.last.length]},b.prototype.format=function(a,b){var c;return i.isObject(a)?c=a:(c={},c[a]=b),i.each(c,function(a){return function(b,c){var e,f;return f=a.doc.formats[c],null!=f?(f.isType(d.types.LINE)&&(f.config.exclude&&a.formats[f.config.exclude]&&(e=a.doc.formats[f.config.exclude],null!=e&&(a.node=e.remove(a.node),delete a.formats[f.config.exclude])),a.node=f.add(a.node,b)),b?a.formats[c]=b:delete a.formats[c]):void 0}}(this)),this.resetContent()},b.prototype.formatText=function(a,b,c,e){var f,g,h,i,k,l,m,n,o,p;if(l=this.findLeafAt(a),g=l[0],h=l[1],f=this.doc.formats[c],null!=f&&f.config.type!==d.types.LINE){for(;null!=g&&b>0;){if(k=g.next,e&&g.formats[c]!==e||!e&&null!=g.formats[c]){if(p=g.node,null!=g.formats[c]){for(j(p).splitBefore(this.node);!f.match(p);)p=p.parentNode;j(p).split(g.length)}h>0&&(m=j(p).split(h),i=m[0],p=m[1]),g.length>h+b&&(n=j(p).split(b),p=n[0],o=n[1]),f.add(p,e)}b-=g.length-h,h=0,g=k}return this.rebuild()}},b.prototype.insertText=function(a,b,c){var d,e,f,g,h,k,l;return null==c&&(c={}),b.length>0?(k=this.findLeafAt(a),d=k[0],e=k[1],i.isEqual(d.formats,c)?(d.insertText(e,b),this.resetContent()):(g=i.reduce(c,function(a){return function(b,c,d){var e;return e=a.doc.formats[d],null!=e&&(b=e.add(b,c)),b}}(this),document.createTextNode(b)),l=j(d.node).split(e),h=l[0],f=l[1],f&&(f=j(f).splitBefore(this.node).get()),this.node.insertBefore(g,f),this.rebuild())):void 0},b.prototype.optimize=function(){return h.optimizeLine(this.node),this.rebuild()},b.prototype.rebuild=function(a){return null==a&&(a=!1),!a&&null!=this.outerHTML&&this.outerHTML===this.node.outerHTML&&i.all(this.leaves.toArray(),function(a){return function(b){return j(b.node).isAncestor(a.node)}}(this))?!1:(this.node=this.doc.normalizer.normalizeNode(this.node),0!==j(this.node).length()||this.node.querySelector(j.DEFAULT_BREAK_TAG)||this.node.appendChild(document.createElement(j.DEFAULT_BREAK_TAG)),this.leaves=new g,this.formats=i.reduce(this.doc.formats,function(a){return function(b,c,e){return c.isType(d.types.LINE)&&(c.match(a.node)?b[e]=c.value(a.node):delete b[e]),b}}(this),this.formats),this.buildLeaves(this.node,{}),this.resetContent(),!0)},b.prototype.resetContent=function(){return this.node.id!==this.id&&(this.node.id=this.id),this.outerHTML=this.node.outerHTML,this.length=1,this.delta=new c,i.each(this.leaves.toArray(),function(a){return function(b){return a.length+=b.length,null!=j.EMBED_TAGS[b.node.tagName]?a.delta.insert(1,b.formats):a.delta.insert(b.text,b.formats)}}(this)),this.delta.insert("\n",this.formats)},b}(g.Node),b.exports=f},{"../lib/dom":17,"../lib/linked-list":18,"./format":10,"./leaf":11,"./line":12,"./normalizer":13,lodash:1,"rich-text/lib/delta":3}],13:[function(a,b){var c,d,e,f;d=a("lodash"),f=a("../lib/dom"),e=function(a){return a=a.replace(/(?:^|[-_])(\w)/g,function(a,b){return b?b.toUpperCase():""}),a.charAt(0).toLowerCase()+a.slice(1)},c=function(){function a(){this.whitelist={styles:{},tags:{}},this.whitelist.tags[f.DEFAULT_BREAK_TAG]=!0,this.whitelist.tags[f.DEFAULT_BLOCK_TAG]=!0,this.whitelist.tags[f.DEFAULT_INLINE_TAG]=!0}return a.ALIASES={STRONG:"B",EM:"I",DEL:"S",STRIKE:"S"},a.ATTRIBUTES={color:"color",face:"fontFamily",size:"fontSize"},a.prototype.addFormat=function(a){return null!=a.tag&&(this.whitelist.tags[a.tag]=!0),null!=a.parentTag&&(this.whitelist.tags[a.parentTag]=!0),null!=a.style?this.whitelist.styles[a.style]=!0:void 0},a.prototype.normalizeLine=function(b){return b=a.wrapInline(b),b=a.handleBreaks(b),b=a.pullBlocks(b),b=this.normalizeNode(b),a.unwrapText(b),null!=b&&null!=f.LIST_TAGS[b.tagName]&&(b=b.firstChild),b},a.prototype.normalizeNode=function(b){return f(b).isTextNode()?b:(d.each(a.ATTRIBUTES,function(a,c){var d;return b.hasAttribute(c)?(d=b.getAttribute(c),"size"===c&&(d=f.convertFontSize(d)),b.style[a]=d,b.removeAttribute(c)):void 0}),this.whitelistStyles(b),this.whitelistTags(b))},a.prototype.whitelistStyles=function(a){var b,c;return b=f(a).styles(),c=d.omit(b,function(a){return function(b,c){return null==a.whitelist.styles[e(c)]}}(this)),Object.keys(c).length<Object.keys(b).length?Object.keys(c).length>0?f(a).styles(c,!0):a.removeAttribute("style"):void 0},a.prototype.whitelistTags=function(b){return f(b).isElement()?(null!=a.ALIASES[b.tagName]?b=f(b).switchTag(a.ALIASES[b.tagName]):null==this.whitelist.tags[b.tagName]&&(b=null!=f.BLOCK_TAGS[b.tagName]?f(b).switchTag(f.DEFAULT_BLOCK_TAG):b.hasAttributes()||null==b.firstChild?f(b).switchTag(f.DEFAULT_INLINE_TAG):f(b).unwrap()),b):b},a.handleBreaks=function(a){var b;return b=d.map(a.querySelectorAll(f.DEFAULT_BREAK_TAG)),d.each(b,function(){return function(b){return null==b.nextSibling||f.isIE(10)&&null==b.previousSibling?void 0:f(b.nextSibling).splitBefore(a.parentNode)}}(this)),a},a.optimizeLine=function(a){var b,c,e,g;for(a.normalize(),b=f(a).length(),e=f(a).descendants(),g=[];e.length>0;)c=e.pop(),null!=(null!=c?c.parentNode:void 0)&&null==f.EMBED_TAGS[c.tagName]&&(c.tagName===f.DEFAULT_BREAK_TAG?g.push(0!==b?f(c).remove():void 0):0===f(c).length()?(e.push(c.nextSibling),g.push(f(c).unwrap())):null!=c.previousSibling&&c.tagName===c.previousSibling.tagName&&d.isEqual(f(c).attributes(),f(c.previousSibling).attributes())?(e.push(c.firstChild),g.push(f(c.previousSibling).merge(c))):g.push(void 0));return g},a.pullBlocks=function(b){var c;for(c=b.firstChild;null!=c;){if(null!=f.BLOCK_TAGS[c.tagName]&&"LI"!==c.tagName){f(c).isolate(b.parentNode),null!=f.LIST_TAGS[c.tagName]&&c.firstChild?(f(c.parentNode).unwrap(),null==b.parentNode&&(b=c)):(f(c).unwrap(),a.pullBlocks(b));break}c=c.nextSibling}return b},a.stripComments=function(a){return a.replace(/<!--[\s\S]*?-->/g,"")},a.stripWhitespace=function(a){return a=a.trim(),a=a.replace(/(\r?\n|\r)+/g," "),a=a.replace(/\>\s+\</g,"><")},a.wrapInline=function(a){var b,c;if(null!=f.BLOCK_TAGS[a.tagName])return a;for(b=document.createElement(f.DEFAULT_BLOCK_TAG),a.parentNode.insertBefore(b,a);null!=a&&null==f.BLOCK_TAGS[a.tagName];)c=a.nextSibling,b.appendChild(a),a=c;return b},a.unwrapText=function(a){var b;return b=d.map(a.querySelectorAll(f.DEFAULT_INLINE_TAG)),d.each(b,function(a){return a.hasAttributes()?void 0:f(a).unwrap()})},a}(),b.exports=c},{"../lib/dom":17,lodash:1}],14:[function(a,b){var c,d,e,f,g,h;g=a("lodash"),h=a("../lib/dom"),c=a("./leaf"),d=a("./normalizer"),e=a("../lib/range"),f=function(){function a(a,b){this.doc=a,this.emitter=b,this.focus=!1,this.range=new e(0,0),this.nullDelay=!1,this.update("silent")}return a.prototype.checkFocus=function(){return document.activeElement===this.doc.root},a.prototype.getRange=function(a){var b,c,d;return null==a&&(a=!1),this.checkFocus()?(c=this._getNativeRange(),null==c?null:(d=this._positionToIndex(c.startContainer,c.startOffset),b=c.startContainer===c.endContainer&&c.startOffset===c.endOffset?d:this._positionToIndex(c.endContainer,c.endOffset),new e(Math.min(d,b),Math.max(d,b)))):a?this.range:null},a.prototype.preserve=function(a){var b,c,d,e,f,g,h,i,j;return d=this._getNativeRange(),null!=d&&this.checkFocus()?(e=this._encodePosition(d.startContainer,d.startOffset),i=e[0],j=e[1],f=this._encodePosition(d.endContainer,d.endOffset),b=f[0],c=f[1],a(),g=this._decodePosition(i,j),i=g[0],j=g[1],h=this._decodePosition(b,c),b=h[0],c=h[1],this._setNativeRange(i,j,b,c)):a()},a.prototype.setRange=function(a,b){var c,d,e,f,g,h,i;return null!=a?(e=this._indexToPosition(a.start),h=e[0],i=e[1],a.isCollapsed()?(f=[h,i],c=f[0],d=f[1]):(g=this._indexToPosition(a.end),c=g[0],d=g[1]),this._setNativeRange(h,i,c,d)):this._setNativeRange(null),this.update(b)},a.prototype.shiftAfter=function(a,b,c){var d;return d=this.getRange(),c(),null!=d?(d.shift(a,b),this.setRange(d,"silent")):void 0},a.prototype.update=function(a){var b,c,d,f;return c=this.checkFocus(),d=this.getRange(!0),b="silent"!==a&&(!e.compare(d,this.range)||c!==this.focus),f=c?d:null,null!==f||"user"!==a||this.nullDelay?(this.nullDelay=!1,this.range=d,this.focus=c,b?this.emitter.emit(this.emitter.constructor.events.SELECTION_CHANGE,f,a):void 0):this.nullDelay=!0},a.prototype._decodePosition=function(a,b){var c;return h(a).isElement()&&(c=h(a.parentNode).childNodes().indexOf(a),b+=c,a=a.parentNode),[a,b]},a.prototype._encodePosition=function(a,b){for(var c;;){if(h(a).isTextNode()||a.tagName===h.DEFAULT_BREAK_TAG||null!=h.EMBED_TAGS[a.tagName])return[a,b];if(b<a.childNodes.length)a=a.childNodes[b],b=0;else{if(0===a.childNodes.length)return null==this.doc.normalizer.whitelist.tags[a.tagName]&&(c=document.createTextNode(""),a.appendChild(c),a=c),[a,0];if(a=a.lastChild,!h(a).isElement())return[a,h(a).length()];if(a.tagName===h.DEFAULT_BREAK_TAG||null!=h.EMBED_TAGS[a.tagName])return[a,1];b=a.childNodes.length}}},a.prototype._getNativeRange=function(){var a,b;return b=document.getSelection(),(null!=b?b.rangeCount:void 0)>0&&(a=b.getRangeAt(0),h(a.startContainer).isAncestor(this.doc.root,!0)&&(a.startContainer===a.endContainer||h(a.endContainer).isAncestor(this.doc.root,!0)))?a:null},a.prototype._indexToPosition=function(a){var b,c,d;return 0===this.doc.lines.length?[this.doc.root,0]:(d=this.doc.findLeafAt(a,!0),b=d[0],c=d[1],this._decodePosition(b.node,c))},a.prototype._positionToIndex=function(a,b){var c,d,e,f,g,i;if(h.isIE(10)&&"BR"===a.tagName&&1===b&&(b=0),i=this._encodePosition(a,b),d=i[0],b=i[1],f=this.doc.findLine(d),null==f)return 0;for(c=f.findLeaf(d),g=0;null!=f.prev;)f=f.prev,g+=f.length;if(null==c)return g;for(e=0;null!=c.prev;)c=c.prev,e+=c.length;return g+e+b},a.prototype._setNativeRange=function(a,b,c,d){var e,f;if(f=document.getSelection())if(null!=a){if(this.checkFocus()||this.doc.root.focus(),e=this._getNativeRange(),null==e||a!==e.startContainer||b!==e.startOffset||c!==e.endContainer||d!==e.endOffset)return f.removeAllRanges(),e=document.createRange(),e.setStart(a,b),e.setEnd(c,d),f.addRange(e)}else if(f.removeAllRanges(),this.doc.root.blur(),h.isIE(11)&&!h.isIE(9))return document.body.focus()},a}(),b.exports=f},{"../lib/dom":17,"../lib/range":20,"./leaf":11,"./normalizer":13,lodash:1}],15:[function(a,b){a("./modules/authorship"),a("./modules/image-tooltip"),a("./modules/keyboard"),a("./modules/link-tooltip"),a("./modules/multi-cursor"),a("./modules/paste-manager"),a("./modules/toolbar"),a("./modules/tooltip"),a("./modules/undo-manager"),b.exports=a("./quill")},{"./modules/authorship":21,"./modules/image-tooltip":22,"./modules/keyboard":23,"./modules/link-tooltip":24,"./modules/multi-cursor":25,"./modules/paste-manager":26,"./modules/toolbar":27,"./modules/tooltip":28,"./modules/undo-manager":29,"./quill":30}],16:[function(a,b){var c,d,e,f=function(a,b){function c(){this.constructor=a}for(var d in b)g.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a},g={}.hasOwnProperty;e=a("./dom"),d=a("./picker"),c=function(a){function b(){b.__super__.constructor.apply(this,arguments),e(this.container).addClass("ql-color-picker")}return f(b,a),b.prototype.buildItem=function(a,c,d){var e;return e=b.__super__.buildItem.call(this,a,c,d),e.style.backgroundColor=c.value,e},b}(d),b.exports=c},{"./dom":17,"./picker":19}],17:[function(a,b){var c,d,e,f,g,h=function(a,b){return function(){return a.apply(b,arguments)}},i=function(a,b){function c(){this.constructor=a}for(var d in b)j.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a},j={}.hasOwnProperty;e=a("lodash"),g=null,d=function(){function a(a){this.node=a,this.trigger=h(this.trigger,this)}return a.prototype.addClass=function(a){return this.hasClass(a)?void 0:(null!=this.node.classList?this.node.classList.add(a):null!=this.node.className&&(this.node.className=(this.node.className+" "+a).trim()),this)},a.prototype.attributes=function(a){var b,c,d,f,g,h;if(a)return e.each(a,function(a){return function(b,c){return a.node.setAttribute(c,b)}}(this)),this;if(null==this.node.attributes)return{};for(a={},g=this.node.attributes,
c=d=0,f=g.length;f>d;c=++d)h=g[c],b=this.node.attributes[c],a[b.name]=b.value;return a},a.prototype.child=function(a){var b,c;for(b=this.node.firstChild,c=f(b).length();null!=b&&!(c>a);)a-=c,b=b.nextSibling,c=f(b).length();return null==b&&(b=this.node.lastChild,a=f(b).length()),[b,a]},a.prototype.childNodes=function(){return e.map(this.node.childNodes)},a.prototype.classes=function(){return this.node.className.split(/\s+/)},a.prototype.descendants=function(){return e.map(this.node.getElementsByTagName("*"))},a.prototype.get=function(){return this.node},a.prototype.hasClass=function(a){return null!=this.node.classList?this.node.classList.contains(a):null!=this.node.className?this.classes().indexOf(a)>-1:!1},a.prototype.isAncestor=function(a,b){var c;if(null==b&&(b=!1),a===this.node)return b;for(c=this.node;c;){if(c===a)return!0;c=c.parentNode}return!1},a.prototype.isElement=function(){var a;return(null!=(a=this.node)?a.nodeType:void 0)===f.ELEMENT_NODE},a.prototype.isTextNode=function(){var a;return(null!=(a=this.node)?a.nodeType:void 0)===f.TEXT_NODE},a.prototype.isolate=function(a){return null!=this.node.nextSibling&&f(this.node.nextSibling).splitBefore(a),this.splitBefore(a),this},a.prototype.length=function(){var a;return null==this.node?0:(a=this.text().length,this.isElement()&&(a+=this.node.querySelectorAll(Object.keys(f.EMBED_TAGS).join(",")).length),a)},a.prototype.merge=function(a){var b;return b=f(a),this.isElement()?(b.moveChildren(this.node),this.normalize()):this.text(this.text()+b.text()),b.remove(),this},a.prototype.moveChildren=function(a){return e.each(this.childNodes(),function(b){return a.appendChild(b)}),this},a.prototype.nextLineNode=function(a){var b;return b=this.node.nextSibling,null==b&&this.node.parentNode!==a&&(b=this.node.parentNode.nextSibling),null!=b&&null!=f.LIST_TAGS[b.tagName]&&(b=b.firstChild),b},a.prototype.normalize=function(){var a,b,c,d;for(b=this.node.firstChild;null!=b;)d=b.nextSibling,a=f(b),null!=d&&f(d).isTextNode()&&(0===a.text().length?a.remove():a.isTextNode()&&(c=d.nextSibling,a.merge(d),d=c)),b=d;return this},a.prototype.on=function(a,b){return this.node.addEventListener(a,function(c){return function(d){var e,f;return e=!g||"keydown"!==a&&"keyup"!==a?d:g,f=b.call(c.node,e),f||(d.preventDefault(),d.stopPropagation()),f}}(this)),this},a.prototype.remove=function(){var a;return null!=(a=this.node.parentNode)&&a.removeChild(this.node),this.node=null,null},a.prototype.removeClass=function(a){var b;if(this.hasClass(a))return null!=this.node.classList?this.node.classList.remove(a):null!=this.node.className&&(b=this.classes(),b.splice(b.indexOf(a),1),this.node.className=b.join(" ")),this.node.getAttribute("class")||this.node.removeAttribute("class"),this},a.prototype.replace=function(a){return this.node.parentNode.replaceChild(a,this.node),this.node=a,a},a.prototype.splitBefore=function(a,b){var c,d,e,g;if(null==b&&(b=!1),this.node===a||this.node.parentNode===a)return this;if(null!=this.node.previousSibling||b){for(e=this.node.parentNode,d=e.cloneNode(!1),e.parentNode.insertBefore(d,e.nextSibling),g=this.node;null!=g;)c=g.nextSibling,d.appendChild(g),g=c;return f(d).splitBefore(a)}return f(this.node.parentNode).splitBefore(a)},a.prototype.split=function(a,b){var c,d,e,g,h,i,j,k,l,m;if(null==b&&(b=!1),j=this.length(),a=Math.max(0,a),a=Math.min(a,j),!b&&0===a)return[this.node.previousSibling,this.node,!1];if(!b&&a===j)return[this.node,this.node.nextSibling,!1];if(this.node.nodeType===f.TEXT_NODE)return c=this.node.splitText(a),[this.node,c,!0];for(h=this.node,m=this.node.cloneNode(!1),this.node.parentNode.insertBefore(m,h.nextSibling),k=this.child(a),d=k[0],a=k[1],l=f(d).split(a),e=l[0],g=l[1];null!==g;)i=g.nextSibling,m.appendChild(g),g=i;return[h,m,!0]},a.prototype.styles=function(a,b){var c,d;return null==b&&(b=!1),a?(b||(a=e.defaults(a,this.styles())),d=e.map(a,function(a,b){return b+": "+a}).join("; ")+";",this.node.setAttribute("style",d),this):(d=this.node.getAttribute("style")||"",c=e.reduce(d.split(";"),function(a,b){var c,d,e;return d=b.split(":"),c=d[0],e=d[1],c&&e&&(c=c.trim(),e=e.trim(),a[c.toLowerCase()]=e),a},{}))},a.prototype.switchTag=function(a){var b,c;return a=a.toUpperCase(),this.node.tagName===a?this:(c=document.createElement(a),b=this.attributes(),null==f.VOID_TAGS[a]&&this.moveChildren(c),this.replace(c),this.attributes(b).get())},a.prototype.text=function(a){if(null!=a){switch(this.node.nodeType){case f.ELEMENT_NODE:this.node.textContent=a;break;case f.TEXT_NODE:this.node.data=a}return this}switch(this.node.nodeType){case f.ELEMENT_NODE:return this.node.tagName===f.DEFAULT_BREAK_TAG?"":null!=f.EMBED_TAGS[this.node.tagName]?f.EMBED_TEXT:null!=this.node.textContent?this.node.textContent:"";case f.TEXT_NODE:return this.node.data||"";default:return""}},a.prototype.textNodes=function(){var a,b,c;for(c=document.createTreeWalker(this.node,NodeFilter.SHOW_TEXT,null,!1),b=[];a=c.nextNode();)b.push(a);return b},a.prototype.toggleClass=function(a,b){return null==b&&(b=!this.hasClass(a)),b?this.addClass(a):this.removeClass(a),this},a.prototype.trigger=function(a,b){var c,d,h;return null==b&&(b={}),["keypress","keydown","keyup"].indexOf(a)<0?(c=document.createEvent("Event"),c.initEvent(a,b.bubbles,b.cancelable)):(c=document.createEvent("KeyboardEvent"),g=e.clone(b),g.which=e.isNumber(b.key)?b.key:e.isString(b.key)?b.key.toUpperCase().charCodeAt(0):0,f.isIE(10)?(h=[],b.altKey&&h.push("Alt"),b.ctrlKey&&h.push("Control"),b.metaKey&&h.push("Meta"),b.shiftKey&&h.push("Shift"),c.initKeyboardEvent(a,b.bubbles,b.cancelable,window,0,0,h.join(" "),null,null)):(d=e.isFunction(c.initKeyboardEvent)?"initKeyboardEvent":"initKeyEvent",c[d](a,b.bubbles,b.cancelable,window,b.ctrlKey,b.altKey,b.shiftKey,b.metaKey,0,0))),this.node.dispatchEvent(c),g=null,this},a.prototype.unwrap=function(){var a,b;return b=this.node.firstChild,a=this.node.nextSibling,e.each(this.childNodes(),function(b){return function(c){return b.node.parentNode.insertBefore(c,a)}}(this)),this.remove(),b},a.prototype.wrap=function(a){var b;for(null!=this.node.parentNode&&this.node.parentNode.insertBefore(a,this.node),b=a;null!=b.firstChild;)b=a.firstChild;return b.appendChild(this.node),this},a}(),c=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return i(b,a),b.prototype["default"]=function(){return this.node.querySelector("option[selected]")},b.prototype.option=function(a,b){var c,d,f,g,h,i;if(null==b&&(b=!0),i=e.isElement(a)?a.value:a){for(i=i.replace(/[^\w]+/g,""),h=this.node.children,d=f=0,g=h.length;g>f;d=++f)if(c=h[d],c.value.replace(/[^\w]+/g,"")===i){this.node.selectedIndex=d;break}}else this.node.selectedIndex=-1;return b&&this.trigger("change"),this},b.prototype.reset=function(a){var b;return null==a&&(a=!0),b=this["default"](),null!=b?b.selected=!0:this.node.selectedIndex=0,a&&this.trigger("change"),this},b.prototype.value=function(){return this.node.selectedIndex>-1?this.node.options[this.node.selectedIndex].value:""},b}(d),f=function(a){return"SELECT"===(null!=a?a.tagName:void 0)?new c(a):new d(a)},f=e.extend(f,{ELEMENT_NODE:1,NOBREAK_SPACE:"&nbsp;",TEXT_NODE:3,ZERO_WIDTH_NOBREAK_SPACE:"\ufeff",DEFAULT_BLOCK_TAG:"DIV",DEFAULT_BREAK_TAG:"BR",DEFAULT_INLINE_TAG:"SPAN",EMBED_TEXT:"!",FONT_SIZES:{"10px":1,"13px":2,"16px":3,"18px":4,"24px":5,"32px":6,"48px":7},KEYS:{BACKSPACE:8,TAB:9,ENTER:13,ESCAPE:27,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46},BLOCK_TAGS:{ADDRESS:"ADDRESS",ARTICLE:"ARTICLE",ASIDE:"ASIDE",AUDIO:"AUDIO",BLOCKQUOTE:"BLOCKQUOTE",CANVAS:"CANVAS",DD:"DD",DIV:"DIV",DL:"DL",FIGCAPTION:"FIGCAPTION",FIGURE:"FIGURE",FOOTER:"FOOTER",FORM:"FORM",H1:"H1",H2:"H2",H3:"H3",H4:"H4",H5:"H5",H6:"H6",HEADER:"HEADER",HGROUP:"HGROUP",LI:"LI",OL:"OL",OUTPUT:"OUTPUT",P:"P",PRE:"PRE",SECTION:"SECTION",TABLE:"TABLE",TBODY:"TBODY",TD:"TD",TFOOT:"TFOOT",TH:"TH",THEAD:"THEAD",TR:"TR",UL:"UL",VIDEO:"VIDEO"},EMBED_TAGS:{IMG:"IMG"},LINE_TAGS:{DIV:"DIV",LI:"LI"},LIST_TAGS:{OL:"OL",UL:"UL"},VOID_TAGS:{AREA:"AREA",BASE:"BASE",BR:"BR",COL:"COL",COMMAND:"COMMAND",EMBED:"EMBED",HR:"HR",IMG:"IMG",INPUT:"INPUT",KEYGEN:"KEYGEN",LINK:"LINK",META:"META",PARAM:"PARAM",SOURCE:"SOURCE",TRACK:"TRACK",WBR:"WBR"},convertFontSize:function(a){var b,c,d,g;e.isString(a)&&a.indexOf("px")>-1?(d=Object.keys(f.FONT_SIZES),g=e.values(f.FONT_SIZES)):(g=Object.keys(f.FONT_SIZES),d=e.values(f.FONT_SIZES));for(b in d)if(c=d[b],parseInt(a)<=parseInt(c))return g[b];return e.last(g)},isIE:function(a){var b;return b=document.documentMode,b&&a>=b},isIOS:function(){return/iPhone|iPad/i.test(navigator.userAgent)},isMac:function(){return/Mac/i.test(navigator.platform)}}),b.exports=f},{lodash:1}],18:[function(a,b){var c,d;d=function(){function a(a){this.data=a,this.prev=this.next=null}return a}(),c=function(){function a(){this.length=0,this.first=this.last=null}return a.Node=d,a.prototype.append=function(a){return null!=this.first?(a.next=null,this.last.next=a):this.first=a,a.prev=this.last,this.last=a,this.length+=1},a.prototype.insertAfter=function(a,b){return b.prev=a,null!=a?(b.next=a.next,null!=a.next&&(a.next.prev=b),a.next=b,a===this.last&&(this.last=b)):(b.next=this.first,this.first.prev=b,this.first=b),this.length+=1},a.prototype.remove=function(a){return this.length>1?(null!=a.prev&&(a.prev.next=a.next),null!=a.next&&(a.next.prev=a.prev),a===this.first&&(this.first=a.next),a===this.last&&(this.last=a.prev)):this.first=this.last=null,a.prev=a.next=null,this.length-=1},a.prototype.toArray=function(){var a,b;for(a=[],b=this.first;null!=b;)a.push(b),b=b.next;return a},a}(),b.exports=c},{}],19:[function(a,b){var c,d,e,f;e=a("lodash"),f=a("./dom"),c=a("../core/normalizer"),d=function(){function a(a){this.select=a,this.container=document.createElement("span"),this.buildPicker(),f(this.container).addClass("ql-picker"),this.select.style.display="none",this.select.parentNode.insertBefore(this.container,this.select),f(document).on("click",function(a){return function(){return a.close(),!0}}(this)),f(this.label).on("click",function(a){return function(){return e.defer(function(){return f(a.container).toggleClass("ql-expanded")}),!1}}(this)),f(this.select).on("change",function(a){return function(){var b,c;return a.select.selectedIndex>-1&&(b=a.container.querySelectorAll(".ql-picker-item")[a.select.selectedIndex],c=a.select.options[a.select.selectedIndex]),a.selectItem(b,!1),f(a.label).toggleClass("ql-active",c!==f(a.select)["default"]())}}(this))}return a.TEMPLATE='<span class="ql-picker-label"></span><span class="ql-picker-options"></span>',a.prototype.buildItem=function(a,b,c){var d;return d=document.createElement("span"),d.setAttribute("data-value",b.getAttribute("value")),f(d).addClass("ql-picker-item").text(f(b).text()).on("click",function(a){return function(){return a.selectItem(d,!0),a.close()}}(this)),this.select.selectedIndex===c&&this.selectItem(d,!1),d},a.prototype.buildPicker=function(){var b;return e.each(f(this.select).attributes(),function(a){return function(b,c){return a.container.setAttribute(c,b)}}(this)),this.container.innerHTML=c.stripWhitespace(a.TEMPLATE),this.label=this.container.querySelector(".ql-picker-label"),b=this.container.querySelector(".ql-picker-options"),e.each(this.select.options,function(a){return function(c,d){var e;return e=a.buildItem(b,c,d),b.appendChild(e)}}(this))},a.prototype.close=function(){return f(this.container).removeClass("ql-expanded")},a.prototype.selectItem=function(a,b){var c,d;return c=this.container.querySelector(".ql-selected"),null!=c&&f(c).removeClass("ql-selected"),null!=a?(d=a.getAttribute("data-value"),f(a).addClass("ql-selected"),f(this.label).text(f(a).text()),f(this.select).option(d,b),this.label.setAttribute("data-value",d)):(this.label.innerHTML="&nbsp;",this.label.removeAttribute("data-value"))},a}(),b.exports=d},{"../core/normalizer":13,"./dom":17,lodash:1}],20:[function(a,b){var c,d;d=a("lodash"),c=function(){function a(a,b){this.start=a,this.end=b}return a.compare=function(a,b){return a===b?!0:null==a||null==b?!1:a.equals(b)},a.prototype.equals=function(a){return null==a?!1:this.start===a.start&&this.end===a.end},a.prototype.shift=function(a,b){var c;return c=d.map([this.start,this.end],function(c){return a>c?c:b>=0?c+b:Math.max(a,c+b)}),this.start=c[0],this.end=c[1],c},a.prototype.isCollapsed=function(){return this.start===this.end},a}(),b.exports=c},{lodash:1}],21:[function(a,b){var c,d,e,f,g;e=a("../quill"),f=e.require("lodash"),g=e.require("dom"),d=e.require("delta"),c=function(){function a(a,b){this.quill=a,this.options=b,null!=this.options.button&&this.attachButton(this.options.button),this.options.enabled&&this.enable(),this.quill.addFormat("author",{"class":"author-"}),null!=this.options.authorId&&(this.quill.on(this.quill.constructor.events.PRE_EVENT,function(a){return function(b,c,g){var h,i;return b===a.quill.constructor.events.TEXT_CHANGE&&"user"===g?(h=new d,i={author:a.options.authorId},f.each(c.ops,function(b){return null==b["delete"]?null!=b.insert||null!=b.retain&&null!=b.attributes?(b.attributes||(b.attributes={}),b.attributes.author=a.options.authorId,h.retain(b.retain||b.insert.length||1,i)):h.retain(b.retain):void 0}),a.quill.updateContents(h,e.sources.SILENT)):void 0}}(this)),this.addAuthor(this.options.authorId,this.options.color))}return a.DEFAULTS={authorId:null,color:"transparent",enabled:!1},a.prototype.addAuthor=function(a,b){var c;return c={},c[".authorship .author-"+a]={"background-color":""+b},this.quill.theme.addStyles(c)},a.prototype.attachButton=function(a){var b;return b=g(a),b.on("click",function(a){return function(){return b.toggleClass("ql-on"),a.enable($dom.hasClass("ql-on"))}}(this))},a.prototype.enable=function(a){return null==a&&(a=!0),g(this.quill.root).toggleClass("authorship",a)},a.prototype.disable=function(){return this.enable(!1)},a}(),e.registerModule("authorship",c),b.exports=c},{"../quill":30}],22:[function(a,b){var c,d,e,f,g,h,i,j=function(a,b){function c(){this.constructor=a}for(var d in b)k.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a},k={}.hasOwnProperty;e=a("../quill"),g=a("./tooltip"),h=e.require("lodash"),i=e.require("dom"),c=e.require("delta"),f=e.require("range"),d=function(a){function b(a,c){this.quill=a,this.options=c,this.options=h.defaults(this.options,g.DEFAULTS),b.__super__.constructor.call(this,this.quill,this.options),this.preview=this.container.querySelector(".preview"),this.textbox=this.container.querySelector(".input"),i(this.container).addClass("ql-image-tooltip"),this.initListeners()}return j(b,a),b.DEFAULTS={template:'<input class="input" type="textbox"> <div class="preview"> <span>Preview</span> </div> <a href="javascript:;" class="cancel">Cancel</a> <a href="javascript:;" class="insert">Insert</a>'},b.prototype.initListeners=function(){return i(this.container.querySelector(".insert")).on("click",h.bind(this.insertImage,this)),i(this.container.querySelector(".cancel")).on("click",h.bind(this.hide,this)),i(this.textbox).on("input",h.bind(this._preview,this)),this.initTextbox(this.textbox,this.insertImage,this.hide),this.quill.onModuleLoad("toolbar",function(a){return function(b){return b.initFormat("image",h.bind(a._onToolbar,a))}}(this))},b.prototype.insertImage=function(){var a,b;return b=this._normalizeURL(this.textbox.value),null==this.range&&(this.range=new f(0,0)),this.range&&(this.preview.innerHTML="<span>Preview</span>",this.textbox.value="",a=this.range.end,this.quill.insertEmbed(a,"image",b,"user"),this.quill.setSelection(a+1,a+1)),this.hide()},b.prototype._onToolbar=function(a,b){return b?(this.textbox.value||(this.textbox.value="http://"),this.show(),this.textbox.focus(),h.defer(function(a){return function(){return a.textbox.setSelectionRange(a.textbox.value.length,a.textbox.value.length)}}(this))):this.quill.deleteText(a,"user")},b.prototype._preview=function(){var a;if(this._matchImageURL(this.textbox.value))return"IMG"===this.preview.firstChild.tagName?this.preview.firstChild.setAttribute("src",this.textbox.value):(a=document.createElement("img"),a.setAttribute("src",this.textbox.value),this.preview.replaceChild(a,this.preview.firstChild))},b.prototype._matchImageURL=function(a){return/^https?:\/\/.+\.(jpe?g|gif|png)$/.test(a)},b.prototype._normalizeURL=function(a){return/^https?:\/\//.test(a)||(a="http://"+a),a},b}(g),e.registerModule("image-tooltip",d),b.exports=d},{"../quill":30,"./tooltip":28}],23:[function(a,b){var c,d,e,f,g;e=a("../quill"),f=e.require("lodash"),g=e.require("dom"),c=e.require("delta"),d=function(){function a(a){this.quill=a,this.hotkeys={},this._initListeners(),this._initHotkeys(),this._initDeletes()}return a.hotkeys={BOLD:{key:"B",metaKey:!0},INDENT:{key:g.KEYS.TAB},ITALIC:{key:"I",metaKey:!0},OUTDENT:{key:g.KEYS.TAB,shiftKey:!0},UNDERLINE:{key:"U",metaKey:!0}},a.prototype.addHotkey=function(a,b){return Array.isArray(a)||(a=[a]),f.each(a,function(a){return function(c){var d,e;return c=f.isObject(c)?f.clone(c):{key:c},c.callback=b,e=f.isNumber(c.key)?c.key:c.key.toUpperCase().charCodeAt(0),null==(d=a.hotkeys)[e]&&(d[e]=[]),a.hotkeys[e].push(c)}}(this))},a.prototype.toggleFormat=function(a,b){var c,d,g;return c=a.isCollapsed()?this.quill.getContents(Math.max(0,a.start-1),a.end):this.quill.getContents(a),g=0===c.ops.length||!f.all(c.ops,function(a){var c;return null!=(c=a.attributes)?c[b]:void 0}),a.isCollapsed()?this.quill.prepareFormat(b,g,e.sources.USER):this.quill.formatText(a,b,g,e.sources.USER),d=this.quill.getModule("toolbar"),null!=d?d.setActive(b,g):void 0},a.prototype._initDeletes=function(){return this.addHotkey([g.KEYS.DELETE,g.KEYS.BACKSPACE],function(a){return function(b,c){var d,f,h,i;return null!=b&&a.quill.getLength()>0&&(b.start!==b.end?a.quill.deleteText(b.start,b.end,e.sources.USER):c.key===g.KEYS.BACKSPACE?(i=a.quill.editor.doc.findLineAt(b.start),f=i[0],h=i[1],0===h&&(f.formats.bullet||f.formats.list)?(d=f.format.bullet?"bullet":"list",a.quill.formatLine(b.start,b.start,d,!1)):b.start>0&&a.quill.deleteText(b.start-1,b.start,e.sources.USER)):b.start<a.quill.getLength()&&a.quill.deleteText(b.start,b.start+1,e.sources.USER)),!1}}(this))},a.prototype._initHotkeys=function(){return this.addHotkey(a.hotkeys.INDENT,function(a){return function(b){return a._onTab(b,!1),!1}}(this)),this.addHotkey(a.hotkeys.OUTDENT,function(){return function(){return!1}}(this)),f.each(["bold","italic","underline"],function(b){return function(c){return b.addHotkey(a.hotkeys[c.toUpperCase()],function(a){return b.toggleFormat(a,c),!1})}}(this))},a.prototype._initListeners=function(){return g(this.quill.root).on("keydown",function(a){return function(b){var c;return c=!1,f.each(a.hotkeys[b.which],function(d){var e;return e=g.isMac()?b.metaKey:b.metaKey||b.ctrlKey,!!d.metaKey==!!e&&!!d.shiftKey==!!b.shiftKey&&!!d.altKey==!!b.altKey?(c=d.callback(a.quill.getSelection(),d,b)===!1||c,!0):void 0}),!c}}(this))},a.prototype._onTab=function(a,b){var d;return null==b&&(b=!1),d=(new c).retain(a.start).insert("	")["delete"](a.end-a.start).retain(this.quill.getLength()-a.end),this.quill.updateContents(d,e.sources.USER),this.quill.setSelection(a.start+1,a.start+1)},a}(),e.registerModule("keyboard",d),b.exports=d},{"../quill":30}],24:[function(a,b){var c,d,e,f,g,h=function(a,b){function c(){this.constructor=a}for(var d in b)i.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a},i={}.hasOwnProperty;d=a("../quill"),e=a("./tooltip"),f=d.require("lodash"),g=d.require("dom"),c=function(a){function b(a,c){this.quill=a,this.options=c,this.options=f.defaults(this.options,e.DEFAULTS),b.__super__.constructor.call(this,this.quill,this.options),g(this.container).addClass("ql-link-tooltip"),this.textbox=this.container.querySelector(".input"),this.link=this.container.querySelector(".url"),this.initListeners()}return h(b,a),b.DEFAULTS={maxLength:50,template:'<span class="title">Visit URL:&nbsp;</span> <a href="#" class="url" target="_blank" href="about:blank"></a> <input class="input" type="text"> <span>&nbsp;&#45;&nbsp;</span> <a href="javascript:;" class="change">Change</a> <a href="javascript:;" class="remove">Remove</a> <a href="javascript:;" class="done">Done</a>'},b.hotkeys={LINK:{key:"K",metaKey:!0}},b.prototype.initListeners=function(){return this.quill.on(this.quill.constructor.events.SELECTION_CHANGE,function(a){return function(b){var c;if(null!=b&&b.isCollapsed())return c=a._findAnchor(b),c?(a.setMode(c.href,!1),a.show(c)):(a.range=null,a.hide())}}(this)),g(this.container.querySelector(".done")).on("click",f.bind(this.saveLink,this)),g(this.container.querySelector(".remove")).on("click",function(a){return function(){return a.removeLink(a.range)}}(this)),g(this.container.querySelector(".change")).on("click",function(a){return function(){return a.setMode(a.link.href,!0)}}(this)),this.initTextbox(this.textbox,this.saveLink,this.hide),this.quill.onModuleLoad("toolbar",function(a){return function(b){return a.toolbar=b,b.initFormat("link",f.bind(a._onToolbar,a))}}(this)),this.quill.onModuleLoad("keyboard",function(a){return function(c){return c.addHotkey(b.hotkeys.LINK,f.bind(a._onKeyboard,a))}}(this))},b.prototype.saveLink=function(){var a,b;return b=this._normalizeURL(this.textbox.value),null!=this.range&&(this.range.isCollapsed()?(a=this._findAnchor(this.range),null!=a&&(a.href=b)):this.quill.formatText(this.range,"link",b,"user")),this.setMode(b,!1)},b.prototype.removeLink=function(a){return a.isCollapsed()&&(a=this._expandRange(a)),this.quill.formatText(a,"link",!1,"user"),null!=this.toolbar?this.toolbar.setActive("link",!1):void 0},b.prototype.setMode=function(a,b){var c;return null==b&&(b=!1),b?(this.textbox.value=a,f.defer(function(b){return function(){return b.textbox.focus(),b.textbox.setSelectionRange(a.length,a.length)}}(this))):(this.link.href=a,c=a.length>this.options.maxLength?a.slice(0,this.options.maxLength)+"...":a,g(this.link).text(c)),g(this.container).toggleClass("editing",b)},b.prototype._findAnchor=function(a){var b,c,d,e;for(e=this.quill.editor.doc.findLeafAt(a.start,!0),b=e[0],d=e[1],null!=b&&(c=b.node);null!=c;){if("A"===c.tagName)return c;c=c.parentNode}return null},b.prototype._expandRange=function(a){var b,c,d,e,f;return e=this.quill.editor.doc.findLeafAt(a.start,!0),c=e[0],d=e[1],f=a.start-d,b=f+c.length,{start:f,end:b}},b.prototype._onToolbar=function(a,b){return this._toggle(a,b)},b.prototype._onKeyboard=function(){var a;return a=this.quill.getSelection(),this._toggle(a,!0)},b.prototype._toggle=function(a,b){var c;if(a)return b&&!a.isCollapsed()?(this.setMode(this._suggestURL(a),!0),c=this.quill.editor.selection._getNativeRange(),this.show(c)):this.removeLink(a)},b.prototype._normalizeURL=function(a){return/^(https?:\/\/|mailto:)/.test(a)||(a="http://"+a),a},b.prototype._suggestURL=function(a){var b;return b=this.quill.getText(a),this._normalizeURL(b)},b}(e),d.registerModule("link-tooltip",c),b.exports=c},{"../quill":30,"./tooltip":28}],25:[function(a,b){var c,d,e,f,g,h=function(a,b){function c(){this.constructor=a}for(var d in b)i.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a},i={}.hasOwnProperty;e=a("../quill"),c=a("eventemitter2").EventEmitter2,f=e.require("lodash"),g=e.require("dom"),d=function(a){function b(a,b){this.quill=a,this.options=b,this.cursors={},this.container=this.quill.addContainer("ql-multi-cursor",!0),this.quill.on(this.quill.constructor.events.TEXT_CHANGE,f.bind(this._applyDelta,this))}return h(b,a),b.DEFAULTS={template:'<span class="cursor-flag"> <span class="cursor-name"></span> </span> <span class="cursor-caret"></span>',timeout:2500},b.events={CURSOR_ADDED:"cursor-addded",CURSOR_MOVED:"cursor-moved",CURSOR_REMOVED:"cursor-removed"},b.prototype.clearCursors=function(){return f.each(Object.keys(this.cursors),f.bind(this.removeCursor,this)),this.cursors={}},b.prototype.moveCursor=function(a,b){var c;return c=this.cursors[a],c.index=b,g(c.elem).removeClass("hidden"),clearTimeout(c.timer),c.timer=setTimeout(function(){return function(){return g(c.elem).addClass("hidden"),c.timer=null}}(this),this.options.timeout),this._updateCursor(c),c},b.prototype.removeCursor=function(a){var c;return c=this.cursors[a],this.emit(b.events.CURSOR_REMOVED,c),null!=c&&c.elem.parentNode.removeChild(c.elem),delete this.cursors[a]},b.prototype.setCursor=function(a,c,d,e){var g;return null==this.cursors[a]&&(this.cursors[a]=g={userId:a,index:c,color:e,elem:this._buildCursor(d,e)},this.emit(b.events.CURSOR_ADDED,g)),f.defer(function(b){return function(){return b.moveCursor(a,c)}}(this)),this.cursors[a]},b.prototype.shiftCursors=function(a,b,c){return null==c&&(c=null),f.each(this.cursors,function(){return function(d){return d&&(d.index>a||d.userId===c)?d.index+=Math.max(b,a-d.index):void 0}}(this))},b.prototype.update=function(){return f.each(this.cursors,function(a){return function(b){return null!=b?(a._updateCursor(b),!0):void 0}}(this))},b.prototype._applyDelta=function(a){var b;return b=0,f.each(a.ops,function(a){return function(c){var d,e;return d=0,null!=c.insert?(d=c.insert.length||1,a.shiftCursors(b,d,null!=(e=c.attributes)?e.author:void 0)):null!=c["delete"]?a.shiftCursors(b,-1*c["delete"],null):null!=c.retain&&(a.shiftCursors(b,0,null),d=c.retain),b+=d}}(this)),this.update()},b.prototype._buildCursor=function(a,b){var c,d,e,f;return c=document.createElement("span"),g(c).addClass("cursor"),c.innerHTML=this.options.template,e=c.querySelector(".cursor-flag"),f=c.querySelector(".cursor-name"),g(f).text(a),d=c.querySelector(".cursor-caret"),d.style.backgroundColor=f.style.backgroundColor=b,this.container.appendChild(c),c},b.prototype._updateCursor=function(a){var c,d;return c=this.quill.getBounds(a.index),a.elem.style.top=c.top-this.quill.container.scrollTop+"px",a.elem.style.left=c.left+"px",a.elem.style.height=c.height+"px",d=a.elem.querySelector(".cursor-flag"),g(a.elem).toggleClass("top",parseInt(a.elem.style.top)<=d.offsetHeight).toggleClass("left",parseInt(a.elem.style.left)<=d.offsetWidth).toggleClass("right",this.quill.root.offsetWidth-parseInt(a.elem.style.left)<=d.offsetWidth),this.emit(b.events.CURSOR_MOVED,a)},b}(c),e.registerModule("multi-cursor",d),b.exports=d},{"../quill":30,eventemitter2:2}],26:[function(a,b){var c,d,e,f,g,h;f=a("../quill"),d=a("../core/document"),g=f.require("lodash"),h=f.require("dom"),c=f.require("delta"),e=function(){function a(a,b){this.quill=a,this.options=b,this.container=this.quill.addContainer("ql-paste-manager"),this.container.setAttribute("contenteditable",!0),h(this.quill.root).on("paste",g.bind(this._paste,this))}return a.prototype._paste=function(){var a,b;return a=this.quill.getLength(),b=this.quill.getSelection(),null!=b?(this.container.focus(),g.defer(function(a){return function(){var e,f,g,h,i,j,k,l;return f=new d(a.container,a.quill.options),e=f.toDelta(),g=e.length()-1,e.compose((new c).retain(g)["delete"](1)),b.start>0&&e.ops.unshift({retain:b.start}),e["delete"](b.end-b.start),a.quill.updateContents(e,"user"),a.quill.setSelection(b.start+g,b.start+g),k=a.quill.editor.doc.findLineAt(b.start+g),h=k[0],j=k[1],i=h.node.getBoundingClientRect().bottom,l=document.documentElement.clientHeight,i>l&&h.node.scrollIntoView(!1),a.container.innerHTML=""}}(this))):void 0},a}(),f.registerModule("paste-manager",e),b.exports=e},{"../core/document":8,"../quill":30}],27:[function(a,b){var c,d,e,f;c=a("../quill"),e=c.require("lodash"),f=c.require("dom"),d=function(){function a(b,c){if(this.quill=b,this.options=c,(e.isString(this.options)||e.isElement(this.options))&&(this.options={container:this.options}),null==this.options.container)throw new Error("container required for toolbar",this.options);this.container=e.isString(this.options.container)?document.querySelector(this.options.container):this.options.container,this.inputs={},this.preventUpdate=!1,this.triggering=!1,e.each(this.quill.options.formats,function(b){return function(c){return null==a.formats.TOOLTIP[c]?b.initFormat(c,function(d,f){return b.triggering?void 0:(d.isCollapsed()?b.quill.prepareFormat(c,f,"user"):null!=a.formats.LINE[c]?b.quill.formatLine(d,c,f,"user"):b.quill.formatText(d,c,f,"user"),e.defer(function(){return b.updateActive(d,["bullet","list"]),b.setActive(c,f)}))}):void 0}}(this)),this.quill.on(this.quill.constructor.events.SELECTION_CHANGE,function(a){return function(b){return null!=b?a.updateActive(b):void 0}}(this)),this.quill.onModuleLoad("keyboard",function(a){return function(b){return b.addHotkey([f.KEYS.BACKSPACE,f.KEYS.DELETE,f.KEYS.ENTER],function(){return e.defer(e.bind(a.updateActive,a))})}}(this)),f(this.container).addClass("ql-toolbar"),f.isIOS()&&f(this.container).addClass("ios"),f.isIE(11)&&f(this.container).on("mousedown",function(){return function(){return!1}}(this))}return a.DEFAULTS={container:null},a.formats={LINE:{align:"align",bullet:"bullet",list:"list"},SELECT:{align:"align",background:"background",color:"color",font:"font",size:"size"},TOGGLE:{bold:"bold",bullet:"bullet",image:"image",italic:"italic",link:"link",list:"list",strike:"strike",underline:"underline"},TOOLTIP:{image:"image",link:"link"}},a.prototype.initFormat=function(b,c){var d,e,g;return g=".ql-"+b,null!=a.formats.SELECT[b]?(g="select"+g,d="change"):d="click",e=this.container.querySelector(g),null!=e?(this.inputs[b]=e,f(e).on(d,function(a){return function(){var b,g;return g="change"===d?f(e).value():!f(e).hasClass("ql-active"),a.preventUpdate=!0,a.quill.focus(),b=a.quill.getSelection(),null!=b&&c(b,g),a.preventUpdate=!1,!0}}(this))):void 0},a.prototype.setActive=function(a,b){var c,d,e,g;return d=this.inputs[a],null!=d?(c=f(d),"SELECT"===d.tagName?(this.triggering=!0,g=c.value(d),null==b&&(b=null!=(e=c["default"]())?e.value:void 0),Array.isArray(b)&&(b=""),b!==g&&(null!=b?c.option(b):c.reset()),this.triggering=!1):c.toggleClass("ql-active",b||!1)):void 0},a.prototype.updateActive=function(a,b){var c;return null==b&&(b=null),a||(a=this.quill.getSelection()),null==a||this.preventUpdate?void 0:(c=this._getActive(a),e.each(this.inputs,function(a){return function(d,e){return(!Array.isArray(b)||b.indexOf(e)>-1)&&a.setActive(e,c[e]),!0}}(this)))},a.prototype._getActive=function(a){var b,c;return b=this._getLeafActive(a),c=this._getLineActive(a),e.defaults({},b,c)},a.prototype._getLeafActive=function(a){var b,c,d,f,g;return a.isCollapsed()?(g=this.quill.editor.doc.findLineAt(a.start),d=g[0],f=g[1],b=0===f?this.quill.getContents(a.start,a.end+1):this.quill.getContents(a.start-1,a.end)):b=this.quill.getContents(a),c=e.map(b.ops,"attributes"),this._intersectFormats(c)},a.prototype._getLineActive=function(a){var b,c,d,f,g,h;for(c=[],g=this.quill.editor.doc.findLineAt(a.start),b=g[0],f=g[1],h=this.quill.editor.doc.findLineAt(a.end),d=h[0],f=h[1],null!=d&&d===b&&(d=d.next);null!=b&&b!==d;)c.push(e.clone(b.formats)),b=b.next;return this._intersectFormats(c)},a.prototype._intersectFormats=function(b){return e.reduce(b.slice(1),function(b,c){var d,f,g,h,i;return null==c&&(c={}),d=Object.keys(b),g=null!=c?Object.keys(c):{},h=e.intersection(d,g),i=e.difference(d,g),f=e.difference(g,d),e.each(h,function(d){if(null!=a.formats.SELECT[d])if(Array.isArray(b[d])){if(b[d].indexOf(c[d])<0)return b[d].push(c[d])}else if(b[d]!==c[d])return b[d]=[b[d],c[d]]}),e.each(i,function(c){return null!=a.formats.TOGGLE[c]?delete b[c]:null==a.formats.SELECT[c]||Array.isArray(b[c])?void 0:b[c]=[b[c]]}),e.each(f,function(d){return null!=a.formats.SELECT[d]?b[d]=[c[d]]:void 0}),b},b[0]||{})},a}(),c.registerModule("toolbar",d),b.exports=d},{"../quill":30}],28:[function(a,b){var c,d,e,f,g;d=a("../quill"),f=d.require("lodash"),g=d.require("dom"),c=d.require("normalizer"),e=function(){function a(b,d){this.quill=b,this.options=d,this.container=this.quill.addContainer("ql-tooltip"),this.container.innerHTML=c.stripWhitespace(this.options.template),g(this.quill.root).on("focus",f.bind(this.hide,this)),this.hide(),this.quill.on(this.quill.constructor.events.TEXT_CHANGE,function(b){return function(c,d){return"user"===d&&b.container.style.left!==a.HIDE_MARGIN?(b.range=null,
b.hide()):void 0}}(this))}return a.DEFAULTS={offset:10,template:""},a.HIDE_MARGIN="-10000px",a.prototype.initTextbox=function(a,b,c){return g(a).on("keyup",function(a){return function(d){switch(d.which){case g.KEYS.ENTER:return b.call(a);case g.KEYS.ESCAPE:return c.call(a);default:return!0}}}(this))},a.prototype.hide=function(){return this.container.style.left=a.HIDE_MARGIN,this.range&&this.quill.setSelection(this.range),this.range=null},a.prototype.position=function(a){var b,c,d,e,f,g,h;return null!=a?(g=a.getBoundingClientRect(),f=this.quill.container.getBoundingClientRect(),d=g.left-f.left,e=g.top-f.top,c=g.bottom-f.bottom,b=d+g.width/2-this.container.offsetWidth/2,h=e+g.height+this.options.offset,h+this.container.offsetHeight>this.quill.container.offsetHeight&&(h=e-this.container.offsetHeight-this.options.offset),b=Math.max(0,Math.min(b,this.quill.container.offsetWidth-this.container.offsetWidth)),h=Math.max(0,Math.min(h,this.quill.container.offsetHeight-this.container.offsetHeight))):(b=this.quill.container.offsetWidth/2-this.container.offsetWidth/2,h=this.quill.container.offsetHeight/2-this.container.offsetHeight/2),h+=this.quill.container.scrollTop,[b,h]},a.prototype.show=function(a){var b,c,d;return this.range=this.quill.getSelection(),c=this.position(a),b=c[0],d=c[1],this.container.style.left=b+"px",this.container.style.top=d+"px",this.container.focus()},a}(),d.registerModule("tooltip",e),b.exports=e},{"../quill":30}],29:[function(a,b){var c,d,e,f;d=a("../quill"),f=d.require("lodash"),c=d.require("delta"),e=function(){function a(a,b){this.quill=a,this.options=null!=b?b:{},this.lastRecorded=0,this.ignoreChange=!1,this.clear(),this.initListeners()}return a.DEFAULTS={delay:1e3,maxStack:100},a.hotkeys={UNDO:{key:"Z",metaKey:!0},REDO:{key:"Z",metaKey:!0,shiftKey:!0}},a.prototype.initListeners=function(){return this.quill.onModuleLoad("keyboard",function(b){return function(c){return c.addHotkey(a.hotkeys.UNDO,function(){return b.quill.editor.checkUpdate(),b.undo(),!1}),c.addHotkey(a.hotkeys.REDO,function(){return b.quill.editor.checkUpdate(),b.redo(),!1})}}(this)),this.quill.on(this.quill.constructor.events.TEXT_CHANGE,function(a){return function(b){return a.ignoreChange?void 0:(a.record(b,a.oldDelta),a.oldDelta=a.quill.getContents())}}(this))},a.prototype.clear=function(){return this.stack={undo:[],redo:[]},this.oldDelta=this.quill.getContents()},a.prototype.record=function(a){var b,c,d,e;if(a.ops.length>0){this.stack.redo=[];try{if(e=this.quill.getContents().diff(this.oldDelta),d=(new Date).getTime(),this.lastRecorded+this.options.delay>d&&this.stack.undo.length>0?(b=this.stack.undo.pop(),e=e.compose(b.undo),a=b.redo.compose(a)):this.lastRecorded=d,this.stack.undo.push({redo:a,undo:e}),this.stack.undo.length>this.options.maxStack)return this.stack.undo.unshift()}catch(f){return c=f,console.warn("Could not record change... clearing undo stack."),this.clear()}}},a.prototype.redo=function(){return this._change("redo","undo")},a.prototype.undo=function(){return this._change("undo","redo")},a.prototype._getLastChangeIndex=function(a){var b,c;return c=0,b=0,f.each(a.ops,function(a){return null!=a.insert?c=Math.max(b+(a.insert.length||1),c):null!=a["delete"]?c=Math.max(b,c):null!=a.retain?(null!=a.attributes&&(c=Math.max(b+a.retain,c)),b+=a.retain):void 0}),c},a.prototype._change=function(a,b){var c,d;return this.stack[a].length>0?(c=this.stack[a].pop(),this.lastRecorded=0,this.ignoreChange=!0,this.quill.updateContents(c[a],"user"),this.ignoreChange=!1,d=this._getLastChangeIndex(c[a]),this.quill.setSelection(d,d),this.oldDelta=this.quill.getContents(),this.stack[b].push(c)):void 0},a}(),d.registerModule("undo-manager",e),b.exports=e},{"../quill":30}],30:[function(a,b){var c,d,e,f,g,h,i,j,k,l,m=function(a,b){function c(){this.constructor=a}for(var d in b)n.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a},n={}.hasOwnProperty,o=[].slice;j=a("lodash"),l=a("../package.json"),c=a("rich-text/lib/delta"),e=a("eventemitter2").EventEmitter2,k=a("./lib/dom"),d=a("./core/editor"),f=a("./core/format"),g=a("./core/normalizer"),i=a("./lib/range"),h=function(a){function b(a,c){var e,f,g;if(this.container=a,null==c&&(c={}),j.isString(this.container)&&(this.container=document.querySelector(this.container)),null==this.container)throw new Error("Invalid Quill container");if(f=j.defaults(c.modules||{},b.DEFAULTS.modules),e=this.container.innerHTML,this.container.innerHTML="",this.options=j.defaults(c,b.DEFAULTS),this.options.modules=f,this.options.id=this.id="ql-editor-"+(b.editors.length+1),this.modules={},this.root=this.addContainer("ql-editor"),this.editor=new d(this.root,this,this.options),b.editors.push(this),this.setHTML(e,b.sources.SILENT),g=b.themes[this.options.theme],null==g)throw new Error("Cannot load "+this.options.theme+" theme. Are you sure you registered it?");this.theme=new g(this,this.options),j.each(this.options.modules,function(a){return function(b,c){return a.addModule(c,b)}}(this))}return m(b,a),b.version=l.version,b.editors=[],b.modules=[],b.themes=[],b.DEFAULTS={formats:["align","bold","italic","strike","underline","color","background","font","size","link","image","bullet","list"],modules:{keyboard:!0,"paste-manager":!0,"undo-manager":!0},pollInterval:100,readOnly:!1,styles:{},theme:"base"},b.events={MODULE_INIT:"module-init",POST_EVENT:"post-event",PRE_EVENT:"pre-event",SELECTION_CHANGE:"selection-change",TEXT_CHANGE:"text-change"},b.sources=d.sources,b.registerModule=function(a,c){return null!=b.modules[a]&&console.warn("Overwriting "+a+" module"),b.modules[a]=c},b.registerTheme=function(a,c){return null!=b.themes[a]&&console.warn("Overwriting "+a+" theme"),b.themes[a]=c},b.require=function(a){switch(a){case"lodash":return j;case"delta":return c;case"normalizer":return g;case"dom":return k;case"range":return i;default:return null}},b.prototype.destroy=function(){var a;return a=this.getHTML(),j.each(this.modules,function(a){return j.isFunction(a.destroy)?a.destroy():void 0}),this.editor.destroy(),this.removeAllListeners(),b.editors.splice(j.indexOf(b.editors,this),1),this.container.innerHTML=a},b.prototype.addContainer=function(a,b){var c,d;return null==b&&(b=!1),d=b?this.root:null,c=document.createElement("div"),k(c).addClass(a),this.container.insertBefore(c,d),c},b.prototype.addFormat=function(a,b){return this.editor.doc.addFormat(a,b)},b.prototype.addModule=function(a,c){var d;if(d=b.modules[a],null==d)throw new Error("Cannot load "+a+" module. Are you sure you registered it?");return c===!0&&(c={}),c=j.defaults(c,this.theme.constructor.OPTIONS[a]||{},d.DEFAULTS||{}),this.modules[a]=new d(this,c),this.emit(b.events.MODULE_INIT,a,this.modules[a]),this.modules[a]},b.prototype.deleteText=function(a,d,e){var f,g,h;return null==e&&(e=b.sources.API),h=this._buildParams(a,d,{},e),a=h[0],d=h[1],g=h[2],e=h[3],d>a?(f=(new c).retain(a)["delete"](d-a),this.editor.applyDelta(f,e)):void 0},b.prototype.emit=function(){var a,c;return c=arguments[0],a=2<=arguments.length?o.call(arguments,1):[],b.__super__.emit.apply(this,[b.events.PRE_EVENT,c].concat(o.call(a))),b.__super__.emit.apply(this,[c].concat(o.call(a))),b.__super__.emit.apply(this,[b.events.POST_EVENT,c].concat(o.call(a)))},b.prototype.focus=function(){return this.editor.focus()},b.prototype.formatLine=function(a,b,c,d,e){var f,g,h,i,j;return i=this._buildParams(a,b,c,d,e),a=i[0],b=i[1],f=i[2],e=i[3],j=this.editor.doc.findLineAt(b),g=j[0],h=j[1],null!=g&&(b+=g.length-h),this.formatText(a,b,f,e)},b.prototype.formatText=function(a,b,d,e,f){var g,h,i;return i=this._buildParams(a,b,d,e,f),a=i[0],b=i[1],h=i[2],f=i[3],h=j.reduce(h,function(a){return function(b,c,d){var e;return e=a.editor.doc.formats[d],c&&c!==e.config["default"]||(b[d]=null),b}}(this),h),g=(new c).retain(a).retain(b-a,h),this.editor.applyDelta(g,f)},b.prototype.getBounds=function(a){return this.editor.getBounds(a)},b.prototype.getContents=function(a,b){return null==a&&(a=0),null==b&&(b=null),j.isObject(a)&&(b=a.end,a=a.start),this.editor.delta.slice(a,b)},b.prototype.getHTML=function(){return this.editor.doc.getHTML()},b.prototype.getLength=function(){return this.editor.length},b.prototype.getModule=function(a){return this.modules[a]},b.prototype.getSelection=function(){return this.editor.checkUpdate(),this.editor.selection.getRange()},b.prototype.getText=function(a,b){return null==a&&(a=0),null==b&&(b=null),j.map(this.getContents(a,b).ops,function(a){return j.isString(a.insert)?a.insert:""}).join("")},b.prototype.insertEmbed=function(a,b,c,d){return this.insertText(a,k.EMBED_TEXT,b,c,d)},b.prototype.insertText=function(a,b,d,e,f){var g,h,i,j;return j=this._buildParams(a,0,d,e,f),a=j[0],h=j[1],i=j[2],f=j[3],b.length>0?(g=(new c).retain(a).insert(b,i),this.editor.applyDelta(g,f)):void 0},b.prototype.onModuleLoad=function(a,c){return this.modules[a]?c(this.modules[a]):this.on(b.events.MODULE_INIT,function(b,d){return b===a?c(d):void 0})},b.prototype.prepareFormat=function(a,c,d){var e,g;return null==d&&(d=b.sources.API),e=this.editor.doc.formats[a],null!=e&&(g=this.getSelection(),null!=g?g.isCollapsed():void 0)?e.isType(f.types.LINE)?this.formatLine(g,a,c,d):e.prepare(c):void 0},b.prototype.setContents=function(a,c){return null==c&&(c=b.sources.API),a=Array.isArray(a)?{ops:a.slice()}:{ops:a.ops.slice()},a.ops.push({"delete":this.getLength()}),this.updateContents(a,c)},b.prototype.setHTML=function(a,c){return null==c&&(c=b.sources.API),a.trim()||(a="<"+k.DEFAULT_BLOCK_TAG+"><"+k.DEFAULT_BREAK_TAG+"></"+k.DEFAULT_BLOCK_TAG+">"),this.editor.doc.setHTML(a),this.editor.checkUpdate(c)},b.prototype.setSelection=function(a,c,d){var e;return null==d&&(d=b.sources.API),j.isNumber(a)&&j.isNumber(c)?e=new i(a,c):(e=a,d=c||d),this.editor.selection.setRange(e,d)},b.prototype.setText=function(a,d){var e;return null==d&&(d=b.sources.API),e=(new c).insert(a),this.setContents(e,d)},b.prototype.updateContents=function(a,c){return null==c&&(c=b.sources.API),Array.isArray(a)&&(a={ops:a}),this.editor.applyDelta(a,c)},b.prototype._buildParams=function(){var a,c;return c=1<=arguments.length?o.call(arguments,0):[],j.isObject(c[0])&&c.splice(0,1,c[0].start,c[0].end),j.isString(c[2])&&(a={},a[c[2]]=c[3],c.splice(2,2,a)),null==c[3]&&(c[3]=b.sources.API),c},b}(e),h.registerTheme("base",a("./themes/base")),h.registerTheme("snow",a("./themes/snow")),b.exports=h},{"../package.json":7,"./core/editor":9,"./core/format":10,"./core/normalizer":13,"./lib/dom":17,"./lib/range":20,"./themes/base":32,"./themes/snow":33,eventemitter2:2,lodash:1,"rich-text/lib/delta":3}],31:[function(a,b){b.exports='.ql-image-tooltip{padding:10px;width:300px}.ql-image-tooltip:after{clear:both;content:"";display:table}.ql-image-tooltip a{border:1px solid #000;box-sizing:border-box;display:inline-block;float:left;padding:5px;text-align:center;width:50%}.ql-image-tooltip img{bottom:0;left:0;margin:auto;max-height:100%;max-width:100%;position:absolute;right:0;top:0}.ql-image-tooltip .input{box-sizing:border-box;width:100%}.ql-image-tooltip .preview{margin:10px 0;position:relative;border:1px dashed #000;height:200px}.ql-image-tooltip .preview span{display:inline-block;position:absolute;text-align:center;top:40%;width:100%}.ql-link-tooltip{padding:5px 10px}.ql-link-tooltip input.input{width:170px}.ql-link-tooltip a.done,.ql-link-tooltip input.input{display:none}.ql-link-tooltip a.change{margin-right:4px}.ql-link-tooltip.editing a.done,.ql-link-tooltip.editing input.input{display:inline-block}.ql-link-tooltip.editing a.change,.ql-link-tooltip.editing a.remove,.ql-link-tooltip.editing a.url{display:none}.ql-multi-cursor{position:absolute;left:0;top:0;z-index:1000}.ql-multi-cursor .cursor{margin-left:-1px;position:absolute}.ql-multi-cursor .cursor-flag{bottom:100%;position:absolute;white-space:nowrap}.ql-multi-cursor .cursor-name{display:inline-block;color:#fff;padding:2px 8px}.ql-multi-cursor .cursor-caret{height:100%;position:absolute;width:2px}.ql-multi-cursor .cursor.hidden .cursor-flag{display:none}.ql-multi-cursor .cursor.top .cursor-flag{bottom:auto;top:100%}.ql-multi-cursor .cursor.right .cursor-flag{right:-2px}.ql-paste-manager{left:-100000px;position:absolute;top:50%}.ql-toolbar{box-sizing:border-box}.ql-tooltip{background-color:#fff;border:1px solid #000;box-sizing:border-box;position:absolute;top:0;white-space:nowrap;z-index:2000}.ql-tooltip a{cursor:pointer;text-decoration:none}.ql-container{box-sizing:border-box;cursor:text;font-family:Helvetica,Arial,sans-serif;font-size:13px;height:100%;line-height:1.42;margin:0;overflow-x:hidden;overflow-y:auto;padding:12px 15px;position:relative}.ql-editor{box-sizing:border-box;min-height:100%;outline:0;tab-size:4;white-space:pre-wrap}.ql-editor div{margin:0;padding:0}.ql-editor a{text-decoration:underline}.ql-editor b{font-weight:700}.ql-editor i{font-style:italic}.ql-editor s{text-decoration:line-through}.ql-editor u{text-decoration:underline}.ql-editor img{max-width:100%}.ql-editor blockquote,.ql-editor ol,.ql-editor ul{margin:0 0 0 2em;padding:0}.ql-editor ol{list-style-type:decimal}.ql-editor ul{list-style-type:disc}.ql-editor.ql-ie-10 br,.ql-editor.ql-ie-9 br{display:none}'},{}],32:[function(a,b){var c,d,e,f;d=a("lodash"),f=a("../../lib/dom"),e=a("./base.styl"),c=function(){function a(b,c){var d;this.quill=b,this.options=c,f(this.quill.container).addClass("ql-container"),this.options.styles&&this.addStyles(e+a.objToCss(this.options.styles)),f.isIE(10)&&(d=f.isIE(9)?"9":"10",f(this.quill.root).addClass("ql-ie-"+d))}return a.OPTIONS={},a.objToCss=function(a){return d.map(a,function(a,b){var c;return c=d.map(a,function(a,b){return b+": "+a+";"}).join(" "),b+" { "+c+" }"}).join("\n")},a.prototype.addStyles=function(b){var c;return d.isObject(b)&&(b=a.objToCss(b)),c=document.createElement("style"),c.type="text/css",c.appendChild(document.createTextNode(b)),document.head.appendChild(c)},a}(),b.exports=c},{"../../lib/dom":17,"./base.styl":31,lodash:1}],33:[function(a,b){var c,d,e,f,g,h,i=function(a,b){function c(){this.constructor=a}for(var d in b)j.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a},j={}.hasOwnProperty;g=a("lodash"),d=a("../../lib/color-picker"),c=a("../base"),h=a("../../lib/dom"),e=a("../../lib/picker"),f=function(a){function b(a,c){this.quill=a,this.options=c,b.__super__.constructor.apply(this,arguments),h(this.quill.container).addClass("ql-snow"),this.pickers=[],this.quill.on(this.quill.constructor.events.SELECTION_CHANGE,function(a){return function(b){return null!=b?g.invoke(a.pickers,"close"):void 0}}(this)),this.quill.onModuleLoad("multi-cursor",g.bind(this.extendMultiCursor,this)),this.quill.onModuleLoad("toolbar",g.bind(this.extendToolbar,this))}return i(b,a),b.COLORS=["#000000","#e60000","#ff9900","#ffff00","#008A00","#0066cc","#9933ff","#ffffff","#facccc","#ffebcc","#ffffcc","#cce8cc","#cce0f5","#ebd6ff","#bbbbbb","#f06666","#ffc266","#ffff66","#66b966","#66a3e0","#c285ff","#888888","#a10000","#b26b00","#b2b200","#006100","#0047b2","#6b24b2","#444444","#5c0000","#663d00","#666600","#003700","#002966","#3d1466"],b.OPTIONS={"multi-cursor":{template:'<span class="cursor-flag"> <span class="cursor-triangle top"></span> <span class="cursor-name"></span> <span class="cursor-triangle bottom"></span> </span> <span class="cursor-caret"></span>'}},b.prototype.extendMultiCursor=function(a){return a.on(a.constructor.events.CURSOR_ADDED,function(a){var b,c;return b=a.elem.querySelector(".cursor-triangle.bottom"),c=a.elem.querySelector(".cursor-triangle.top"),b.style.borderTopColor=c.style.borderBottomColor=a.color})},b.prototype.extendToolbar=function(a){return h(a.container).addClass("ql-snow"),g.each(["color","background","font","size","align"],function(b){return function(c){var f,i;if(i=a.container.querySelector(".ql-"+c),null!=i){switch(c){case"font":case"size":case"align":f=new e(i);break;case"color":case"background":f=new d(i),g.each(f.container.querySelectorAll(".ql-picker-item"),function(a,b){return 7>b?h(a).addClass("ql-primary-color"):void 0})}return null!=f?b.pickers.push(f):void 0}}}(this)),g.each(h(a.container).textNodes(),function(a){return 0===h(a).text().trim().length?h(a).remove():void 0})},b}(c),b.exports=f},{"../../lib/color-picker":16,"../../lib/dom":17,"../../lib/picker":19,"../base":32,lodash:1}]},{},[15])(15)});
/*!
 * @copyright Copyright &copy; Kartik Visweswaran, Krajee.com, 2014 - 2015
 * @version 4.1.8
 *
 * File input styled for Bootstrap 3.0 that utilizes HTML5 File Input's advanced 
 * features including the FileReader API. 
 * 
 * The plugin drastically enhances the HTML file input to preview multiple files on the client before
 * upload. In addition it provides the ability to preview content of images, text, videos, audio, html, 
 * flash and other objects. It also offers the ability to upload and delete files using AJAX, and add 
 * files in batches (i.e. preview, append, or remove before upload).
 * 
 * Author: Kartik Visweswaran
 * Copyright: 2015, Kartik Visweswaran, Krajee.com
 * For more JQuery plugins visit http://plugins.krajee.com
 * For more Yii related demos visit http://demos.krajee.com
 */!function(e){"use strict";String.prototype.repl=function(e,i){return this.split(e).join(i)};var i=function(e){var i,t=document.createElement("div");return t.innerHTML="<!--[if IE "+e+"]><i></i><![endif]-->",i=1===t.getElementsByTagName("i").length,document.body.appendChild(t),t.parentNode.removeChild(t),i},t={data:{},init:function(e){var i=e.initialPreview,a=e.id;i.length>0&&!B(i)&&(i=i.split(e.initialPreviewDelimiter)),t.data[a]={content:i,config:e.initialPreviewConfig,tags:e.initialPreviewThumbTags,delimiter:e.initialPreviewDelimiter,template:e.previewGenericTemplate,msg:e.msgSelected,initId:e.previewInitId,footer:e.getLayoutTemplate("footer"),isDelete:e.initialPreviewShowDelete,caption:e.initialCaption,actions:function(i,t,a,r,n,l){return e.renderFileActions(i,t,a,r,n,l)}}},fetch:function(e){return t.data[e].content.filter(function(e){return void 0!==e})},count:function(e){return t.data[e]&&t.data[e].content?t.fetch(e).length:0},get:function(e,i,a){var r,n="init_"+i,l=t.data[e],o=l.initId+"-"+n;return a=void 0===a?!0:a,void 0===l.content[i]?"":(r=l.template.repl("{previewId}",o).repl("{frameClass}"," file-preview-initial").repl("{fileindex}",n).repl("{content}",l.content[i]).repl("{footer}",t.footer(e,i,a)),l.tags.length&&l.tags[i]&&(r=q(r,l.tags[i])),r)},add:function(i,a,r,n){var l,o=e.extend(!0,{},t.data[i]);return B(a)||(a=a.split(o.delimiter)),n?(l=o.content.push(a)-1,o.config[l]=r):(l=a.length,o.content=a,o.config=r),t.data[i]=o,l},set:function(i,a,r,n,l){var o,s=e.extend(!0,{},t.data[i]);if(B(a)||(a=a.split(s.delimiter)),l){for(o=0;o<a.length;o++)s.content.push(a[o]);for(o=0;o<r.length;o++)s.config.push(r[o]);for(o=0;o<n.length;o++)s.tags.push(n[o])}else s.content=a,s.config=r,s.tags=n;t.data[i]=s},unset:function(e,i){var a=t.count(e);if(a){if(1===a)return t.data[e].content=[],void(t.data[e].config=[]);t.data[e].content[i]=void 0,t.data[e].config[i]=void 0}},out:function(e){var i,a="",r=t.data[e],n=t.count(e);if(0===n)return{content:"",caption:""};for(var l=0;n>l;l++)a+=t.get(e,l);return i=r.msg.repl("{n}",n),{content:a,caption:i}},footer:function(e,i,a){var r=t.data[e];if(a=void 0===a?!0:a,0===r.config.length||z(r.config[i]))return"";var n=r.config[i],l=N("caption",n)?n.caption:"",o=N("width",n)?n.width:"auto",s=N("url",n)?n.url:!1,d=N("key",n)?n.key:null,p=s===!1&&a,c=r.isDelete?r.actions(!1,!0,p,s,d,i):"",f=r.footer.repl("{actions}",c);return f.repl("{caption}",l).repl("{width}",o).repl("{indicator}","").repl("{indicatorTitle}","")}},a=".file-preview-frame:not(.file-preview-initial)",r=function(e,i){return i=i||0,"number"==typeof e?e:("string"==typeof e&&(e=parseFloat(e)),isNaN(e)?i:e)},n=function(){return window.File&&window.FileReader},l=function(){var e=document.createElement("div");return!i(9)&&(void 0!==e.draggable||void 0!==e.ondragstart&&void 0!==e.ondrop)},o=function(){return n&&window.FormData},s=function(e,i){e.removeClass(i).addClass(i)},d='style="width:{width};height:{height};"',p='      <param name="controller" value="true" />\n      <param name="allowFullScreen" value="true" />\n      <param name="allowScriptAccess" value="always" />\n      <param name="autoPlay" value="false" />\n      <param name="autoStart" value="false" />\n      <param name="quality" value="high" />\n',c='<div class="file-preview-other">\n       {previewFileIcon}\n   </div>',f={removeIcon:'<i class="glyphicon glyphicon-trash text-danger"></i>',removeClass:"btn btn-xs btn-default",removeTitle:"Remove file",uploadIcon:'<i class="glyphicon glyphicon-upload text-info"></i>',uploadClass:"btn btn-xs btn-default",uploadTitle:"Upload file",indicatorNew:'<i class="glyphicon glyphicon-hand-down text-warning"></i>',indicatorSuccess:'<i class="glyphicon glyphicon-ok-sign file-icon-large text-success"></i>',indicatorError:'<i class="glyphicon glyphicon-exclamation-sign text-danger"></i>',indicatorLoading:'<i class="glyphicon glyphicon-hand-up text-muted"></i>',indicatorNewTitle:"Not uploaded yet",indicatorSuccessTitle:"Uploaded",indicatorErrorTitle:"Upload Error",indicatorLoadingTitle:"Uploading ..."},u='{preview}\n<div class="kv-upload-progress hide"></div>\n<div class="input-group {class}">\n   {caption}\n   <div class="input-group-btn">\n       {remove}\n       {cancel}\n       {upload}\n       {browse}\n   </div>\n</div>',v='{preview}\n<div class="kv-upload-progress hide"></div>\n{remove}\n{cancel}\n{upload}\n{browse}\n',h='<div class="file-preview {class}">\n    <div class="close fileinput-remove">&times;</div>\n    <div class="{dropClass}">\n    <div class="file-preview-thumbnails">\n    </div>\n    <div class="clearfix"></div>    <div class="file-preview-status text-center text-success"></div>\n    <div class="kv-fileinput-error"></div>\n    </div>\n</div>',m='<span class="glyphicon glyphicon-file kv-caption-icon"></span>',g='<div tabindex="-1" class="form-control file-caption {class}">\n   <span class="file-caption-ellipsis">&hellip;</span>\n   <div class="file-caption-name"></div>\n</div>',w='<div id="{id}" class="modal fade">\n  <div class="modal-dialog modal-lg">\n    <div class="modal-content">\n      <div class="modal-header">\n        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>\n        <h3 class="modal-title">Detailed Preview <small>{title}</small></h3>\n      </div>\n      <div class="modal-body">\n        <textarea class="form-control" style="font-family:Monaco,Consolas,monospace; height: {height}px;" readonly>{body}</textarea>\n      </div>\n    </div>\n  </div>\n</div>',b='<div class="progress">\n    <div class="{class}" role="progressbar" aria-valuenow="{percent}" aria-valuemin="0" aria-valuemax="100" style="width:{percent}%;">\n        {percent}%\n     </div>\n</div>',x='<div class="file-thumbnail-footer">\n    <div class="file-caption-name">{caption}</div>\n    {actions}\n</div>',C='<div class="file-actions">\n    <div class="file-footer-buttons">\n        {upload}{delete}{other}    </div>\n    <div class="file-upload-indicator" tabindex="-1" title="{indicatorTitle}">{indicator}</div>\n    <div class="clearfix"></div>\n</div>',y='<button type="button" class="kv-file-remove {removeClass}" title="{removeTitle}"{dataUrl}{dataKey}>{removeIcon}</button>\n',E='<button type="button" class="kv-file-upload {uploadClass}" title="{uploadTitle}">   {uploadIcon}\n</button>\n',$='<div class="file-preview-frame{frameClass}" id="{previewId}" data-fileindex="{fileindex}">\n   {content}\n   {footer}\n</div>\n',T='<div class="file-preview-frame{frameClass}" id="{previewId}" data-fileindex="{fileindex}">\n    <object data="{data}" type="{type}" width="{width}" height="{height}">\n       '+c+"\n    </object>\n   {footer}\n</div>",F='<div class="file-preview-frame{frameClass}" id="{previewId}" data-fileindex="{fileindex}">\n   <img src="{data}" class="file-preview-image" title="{caption}" alt="{caption}" '+d+">\n   {footer}\n</div>\n",k='<div class="file-preview-frame{frameClass}" id="{previewId}" data-fileindex="{fileindex}">\n   <div class="file-preview-text" title="{caption}" '+d+">\n       {data}\n   </div>\n   {footer}\n</div>",D='<div class="file-preview-frame{frameClass}" id="{previewId}" data-fileindex="{fileindex}" title="{caption}" '+d+'>\n   <video width="{width}" height="{height}" controls>\n       <source src="{data}" type="{type}">\n       '+c+"\n   </video>\n   {footer}\n</div>\n",I='<div class="file-preview-frame{frameClass}" id="{previewId}" data-fileindex="{fileindex}" title="{caption}" '+d+'>\n   <audio controls>\n       <source src="{data}" type="{type}">\n       '+c+"\n   </audio>\n   {footer}\n</div>",P='<div class="file-preview-frame{frameClass}" id="{previewId}" data-fileindex="{fileindex}" title="{caption}" '+d+'>\n   <object type="application/x-shockwave-flash" width="{width}" height="{height}" data="{data}">\n'+p+"       "+c+"\n   </object>\n   {footer}\n</div>\n",S='<div class="file-preview-frame{frameClass}" id="{previewId}" data-fileindex="{fileindex}" title="{caption}" '+d+'>\n   <object data="{data}" type="{type}" width="{width}" height="{height}">\n       <param name="movie" value="{caption}" />\n'+p+"         "+c+"\n   </object>\n   {footer}\n</div>",U='<div class="file-preview-frame{frameClass}" id="{previewId}" data-fileindex="{fileindex}" title="{caption}" '+d+">\n   "+c+"\n   {footer}\n</div>",j={main1:u,main2:v,preview:h,icon:m,caption:g,modal:w,progress:b,footer:x,actions:C,actionDelete:y,actionUpload:E},A={generic:$,html:T,image:F,text:k,video:D,audio:I,flash:P,object:S,other:U},L=["image","html","text","video","audio","flash","object"],O={image:{width:"auto",height:"160px"},html:{width:"213px",height:"160px"},text:{width:"160px",height:"160px"},video:{width:"213px",height:"160px"},audio:{width:"213px",height:"80px"},flash:{width:"213px",height:"160px"},object:{width:"160px",height:"160px"},other:{width:"160px",height:"160px"}},R={image:function(e,i){return void 0!==e?e.match("image.*"):i.match(/\.(gif|png|jpe?g)$/i)},html:function(e,i){return void 0!==e?"text/html"===e:i.match(/\.(htm|html)$/i)},text:function(e,i){return void 0!==e&&e.match("text.*")||i.match(/\.(txt|md|csv|nfo|php|ini)$/i)},video:function(e,i){return void 0!==e&&e.match(/\.video\/(ogg|mp4|webm)$/i)||i.match(/\.(og?|mp4|webm)$/i)},audio:function(e,i){return void 0!==e&&e.match(/\.audio\/(ogg|mp3|wav)$/i)||i.match(/\.(ogg|mp3|wav)$/i)},flash:function(e,i){return void 0!==e&&"application/x-shockwave-flash"===e||i.match(/\.(swf)$/i)},object:function(){return!0},other:function(){return!0}},z=function(i,t){return null===i||void 0===i||0===i.length||t&&""===e.trim(i)},B=function(e){return Array.isArray(e)||"[object Array]"===Object.prototype.toString.call(e)},N=function(e,i){return"object"==typeof i&&e in i},M=function(i,t,a){return z(i)||z(i[t])?a:e(i[t])},Z=function(){return Math.round((new Date).getTime()+100*Math.random())},_=function(e){return String(e).repl("&","&amp;").repl('"',"&quot;").repl("'","&#39;").repl("<","&lt;").repl(">","&gt;")},q=function(i,t){var a=i;return t=t||{},e.each(t,function(e,i){"function"==typeof i&&(i=i()),a=a.repl(e,i)}),a},H=window.URL||window.webkitURL,V=function(t,a){this.$element=e(t),n()||i(9)?(this.init(a),this.listen()):this.$element.removeClass("file-loading")};V.prototype={constructor:V,init:function(a){var n,d=this,p=d.$element;e.each(a,function(e,i){("maxFileCount"===e||"maxFileSize"===e)&&(d[e]=r(i)),d[e]=i}),d.fileInputCleared=!1,d.fileBatchCompleted=!0,z(d.allowedPreviewTypes)&&(d.allowedPreviewTypes=L),d.uploadFileAttr=z(p.attr("name"))?"file_data":p.attr("name"),d.reader=null,d.formdata={},d.isIE9=i(9),d.isIE10=i(10),d.filestack=[],d.ajaxRequests=[],d.isError=!1,d.uploadAborted=!1,d.dropZoneEnabled=l()&&d.dropZoneEnabled,d.isDisabled=d.$element.attr("disabled")||d.$element.attr("readonly"),d.isUploadable=o&&!z(d.uploadUrl),d.slug="function"==typeof a.slugCallback?a.slugCallback:d.slugDefault,d.mainTemplate=d.getLayoutTemplate(d.showCaption?"main1":"main2"),d.captionTemplate=d.getLayoutTemplate("caption"),d.previewGenericTemplate=d.getPreviewTemplate("generic"),z(d.$element.attr("id"))&&d.$element.attr("id",Z()),void 0===d.$container?d.$container=d.createContainer():d.refreshContainer(),d.$progress=d.$container.find(".kv-upload-progress"),d.$btnUpload=d.$container.find(".kv-fileinput-upload"),d.$captionContainer=M(a,"elCaptionContainer",d.$container.find(".file-caption")),d.$caption=M(a,"elCaptionText",d.$container.find(".file-caption-name")),d.$previewContainer=M(a,"elPreviewContainer",d.$container.find(".file-preview")),d.$preview=M(a,"elPreviewImage",d.$container.find(".file-preview-thumbnails")),d.$previewStatus=M(a,"elPreviewStatus",d.$container.find(".file-preview-status")),d.$errorContainer=M(a,"elErrorContainer",d.$previewContainer.find(".kv-fileinput-error")),z(d.msgErrorClass)||s(d.$errorContainer,d.msgErrorClass),d.$errorContainer.hide(),d.fileActionSettings=e.extend(f,a.fileActionSettings),d.previewInitId="preview-"+Z(),d.id=d.$element.attr("id"),t.init(d),d.initPreview(!0),d.initPreviewDeletes(),d.options=a,d.setFileDropZoneTitle(),d.uploadCount=0,d.uploadPercent=0,d.$element.removeClass("file-loading"),n=d.getLayoutTemplate("progress"),d.progressTemplate=n.replace("{class}",d.progressClass),d.progressCompleteTemplate=n.replace("{class}",d.progressCompleteClass),d.setEllipsis()},parseError:function(i,t,a){var r=this,n=e.trim(t+""),l="."===n.slice(-1)?"":".",o=e(i.responseText).text();return r.showAjaxErrorDetails?(o=e.trim(o.replace(/\n\s*\n/g,"\n")),o=o.length>0?"<pre>"+o+"</pre>":"",n+=l+o):n+=l,a?"<b>"+a+": </b>"+i:n},raise:function(i,t){var a,r=this,n=e.Event(i);if(void 0!==t?r.$element.trigger(n,t):r.$element.trigger(n),a=n.result||!1)switch(i){case"filebatchuploadcomplete":case"filebatchuploadsuccess":case"fileuploaded":case"fileclear":case"filecleared":case"filereset":case"fileerror":case"filefoldererror":case"fileuploaderror":case"filebatchuploaderror":case"filedeleteerror":case"filecustomerror":break;default:r.uploadAborted=a}},getLayoutTemplate:function(e){var i=this,t=N(e,i.layoutTemplates)?i.layoutTemplates[e]:j[e];return z(i.customLayoutTags)?t:q(t,i.customLayoutTags)},getPreviewTemplate:function(e){var i=this,t=N(e,i.previewTemplates)?i.previewTemplates[e]:A[e];return t=t.repl("{previewFileIcon}",i.previewFileIcon),z(i.customPreviewTags)?t:q(t,i.customPreviewTags)},getOutData:function(e,i,t){var a=this;return e=e||{},i=i||{},t=t||a.filestack.slice(0)||{},{form:a.formdata,files:t,extra:a.getExtraData(),response:i,reader:a.reader,jqXHR:e}},setEllipsis:function(){var e=this,i=e.$captionContainer,t=e.$caption,a=t.clone().css("height","auto").hide();i.parent().before(a),i.removeClass("kv-has-ellipsis"),a.outerWidth()>t.outerWidth()&&i.addClass("kv-has-ellipsis"),a.remove()},listen:function(){var i=this,t=i.$element,a=i.$captionContainer,r=i.$btnFile,n=t.closest("form");t.on("change",e.proxy(i.change,i)),e(window).on("resize",function(){i.setEllipsis()}),r.off("click").on("click",function(){i.raise("filebrowse"),i.isError&&!i.isUploadable&&i.clear(),a.focus()}),n.off("reset").on("reset",e.proxy(i.reset,i)),i.$container.off("click").on("click",".fileinput-remove:not([disabled])",e.proxy(i.clear,i)).on("click",".fileinput-cancel",e.proxy(i.cancel,i)),i.isUploadable&&i.dropZoneEnabled&&i.showPreview&&i.initDragDrop(),i.isUploadable||n.on("submit",e.proxy(i.submitForm,i)),i.$container.find(".kv-fileinput-upload").off("click").on("click",function(t){i.isUploadable&&(t.preventDefault(),!e(this).hasClass("disabled")&&z(e(this).attr("disabled"))&&i.upload())})},submitForm:function(){var e=this,i=e.$element,t=i.get(0).files;return t&&t.length<e.minFileCount&&e.minFileCount>0?(e.noFilesError({}),!1):!e.abort({})},abort:function(i){var t,a=this;return a.uploadAborted&&"object"==typeof a.uploadAborted&&void 0!==a.uploadAborted.message?(t=void 0!==a.uploadAborted.data?a.getOutData({},a.uploadAborted.data):a.getOutData(),t=e.extend(t,i),a.showUploadError(a.uploadAborted.message,t,"filecustomerror"),!0):!1},noFilesError:function(e){var i=this,t=i.minFileCount>1?i.filePlural:i.fileSingle,a=i.msgFilesTooLess.repl("{n}",i.minFileCount).repl("{files}",t),r=i.$errorContainer;r.html(a),i.isError=!0,i.updateFileDetails(0),r.fadeIn(800),i.raise("fileerror",[e]),i.clearFileInput(),s(i.$container,"has-error")},setProgress:function(e){var i=this,t=Math.min(e,100),a=100>t?i.progressTemplate:i.progressCompleteTemplate;i.$progress.html(a.repl("{percent}",t))},upload:function(){var i,t,a,r=this,n=r.getFileStack().length,l={},o=!e.isEmptyObject(r.getExtraData());if(n<r.minFileCount&&r.minFileCount>0)return void r.noFilesError(l);if(r.isUploadable&&!r.isDisabled&&(0!==n||o)){if(r.resetUpload(),r.$progress.removeClass("hide"),r.uploadCount=0,r.uploadPercent=0,r.lock(),r.setProgress(0),0===n&&o)return void r.uploadExtraOnly();if(a=r.filestack.length,r.hasInitData=!1,r.uploadAsync&&r.showPreview)for(t=r.getOutData(),r.raise("filebatchpreupload",[t]),r.fileBatchCompleted=!1,r.uploadCache={content:[],config:[],tags:[],append:!0},i=0;a>i;i+=1)void 0!==r.filestack[i]&&r.uploadSingle(i,r.filestack,!0);else r.uploadBatch()}},lock:function(){var e=this;e.resetErrors(),e.disable(),e.showRemove&&s(e.$container.find(".fileinput-remove"),"hide"),e.showCancel&&e.$container.find(".fileinput-cancel").removeClass("hide"),e.raise("filelock",[e.filestack,e.getExtraData()])},unlock:function(e){var i=this;void 0===e&&(e=!0),i.enable(),i.showCancel&&s(i.$container.find(".fileinput-cancel"),"hide"),i.showRemove&&i.$container.find(".fileinput-remove").removeClass("hide"),e&&i.resetFileStack(),i.raise("fileunlock",[i.filestack,i.getExtraData()])},resetFileStack:function(){var i=this,t=0,r=[];i.$preview.find(a).each(function(){var a=e(this),n=a.attr("data-fileindex"),l=i.filestack[n];-1!==n&&(void 0!==l?(r[t]=l,a.attr({id:i.previewInitId+"-"+t,"data-fileindex":t}),t+=1):a.attr({id:"uploaded-"+Z(),"data-fileindex":"-1"}))}),i.filestack=r},refresh:function(i){var t,a=this,r=a.$element,n=arguments.length?e.extend(a.options,i):a.options;r.off(),a.init(n),t=a.$container.find(".file-drop-zone"),t.off("dragenter dragover drop"),e(document).off("dragenter dragover drop"),a.listen(),a.setFileDropZoneTitle()},initDragDrop:function(){var i=this,t=i.$container.find(".file-drop-zone");t.off("dragenter dragover drop"),e(document).off("dragenter dragover drop"),t.on("dragenter dragover",function(t){t.stopPropagation(),t.preventDefault(),i.isDisabled||s(e(this),"highlighted")}),t.on("dragleave",function(t){t.stopPropagation(),t.preventDefault(),i.isDisabled||e(this).removeClass("highlighted")}),t.on("drop",function(t){t.preventDefault(),i.isDisabled||(i.change(t,"dragdrop"),e(this).removeClass("highlighted"))}),e(document).on("dragenter dragover drop",function(e){e.stopPropagation(),e.preventDefault()})},setFileDropZoneTitle:function(){var e=this,i=e.$container.find(".file-drop-zone");i.find("."+e.dropZoneTitleClass).remove(),e.isUploadable&&e.showPreview&&0!==i.length&&!(e.getFileStack().length>0)&&e.dropZoneEnabled&&(0===i.find(".file-preview-frame").length&&i.prepend('<div class="'+e.dropZoneTitleClass+'">'+e.dropZoneTitle+"</div>"),e.$container.removeClass("file-input-new"),s(e.$container,"file-input-ajax-new"))},initFileActions:function(){var i=this;i.$preview.find(".kv-file-remove").each(function(){var a,r,n=e(this),l=n.closest(".file-preview-frame"),o=l.attr("data-fileindex");n.off("click").on("click",function(){l.fadeOut("slow",function(){i.filestack[o]=void 0,i.clearObjects(l),l.remove();var e=i.getFileStack(),n=e.length,s=t.count(i.id);i.clearFileInput(),0===n&&0===s?i.reset():(a=s+n,r=a>1?i.msgSelected.repl("{n}",a):e[0].name,i.setCaption(r))})})}),i.$preview.find(".kv-file-upload").each(function(){var t=e(this);t.off("click").on("click",function(){var e=t.closest(".file-preview-frame"),a=e.attr("data-fileindex");i.uploadSingle(a,i.filestack,!1)})})},renderFileFooter:function(e,i){var t,a,r=this,n=r.fileActionSettings,l=r.getLayoutTemplate("footer");return r.isUploadable?(t=l.repl("{actions}",r.renderFileActions(!0,!0,!1,!1,!1,!1)),a=t.repl("{caption}",e).repl("{width}",i).repl("{indicator}",n.indicatorNew).repl("{indicatorTitle}",n.indicatorNewTitle)):a=l.repl("{actions}","").repl("{caption}",e).repl("{width}",i).repl("{indicator}","").repl("{indicatorTitle}",""),a=q(a,r.previewThumbTags)},renderFileActions:function(e,i,t,a,r){if(!e&&!i)return"";var n=this,l=a===!1?"":' data-url="'+a+'"',o=r===!1?"":' data-key="'+r+'"',s=n.getLayoutTemplate("actionDelete"),d="",p=n.getLayoutTemplate("actions"),c=n.otherActionButtons.repl("{dataKey}",o),f=n.fileActionSettings,u=t?f.removeClass+" disabled":f.removeClass;return s=s.repl("{removeClass}",u).repl("{removeIcon}",f.removeIcon).repl("{removeTitle}",f.removeTitle).repl("{dataUrl}",l).repl("{dataKey}",o),e&&(d=n.getLayoutTemplate("actionUpload").repl("{uploadClass}",f.uploadClass).repl("{uploadIcon}",f.uploadIcon).repl("{uploadTitle}",f.uploadTitle)),p.repl("{delete}",s).repl("{upload}",d).repl("{other}",c)},initPreview:function(e){var i,a,r=this;return t.count(r.id)?(a=t.out(r.id),i=e&&r.initialCaption?r.initialCaption:a.caption,r.$preview.html(a.content),r.setCaption(i),void(z(a.content)||r.$container.removeClass("file-input-new"))):(r.$preview.html(""),void r.setCaption(""))},initPreviewDeletes:function(){var i=this,a=i.deleteExtraData||{},r=function(){0===i.$preview.find(".kv-file-remove").length&&i.reset()};i.$preview.find(".kv-file-remove").each(function(){var n,l,o,d,p=e(this),c=p.closest(".file-preview-frame"),f=t.data[i.id],u=p.data("url")||i.deleteUrl,v=p.data("key"),h={id:p.attr("id"),key:v,extra:o};"function"==typeof o&&(o=o()),void 0!==u&&void 0!==v&&(d=e.extend({url:u,type:"DELETE",dataType:"json",data:e.extend({key:v},o),beforeSend:function(e){s(c,"file-uploading"),s(p,"disabled"),i.raise("filepredelete",[v,e,o])},success:function(e,s,d){return n=parseInt(c.data("fileindex").replace("init_","")),l=z(f.config)&&z(f.config[n])?null:f.config[n],o=z(l)||z(l.extra)?a:l.extra,void 0!==e&&void 0!==e.error?(h.jqXHR=d,h.response=e,i.showError(e.error,h,"filedeleteerror"),c.removeClass("file-uploading"),p.removeClass("disabled"),void r()):(t.unset(i.id,n),i.raise("filedeleted",[v,d,o]),c.removeClass("file-uploading").addClass("file-deleted"),void c.fadeOut("slow",function(){i.clearObjects(c),c.remove(),r(),t.count(i.id)||0!==i.getFileStack().length||i.reset()}))},error:function(e,t,a){var n=i.parseError(e,a);h.jqXHR=e,h.response={},i.showError(n,h,"filedeleteerror"),c.removeClass("file-uploading"),r()}},i.ajaxDeleteSettings),p.off("click").on("click",function(){e.ajax(d)}))})},clearObjects:function(i){i.find("video audio").each(function(){this.pause(),e(this).remove()}),i.find("img object div").each(function(){e(this).remove()})},clearFileInput:function(){var i,t,a,r=this,n=r.$element;z(n.val())||(r.isIE9||r.isIE10?(i=n.closest("form"),t=e(document.createElement("form")),a=e(document.createElement("div")),n.before(a),i.length?i.after(t):a.after(t),t.append(n).trigger("reset"),a.before(n).remove(),t.remove()):n.val(""),r.fileInputCleared=!0)},resetUpload:function(){var e=this;e.uploadCache={content:[],config:[],tags:[],append:!0},e.uploadCount=0,e.uploadPercent=0,e.$btnUpload.removeAttr("disabled"),e.setProgress(0),s(e.$progress,"hide"),e.resetErrors(!1),e.uploadAborted=!1,e.ajaxRequests=[]},cancel:function(){var i,t=this,r=t.ajaxRequests,n=r.length;if(n>0)for(i=0;n>i;i+=1)r[i].abort();t.$preview.find(a).each(function(){var i=e(this),a=i.attr("data-fileindex");i.removeClass("file-uploading"),void 0!==t.filestack[a]&&(i.find(".kv-file-upload").removeClass("disabled").removeAttr("disabled"),i.find(".kv-file-remove").removeClass("disabled").removeAttr("disabled")),t.unlock()})},clear:function(){var i,r=this;r.$btnUpload.removeAttr("disabled"),r.resetUpload(),r.filestack=[],r.clearFileInput(),r.resetErrors(!0),r.raise("fileclear"),!r.overwriteInitial&&t.count(r.id)?(r.showFileIcon(),r.resetPreview(),r.setEllipsis(),r.initPreviewDeletes(),r.$container.removeClass("file-input-new")):(r.$preview.find(a).each(function(){r.clearObjects(e(this))}),r.$preview.html(""),i=!r.overwriteInitial&&r.initialCaption.length>0?r.initialCaption:"",r.$caption.html(i),r.setEllipsis(),r.$caption.attr("title",""),s(r.$container,"file-input-new")),0===r.$container.find(".file-preview-frame").length&&(r.initialCaption="",r.$caption.html(""),r.setEllipsis(),r.$captionContainer.find(".kv-caption-icon").hide()),r.hideFileIcon(),r.raise("filecleared"),r.$captionContainer.focus(),r.setFileDropZoneTitle()},resetPreview:function(){var e,i=this;t.count(i.id)?(e=t.out(i.id),i.$preview.html(e.content),i.setCaption(e.caption)):(i.$preview.html(""),i.$caption.html(""))},reset:function(){var e=this;e.clear(),e.resetPreview(),e.setEllipsis(),e.$container.find(".fileinput-filename").text(""),e.raise("filereset"),e.initialPreview.length>0&&e.$container.removeClass("file-input-new"),e.setFileDropZoneTitle(),e.filestack=[],e.formdata={}},disable:function(){var e=this;e.isDisabled=!0,e.raise("filedisabled"),e.$element.attr("disabled","disabled"),e.$container.find(".kv-fileinput-caption").addClass("file-caption-disabled"),e.$container.find(".btn-file, .fileinput-remove, .kv-fileinput-upload").attr("disabled",!0),e.initDragDrop()},enable:function(){var e=this;e.isDisabled=!1,e.raise("fileenabled"),e.$element.removeAttr("disabled"),e.$container.find(".kv-fileinput-caption").removeClass("file-caption-disabled"),e.$container.find(".btn-file, .fileinput-remove, .kv-fileinput-upload").removeAttr("disabled"),e.initDragDrop()},getExtraData:function(){var e=this,i=e.uploadExtraData;return"function"==typeof e.uploadExtraData&&(i=e.uploadExtraData()),i},uploadExtra:function(){var i=this,t=i.getExtraData();0!==t.length&&e.each(t,function(e,t){i.formdata.append(e,t)})},initXhr:function(e,i){var t=this;return e.upload&&e.upload.addEventListener("progress",function(e){var a=0,r=e.loaded||e.position,n=e.total;e.lengthComputable&&(a=Math.ceil(r/n*i)),t.uploadPercent=Math.max(a,t.uploadPercent),t.setProgress(t.uploadPercent)},!1),e},ajaxSubmit:function(i,t,a,r){var n,l=this;l.uploadExtra(),n=e.extend({xhr:function(){var i=e.ajaxSettings.xhr();return l.initXhr(i,98)},url:l.uploadUrl,type:"POST",dataType:"json",data:l.formdata,cache:!1,processData:!1,contentType:!1,beforeSend:i,success:t,complete:a,error:r},l.ajaxSettings),l.ajaxRequests.push(e.ajax(n))},initUploadSuccess:function(i,a,r){var n,l,o,s,d,p,c,f=this;"object"!=typeof i||e.isEmptyObject(i)||void 0!==i.initialPreview&&i.initialPreview.length>0&&(f.hasInitData=!0,d=i.initialPreview||[],p=i.initialPreviewConfig||[],c=i.initialPreviewThumbTags||[],n=void 0===i.append||i.append?!0:!1,f.overwriteInitial=!1,void 0!==a&&r?(o=t.add(f.id,d,p[0],c[0],n),l=t.get(f.id,o,!1),s=e(l).hide(),a.after(s).fadeOut("slow",function(){s.fadeIn("slow").css("display:inline-block"),f.initPreviewDeletes()})):r?(f.uploadCache.content.push(d[0]),f.uploadCache.config.push(p[0]),f.uploadCache.tags.push(c[0]),f.uploadCache.append=n):(t.set(f.id,d,p,c,n),f.initPreview(),f.initPreviewDeletes()))},uploadSingle:function(i,r,n){var l,o,d,p,c,f,u,v,h,m,g=this,w=g.getFileStack().length,b=new FormData,x=g.previewInitId+"-"+i,C=e("#"+x+":not(.file-preview-initial)"),y=C.find(".kv-file-upload"),E=C.find(".kv-file-remove"),$=C.find(".file-upload-indicator"),T=g.fileActionSettings,F=g.filestack.length>0||!e.isEmptyObject(g.uploadExtraData),k={id:x,index:i};g.formdata=b,0===w||!F||y.hasClass("disabled")||g.abort(k)||(d=function(){var e=g.$preview.find(a+".file-uploading");e.length>0&&g.fileBatchCompleted||(t.set(g.id,g.uploadCache.content,g.uploadCache.config,g.uploadCache.tags,g.uploadCache.append),g.hasInitData&&(g.initPreview(),g.initPreviewDeletes()),g.setProgress(100),g.unlock(),g.clearFileInput(),g.raise("filebatchuploadcomplete",[g.filestack,g.getExtraData()]),g.fileBatchCompleted=!0)},p=function(e,i){$.html(T[e]),$.attr("title",T[i])},c=function(){!n||0===w||g.uploadPercent>=100||(g.uploadCount+=1,o=80+Math.ceil(20*g.uploadCount/w),g.uploadPercent=Math.max(o,g.uploadPercent),g.setProgress(g.uploadPercent),g.initPreviewDeletes())},f=function(){y.removeAttr("disabled"),E.removeAttr("disabled"),C.removeClass("file-uploading")},u=function(t){l=g.getOutData(t),p("indicatorLoading","indicatorLoadingTitle"),s(C,"file-uploading"),y.attr("disabled",!0),E.attr("disabled",!0),n||g.lock(),g.raise("filepreupload",[l,x,i]),k=e.extend(k,l),g.abort(k)&&(t.abort(),g.setProgress(100))},v=function(t,a,r){l=g.getOutData(r,t),k=e.extend(k,l),setTimeout(function(){void 0===t.error?(p("indicatorSuccess","indicatorSuccessTitle"),y.hide(),E.hide(),g.filestack[i]=void 0,g.raise("fileuploaded",[l,x,i]),g.initUploadSuccess(t,C,n),n||g.resetFileStack()):(p("indicatorError","indicatorErrorTitle"),g.showUploadError(t.error,k))},100)},h=function(){setTimeout(function(){c(),f(),n?setTimeout(function(){d()},500):g.unlock(!1)},100)},m=function(t,a,l){var o=g.parseError(t,l,n?r[i].name:null);p("indicatorError","indicatorErrorTitle"),k=e.extend(k,g.getOutData(t)),g.showUploadError(o,k)},b.append(g.uploadFileAttr,r[i]),b.append("file_id",i),g.ajaxSubmit(u,v,h,m))},uploadBatch:function(){var i,t,r,n,l,o,d,p,c=this,f=c.filestack,u=f.length,v=c.filestack.length>0||!e.isEmptyObject(c.uploadExtraData),h={};c.formdata=new FormData,0!==u&&v&&!c.abort(h)&&(i=c.fileActionSettings,t=function(t,a,r){var n=e("#"+c.previewInitId+"-"+t).find(".file-upload-indicator");n.html(i[a]),n.attr("title",i[r])},n=function(i){var t=e("#"+c.previewInitId+"-"+i+":not(.file-preview-initial)"),a=t.find(".kv-file-upload"),r=t.find(".kv-file-delete");t.removeClass("file-uploading"),a.removeAttr("disabled"),r.removeAttr("disabled")},r=function(){e.each(f,function(e){c.filestack[e]=void 0}),c.clearFileInput()},l=function(i){c.lock();var t=c.getOutData(i);c.showPreview&&c.$preview.find(a).each(function(){var i=e(this),t=i.find(".kv-file-upload"),a=i.find(".kv-file-remove");s(i,"file-uploading"),t.attr("disabled",!0),a.attr("disabled",!0)}),c.raise("filebatchpreupload",[t]),c.abort(t)&&i.abort()},o=function(i,l,o){var s=c.getOutData(o,i),d=z(i.errorkeys)?[]:i.errorkeys;void 0===i.error||z(i.error)?(c.raise("filebatchuploadsuccess",[s]),r(),c.showPreview?(c.$preview.find(".kv-file-upload").hide(),c.$preview.find(".kv-file-remove").hide(),c.$preview.find(a).each(function(){var i=e(this),a=i.attr("data-fileindex");t(a,"indicatorSuccess","indicatorSuccessTitle"),n(a)}),c.initUploadSuccess(i)):c.reset()):(c.showPreview&&(c.$preview.find(a).each(function(){var i=e(this),a=parseInt(i.attr("data-fileindex"),10);return n(a),0===d.length?void t(a,"indicatorError","indicatorErrorTitle"):void(-1!==e.inArray(a,d)?t(a,"indicatorError","indicatorErrorTitle"):(i.find(".kv-file-upload").hide(),i.find(".kv-file-remove").hide(),t(a,"indicatorSuccess","indicatorSuccessTitle"),c.filestack[a]=void 0))}),c.initUploadSuccess(i)),c.showUploadError(i.error,s,"filebatchuploaderror"))},d=function(){c.setProgress(100),c.unlock(),c.raise("filebatchuploadcomplete",[c.filestack,c.getExtraData()]),c.clearFileInput()},p=function(i,r,n){var l=c.getOutData(i),o=c.parseError(i,n);c.showUploadError(o,l,"filebatchuploaderror"),c.uploadFileCount=u-1,c.showPreview&&(c.$preview.find(a).each(function(){var i=e(this),a=i.attr("data-fileindex");i.removeClass("file-uploading"),void 0!==c.filestack[a]&&t(a,"indicatorError","indicatorErrorTitle")}),c.$preview.find(a).removeClass("file-uploading"),c.$preview.find(a+" .kv-file-upload").removeAttr("disabled"),c.$preview.find(a+" .kv-file-delete").removeAttr("disabled"))},e.each(f,function(e,i){z(f[e])||c.formdata.append(c.uploadFileAttr,i)}),c.ajaxSubmit(l,o,d,p))},uploadExtraOnly:function(){var e,i,t,a,r=this,n={};r.formdata=new FormData,r.abort(n)||(e=function(e){r.lock();var i=r.getOutData(e);r.raise("filebatchpreupload",[i]),r.setProgress(50),n.data=i,n.xhr=e,r.abort(n)&&(e.abort(),r.setProgress(100))},i=function(e,i,t){var a=r.getOutData(t,e);void 0===e.error||z(e.error)?(r.raise("filebatchuploadsuccess",[a]),r.clearFileInput(),r.initUploadSuccess(e)):r.showUploadError(e.error,a,"filebatchuploaderror")},t=function(){r.setProgress(100),r.unlock(),r.raise("filebatchuploadcomplete",[r.filestack,r.getExtraData()]),r.clearFileInput()},a=function(e,i,t){var a=r.getOutData(e),l=r.parseError(e,t);n.data=a,r.showUploadError(l,a,"filebatchuploaderror")},r.ajaxSubmit(e,i,t,a))},hideFileIcon:function(){this.overwriteInitial&&this.$captionContainer.find(".kv-caption-icon").hide()},showFileIcon:function(){this.$captionContainer.find(".kv-caption-icon").show()},resetErrors:function(e){var i=this,t=i.$errorContainer;i.isError=!1,i.$container.removeClass("has-error"),t.html(""),e?t.fadeOut("slow"):t.hide()},showFolderError:function(e){var i=this,t=i.$errorContainer;e&&(t.html(i.msgFoldersNotAllowed.repl("{n}",e)),t.fadeIn(800),s(i.$container,"has-error"),i.raise("filefoldererror",[e]))},showUploadError:function(e,i,t){var a=this,r=a.$errorContainer,n=t||"fileuploaderror";return 0===r.find("ul").length?r.html("<ul><li>"+e+"</li></ul>"):r.find("ul").append("<li>"+e+"</li>"),r.fadeIn(800),a.raise(n,[i]),s(a.$container,"has-error"),!0
},showError:function(e,i,t){var a=this,r=a.$errorContainer,n=t||"fileerror";return i=i||{},i.reader=a.reader,r.html(e),r.fadeIn(800),a.raise(n,[i]),a.isUploadable||a.clearFileInput(),s(a.$container,"has-error"),a.$btnUpload.attr("disabled",!0),!0},errorHandler:function(e,i){var t=this,a=e.target.error;switch(a.code){case a.NOT_FOUND_ERR:t.showError(t.msgFileNotFound.repl("{name}",i));break;case a.SECURITY_ERR:t.showError(t.msgFileSecured.repl("{name}",i));break;case a.NOT_READABLE_ERR:t.showError(t.msgFileNotReadable.repl("{name}",i));break;case a.ABORT_ERR:t.showError(t.msgFilePreviewAborted.repl("{name}",i));break;default:t.showError(t.msgFilePreviewError.repl("{name}",i))}},parseFileType:function(e){var i,t,a,r,n=this;for(r=0;r<L.length;r+=1)if(a=L[r],i=N(a,n.fileTypeSettings)?n.fileTypeSettings[a]:R[a],t=i(e.type,e.name)?a:"",!z(t))return t;return"other"},previewDefault:function(i,t,a){if(this.showPreview){var r=this,n=H.createObjectURL(i),l=e("#"+t),o=r.previewSettings.other,s=r.renderFileFooter(i.name,o.width),d=r.getPreviewTemplate("other"),p=t.slice(t.lastIndexOf("-")+1),c="";a===!0&&(c=" btn disabled",s+='<div class="file-other-error text-danger"><i class="glyphicon glyphicon-exclamation-sign"></i></div>'),r.$preview.append("\n"+d.repl("{previewId}",t).repl("{frameClass}",c).repl("{fileindex}",p).repl("{caption}",r.slug(i.name)).repl("{width}",o.width).repl("{height}",o.height).repl("{type}",i.type).repl("{data}",n).repl("{footer}",s)),l.on("load",function(){H.revokeObjectURL(l.attr("data"))})}},previewFile:function(e,i,t,a){if(this.showPreview){var r,n,l,o,s=this,d=s.parseFileType(e),p=s.slug(e.name),c=s.allowedPreviewTypes,f=s.allowedPreviewMimeTypes,u=s.getPreviewTemplate(d),v=N(d,s.previewSettings)?s.previewSettings[d]:O[d],h=parseInt(s.wrapTextLength,10),m=s.wrapIndicator,g=c.indexOf(d)>=0,w=z(f)||!z(f)&&N(e.type,f),b=s.renderFileFooter(p,v.width),x="",C=t.slice(t.lastIndexOf("-")+1);g&&w?("text"===d?(n=_(i.target.result),H.revokeObjectURL(a),n.length>h&&(l="text-"+Z(),o=.75*window.innerHeight,x=s.getLayoutTemplate("modal").repl("{id}",l).repl("{title}",p).repl("{height}",o).repl("{body}",n),m=m.repl("{title}",p).repl("{dialog}","$('#"+l+"').modal('show')"),n=n.substring(0,h-1)+m),r=u.repl("{previewId}",t).repl("{caption}",p).repl("{frameClass}","").repl("{type}",e.type).repl("{width}",v.width).repl("{height}",v.height).repl("{data}",n).repl("{footer}",b).repl("{fileindex}",C)+x):r=u.repl("{previewId}",t).repl("{caption}",p).repl("{frameClass}","").repl("{type}",e.type).repl("{data}",a).repl("{width}",v.width).repl("{height}",v.height).repl("{footer}",b).repl("{fileindex}",C),s.$preview.append("\n"+r),s.autoSizeImage(t)):s.previewDefault(e,t)}},slugDefault:function(e){return z(e)?"":e.split(/(\\|\/)/g).pop().replace(/[^\w\-.\\\/ ]+/g,"")},getFileStack:function(){var e=this;return e.filestack.filter(function(e){return void 0!==e})},readFiles:function(i){function t(e){if(z(r.attr("multiple"))&&(f=1),e>=f)return a.isUploadable&&a.filestack.length>0?a.raise("filebatchselected",[a.getFileStack()]):a.raise("filebatchselected",[i]),o.removeClass("loading"),void s.html("");var m,g,w,b,x,C,y=v+e,E=c+"-"+y,$=i[e],T=a.slug($.name),F=($.size||0)/1e3,k="",D=H.createObjectURL($),I=0,P=a.allowedFileTypes,S=z(P)?"":P.join(", "),U=a.allowedFileExtensions,j=z(U)?"":U.join(", ");if(z(U)||(k=new RegExp("\\.("+U.join("|")+")$","i")),F=F.toFixed(2),a.maxFileSize>0&&F>a.maxFileSize)return b=a.msgSizeTooLarge.repl("{name}",T).repl("{size}",F).repl("{maxSize}",a.maxFileSize),void(a.isError=h(b,$,E,e));if(!z(P)&&B(P)){for(w=0;w<P.length;w+=1)x=P[w],g=u[x],C=void 0!==g&&g($.type,T),I+=z(C)?0:C.length;if(0===I)return b=a.msgInvalidFileType.repl("{name}",T).repl("{types}",S),void(a.isError=h(b,$,E,e))}return 0!==I||z(U)||!B(U)||z(k)||(C=T.match(k),I+=z(C)?0:C.length,0!==I)?a.showPreview?(n.length>0&&void 0!==FileReader?(s.html(d.repl("{index}",e+1).repl("{files}",f)),o.addClass("loading"),l.onerror=function(e){a.errorHandler(e,T)},l.onload=function(e){a.previewFile($,e,E,D),a.initFileActions()},l.onloadend=function(){b=p.repl("{index}",e+1).repl("{files}",f).repl("{percent}",50).repl("{name}",T),setTimeout(function(){s.html(b),H.revokeObjectURL(D)},100),setTimeout(function(){t(e+1),a.updateFileDetails(f)},100),a.raise("fileloaded",[$,E,e,l])},l.onprogress=function(i){if(i.lengthComputable){var t=i.loaded/i.total*100,a=Math.ceil(t);b=p.repl("{index}",e+1).repl("{files}",f).repl("{percent}",a).repl("{name}",T),setTimeout(function(){s.html(b)},100)}},m=N("text",u)?u.text:R.text,m($.type,T)?l.readAsText($,a.textEncoding):l.readAsArrayBuffer($)):(a.previewDefault($,E),setTimeout(function(){t(e+1),a.updateFileDetails(f)},100),a.raise("fileloaded",[$,E,e,l])),void a.filestack.push($)):(a.filestack.push($),setTimeout(t(e+1),100),void a.raise("fileloaded",[$,E,e,l])):(b=a.msgInvalidFileExtension.repl("{name}",T).repl("{extensions}",j),void(a.isError=h(b,$,E,e)))}this.reader=new FileReader;var a=this,r=a.$element,n=a.$preview,l=a.reader,o=a.$previewContainer,s=a.$previewStatus,d=a.msgLoading,p=a.msgProgress,c=a.previewInitId,f=i.length,u=a.fileTypeSettings,v=a.filestack.length,h=function(t,r,n,l){var o=e.extend(a.getOutData({},{},i),{id:n,index:l}),s={id:n,index:l,file:r,files:i};return a.previewDefault(r,n,!0),a.isUploadable?a.showUploadError(t,o):a.showError(t,s)};t(0),a.updateFileDetails(f,!1)},updateFileDetails:function(e){var i=this,a=i.msgSelected,r=i.$element,n=i.getFileStack(),l=r.val()||n.length&&n[0].name||"",o=i.slug(l),s=i.isUploadable?n.length:e,d=t.count(i.id)+s,p=s>1?a.repl("{n}",d):o;i.isError?(i.$previewContainer.removeClass("loading"),i.$previewStatus.html(""),i.$captionContainer.find(".kv-caption-icon").hide()):i.showFileIcon(),i.setCaption(p,i.isError),i.$container.removeClass("file-input-new file-input-ajax-new"),1===arguments.length&&i.raise("fileselect",[e,o]),t.count(i.id)&&i.initPreviewDeletes()},change:function(i){var a=this,r=a.$element;if(!a.isUploadable&&z(r.val())&&a.fileInputCleared)return void(a.fileInputCleared=!1);a.fileInputCleared=!1;var n,l,o,s,d=a.$preview,p=arguments.length>1,c=p?i.originalEvent.dataTransfer.files:r.get(0).files,f=z(r.attr("multiple")),u=0,v=0,h=a.filestack.length,m=a.isUploadable,g=function(i,t,r,n){var l=e.extend(a.getOutData({},{},c),{id:r,index:n}),o={id:r,index:n,file:t,files:c};return a.isUploadable?a.showUploadError(i,l):a.showError(i,o)};if(a.reader=null,a.resetUpload(),a.hideFileIcon(),a.isUploadable&&a.$container.find(".file-drop-zone ."+a.dropZoneTitleClass).remove(),p)for(n=[];c[u];)s=c[u],s.type||s.size%4096!==0?n.push(s):v++,u++;else n=void 0===i.target.files?i.target&&i.target.value?[{name:i.target.value.replace(/^.+\\/,"")}]:[]:i.target.files;if(z(n)||0===n.length)return m||a.clear(),a.showFolderError(v),void a.raise("fileselectnone");if(a.resetErrors(),!m||f&&h>0){if(!a.overwriteInitial&&t.count(a.id)){var w=t.out(a.id);d.html(w.content),a.setCaption(w.caption),a.initPreviewDeletes()}else d.html("");f&&h>0&&(a.filestack=[])}return o=a.isUploadable?a.getFileStack().length+n.length:n.length,a.maxFileCount>0&&o>a.maxFileCount?(l=a.msgFilesTooMany.repl("{m}",a.maxFileCount).repl("{n}",o),a.isError=g(l,null,null,null),a.$captionContainer.find(".kv-caption-icon").hide(),a.$caption.html(a.msgValidationError),a.setEllipsis(),void a.$container.removeClass("file-input-new file-input-ajax-new")):(a.isIE9?a.updateFileDetails(1):a.readFiles(n),void a.showFolderError(v))},autoSizeImage:function(e){var i,t,a,r=this,n=r.$preview,l=n.find("#"+e),o=l.find("img");o.length&&o.on("load",function(){i=l.width(),t=n.width(),i>t&&(o.css("width","100%"),l.css("width","97%")),a=o.closest(".file-preview-frame").find(".file-caption-name"),a.length&&(a.width(o.width()),a.attr("title",a.text())),r.raise("fileimageloaded",e)})},setCaption:function(i,t){var a,r,n=this,l=t||!1;z(i)||0===n.$caption.length||(l?(a=e("<div>"+n.msgValidationError+"</div>").text(),r='<span class="'+n.msgValidationErrorClass+'">'+n.msgValidationErrorIcon+a+"</span>"):(a=e("<div>"+i+"</div>").text(),r=a+n.getLayoutTemplate("icon")),n.$caption.html(r),n.$caption.attr("title",a),n.$captionContainer.find(".file-caption-ellipsis").attr("title",a),n.setEllipsis())},initBrowse:function(e){var i=this;i.$btnFile=e.find(".btn-file"),i.$btnFile.append(i.$element)},createContainer:function(){var i=this,t=e(document.createElement("span")).attr({"class":"file-input file-input-new"}).html(i.renderMain());return i.$element.before(t),i.initBrowse(t),t},refreshContainer:function(){var e=this,i=e.$container;i.before(e.$element),i.html(e.renderMain()),e.initBrowse(i)},renderMain:function(){var e=this,i=e.isUploadable&&e.dropZoneEnabled?" file-drop-zone":"",t=e.showPreview?e.getLayoutTemplate("preview").repl("{class}",e.previewClass).repl("{dropClass}",i):"",a=e.isDisabled?e.captionClass+" file-caption-disabled":e.captionClass,r=e.captionTemplate.repl("{class}",a+" kv-fileinput-caption");return e.mainTemplate.repl("{class}",e.mainClass).repl("{preview}",t).repl("{caption}",r).repl("{upload}",e.renderUpload()).repl("{remove}",e.renderRemove()).repl("{cancel}",e.renderCancel()).repl("{browse}",e.renderBrowse())},renderBrowse:function(){var e=this,i=e.browseClass+" btn-file",t="";return e.isDisabled&&(t=" disabled "),'<div class="'+i+'"'+t+"> "+e.browseIcon+e.browseLabel+" </div>"},renderRemove:function(){var e=this,i=e.removeClass+" fileinput-remove fileinput-remove-button",t="";return e.showRemove?(e.isDisabled&&(t=" disabled "),'<button type="button" title="'+e.removeTitle+'" class="'+i+'"'+t+">"+e.removeIcon+e.removeLabel+"</button>"):""},renderCancel:function(){var e=this,i=e.cancelClass+" fileinput-cancel fileinput-cancel-button";return e.showCancel?'<button type="button" title="'+e.cancelTitle+'" class="hide '+i+'">'+e.cancelIcon+e.cancelLabel+"</button>":""},renderUpload:function(){var e=this,i=e.uploadClass+" kv-fileinput-upload fileinput-upload-button",t="",a="";return e.showUpload?(e.isDisabled&&(a=" disabled "),t=!e.isUploadable||e.isDisabled?'<button type="submit" title="'+e.uploadTitle+'"class="'+i+'"'+a+">"+e.uploadIcon+e.uploadLabel+"</button>":'<a href="'+e.uploadUrl+'" title="'+e.uploadTitle+'" class="'+i+'"'+a+">"+e.uploadIcon+e.uploadLabel+"</a>"):""}},e.fn.fileinput=function(t){if(n()||i(9)){var a=Array.apply(null,arguments);return a.shift(),this.each(function(){var i=e(this),r=i.data("fileinput"),n="object"==typeof t&&t;r||(r=new V(this,e.extend({},e.fn.fileinput.defaults,n,e(this).data())),i.data("fileinput",r)),"string"==typeof t&&r[t].apply(r,a)})}},e.fn.fileinput.defaults={showCaption:!0,showPreview:!0,showRemove:!0,showUpload:!0,showCancel:!0,mainClass:"",previewClass:"",captionClass:"",mainTemplate:null,initialCaption:"",initialPreview:[],initialPreviewDelimiter:"*$$*",initialPreviewConfig:[],initialPreviewThumbTags:[],previewThumbTags:{},initialPreviewShowDelete:!0,deleteUrl:"",deleteExtraData:{},overwriteInitial:!0,layoutTemplates:j,previewTemplates:A,allowedPreviewTypes:L,allowedPreviewMimeTypes:null,allowedFileTypes:null,allowedFileExtensions:null,customLayoutTags:{},customPreviewTags:{},previewSettings:O,fileTypeSettings:R,previewFileIcon:'<i class="glyphicon glyphicon-file"></i>',browseIcon:'<i class="glyphicon glyphicon-folder-open"></i> &nbsp;',browseClass:"btn btn-primary",removeIcon:'<i class="glyphicon glyphicon-trash"></i> ',removeClass:"btn btn-default",cancelIcon:'<i class="glyphicon glyphicon-ban-circle"></i> ',cancelClass:"btn btn-default",uploadIcon:'<i class="glyphicon glyphicon-upload"></i> ',uploadClass:"btn btn-default",uploadUrl:null,uploadAsync:!0,uploadExtraData:{},maxFileSize:0,minFileCount:0,maxFileCount:0,msgValidationErrorClass:"text-danger",msgValidationErrorIcon:'<i class="glyphicon glyphicon-exclamation-sign"></i> ',msgErrorClass:"file-error-message",progressClass:"progress-bar progress-bar-success progress-bar-striped active",progressCompleteClass:"progress-bar progress-bar-success",previewFileType:"image",wrapTextLength:250,wrapIndicator:' <span class="wrap-indicator" title="{title}" onclick="{dialog}">[&hellip;]</span>',elCaptionContainer:null,elCaptionText:null,elPreviewContainer:null,elPreviewImage:null,elPreviewStatus:null,elErrorContainer:null,slugCallback:null,dropZoneEnabled:!0,dropZoneTitleClass:"file-drop-zone-title",fileActionSettings:{},otherActionButtons:"",textEncoding:"UTF-8",ajaxSettings:{},ajaxDeleteSettings:{},showAjaxErrorDetails:!0},e.fn.fileinput.locales={},e.fn.fileinput.locales.en={fileSingle:"file",filePlural:"files",browseLabel:"Browse &hellip;",removeLabel:"Remove",removeTitle:"Clear selected files",cancelLabel:"Cancel",cancelTitle:"Abort ongoing upload",uploadLabel:"Upload",uploadTitle:"Upload selected files",msgSizeTooLarge:'File "{name}" (<b>{size} KB</b>) exceeds maximum allowed upload size of <b>{maxSize} KB</b>. Please retry your upload!',msgFilesTooLess:"You must select at least <b>{n}</b> {files} to upload. Please retry your upload!",msgFilesTooMany:"Number of files selected for upload <b>({n})</b> exceeds maximum allowed limit of <b>{m}</b>. Please retry your upload!",msgFileNotFound:'File "{name}" not found!',msgFileSecured:'Security restrictions prevent reading the file "{name}".',msgFileNotReadable:'File "{name}" is not readable.',msgFilePreviewAborted:'File preview aborted for "{name}".',msgFilePreviewError:'An error occurred while reading the file "{name}".',msgInvalidFileType:'Invalid type for file "{name}". Only "{types}" files are supported.',msgInvalidFileExtension:'Invalid extension for file "{name}". Only "{extensions}" files are supported.',msgValidationError:"File Upload Error",msgLoading:"Loading file {index} of {files} &hellip;",msgProgress:"Loading file {index} of {files} - {name} - {percent}% completed.",msgSelected:"{n} files selected",msgFoldersNotAllowed:"Drag & drop files only! {n} folder(s) dropped were skipped.",dropZoneTitle:"Drag & drop files here &hellip;"},e.extend(e.fn.fileinput.defaults,e.fn.fileinput.locales.en),e.fn.fileinput.Constructor=V,e(document).ready(function(){var i=e("input.file[type=file]"),t=i.attr("type")?i.length:0;t>0&&i.fileinput()})}(window.jQuery);
/*!
 * FileInput French Translations
 *
 * This file must be loaded after 'fileinput.js'. Patterns in braces '{}', or
 * any HTML markup tags in the messages must not be converted or translated.
 *
 * @see http://github.com/kartik-v/bootstrap-fileinput
 *
 * NOTE: this file must be saved in UTF-8 encoding.
 */
(function ($) {
    "use strict";

    $.fn.fileinput.locales.fr = {
        fileSingle: 'fichier',
        filePlural: 'fichiers',
        browseLabel: 'Parcourir&hellip;',
        removeLabel: 'Retirer',
        removeTitle: 'Retirer les fichiers sélectionnés',
        cancelLabel: 'Annuler',
        cancelTitle: "Annuler l'envoi en cours",
        uploadLabel: 'Transférer',
        uploadTitle: 'Transférer les fichiers sélectionnés',
        msgSizeTooLarge: 'Le fichier "{name}" (<b>{size} KB</b>) dépasse la taille maximale autorisée qui est de <b>{maxSize} KB</b>. Merci de recommencer !',
        msgFilesTooLess: 'Vous devez sélectionner au moins <b>{n}</b> {files} à transmetter. Merci de recommencer !',
        msgFilesTooMany: 'Le nombre de fichier sélectionné <b>({n})</b> dépasse la quantité maximale autorisée qui est de <b>{m}</b>. Merci de recommencer !',
        msgFileNotFound: 'Le fichier "{name}" est introuvable !',
        msgFileSecured: "Des restrictions de sécurité vous empêchent d'accéder au fichier \"{name}\".",
        msgFileNotReadable: 'Le fichier "{name}" est illisble.',
        msgFilePreviewAborted: 'Prévisualisation du fichier "{name}" annulée.',
        msgFilePreviewError: 'Une erreur est survenue lors de la lecture du fichier "{name}".',
        msgInvalidFileType: 'Type de document invalide pour "{name}". Seulement les documents de type "{types}" sont autorisés.',
        msgInvalidFileExtension: 'Extension invalide pour le fichier "{name}". Seules les extensions "{extensions}" sont autorisées.',
        msgValidationError: 'Erreur lors de la transmission du fichier',
        msgLoading: 'Transmission du fichier {index} sur {files}&hellip;',
        msgProgress: 'Transmission du fichier {index} sur {files} - {name} - {percent}% faits.',
        msgSelected: '{n} fichier(s) sélectionné(s)',
        msgFoldersNotAllowed: 'Glissez et déposez uniquement des fichiers ! {n} répertoire(s) exclu(s).',
        dropZoneTitle: 'Glissez et déposez les fichiers ici&hellip;'
    };

    $.extend($.fn.fileinput.defaults, $.fn.fileinput.locales.fr);
})(window.jQuery);


//# sourceMappingURL=maps/backend.min.js.map